# Batch mode with Autogenerate

**带自动生成的批处理模式**

[Operations.batch_alter_table()]: ../en/ops.html#alembic.operations.Operations.batch_alter_table
[BatchOperations]: ../en/ops.html#alembic.operations.BatchOperations
[Operations]: ../en/ops.html#alembic.operations.Operations
[EnvironmentContext.configure.render_as_batch]: ../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.render_as_batch
[Operations.batch_alter_table.copy_from]: ../en/ops.html#alembic.operations.Operations.batch_alter_table.params.copy_from

The syntax of batch mode is essentially that **[Operations.batch_alter_table()]** is used to enter a batch block, and the returned **[BatchOperations]** context works just like the regular **[Operations]** context, except that the “table name” and “schema name” arguments are omitted.

To support rendering of migration commands in batch mode for autogenerate, configure the **[EnvironmentContext.configure.render_as_batch]** flag in env.py:

```python
context.configure(
    connection=connection,
    target_metadata=target_metadata,
    render_as_batch=True
)
```

Autogenerate will now generate along the lines of:

```python
def upgrade():
    ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('address', schema=None) as batch_op:
        batch_op.add_column(sa.Column('street', sa.String(length=50), nullable=True))
```

This mode is safe to use in all cases, as the **[Operations.batch_alter_table()]** directive by default only takes place for SQLite; other backends will behave just as they normally do in the absence of the batch directives.

Note that autogenerate support does not include “offline” mode, where the **[Operations.batch_alter_table.copy_from]** parameter is used. The table definition here would need to be entered into migration files manually if this is needed.
