
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Changelog &#8212; Alembic 1.7.5 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nature_override.css" />
    <link rel="stylesheet" type="text/css" href="_static/changelog.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx_paramlinks.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="DDL Internals" href="api/ddl.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api/ddl.html" title="DDL Internals"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Alembic 1.7.5 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Changelog</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<section id="change-1.7.6">
<h2 class="release-version">1.7.6<a class="headerlink" href="#change-1.7.6" title="Permalink to this headline">¶</a></h2>
no release date<section id="change-1.7.6-usecase">
<h3>usecase<a class="headerlink" href="#change-1.7.6-usecase" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.7.6-0"><span class="target" id="change-d2a7aac691c73d3dae219a639aadee4e"><strong>[usecase] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d2a7aac691c73d3dae219a639aadee4e">¶</a></span><p>Add a new command <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">ensure_version</span></code>, which will ensure that the
Alembic version table is present in the target database, but does not
alter its contents.  Pull request courtesy Kai Mueller.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/964">#964</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.7.6-bug">
<h3>bug<a class="headerlink" href="#change-1.7.6-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.7.6-1"><span class="target" id="change-5e7eebf7c8356395483cc8c0fd929d99"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5e7eebf7c8356395483cc8c0fd929d99">¶</a></span><p>Implemented support for recognizing and rendering SQLAlchemy “variant”
types going forward into SQLAlchemy 2.0, where the architecture of
“variant” datatypes will be changing.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.7.6-2"><span class="target" id="change-fe6415d903cdd51e74ea4038ca052cf5"><strong>[bug] [autogenerate] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-fe6415d903cdd51e74ea4038ca052cf5">¶</a></span><p>Added a rule to the MySQL impl so that the translation between JSON /
LONGTEXT is accommodated by autogenerate, treating LONGTEXT from the server
as equivalent to an existing JSON in the model.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/968">#968</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.7.5">
<h2 class="release-version">1.7.5<a class="headerlink" href="#change-1.7.5" title="Permalink to this headline">¶</a></h2>
Released: November 11, 2021<section id="change-1.7.5-bug">
<h3>bug<a class="headerlink" href="#change-1.7.5-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.7.5-0"><span class="target" id="change-c2b31ab76d418635cf111bf9175d7b03"><strong>[bug] [tests]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c2b31ab76d418635cf111bf9175d7b03">¶</a></span><p>Adjustments to the test suite to accommodate for error message changes
occurring as of SQLAlchemy 1.4.27.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.7.4">
<h2 class="release-version">1.7.4<a class="headerlink" href="#change-1.7.4" title="Permalink to this headline">¶</a></h2>
Released: October 6, 2021<section id="change-1.7.4-bug">
<h3>bug<a class="headerlink" href="#change-1.7.4-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.7.4-0"><span class="target" id="change-e727b0dbdc9c55b3b849853cf46ac249"><strong>[bug] [regression]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e727b0dbdc9c55b3b849853cf46ac249">¶</a></span><p>Fixed a regression that prevented the use of post write hooks
on python version lower than 3.9</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/934">#934</a></p>
</p>
</li>
<li><p class="caption" id="change-1.7.4-1"><span class="target" id="change-f07780db0cd090e75df9e24cfc599f00"><strong>[bug] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f07780db0cd090e75df9e24cfc599f00">¶</a></span><p>Fixed issue where the <a class="reference internal" href="api/runtime.html#alembic.runtime.migration.MigrationContext.autocommit_block" title="alembic.runtime.migration.MigrationContext.autocommit_block"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MigrationContext.autocommit_block()</span></code></a> feature
would fail to function when using a SQLAlchemy engine using 2.0 future
mode.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/944">#944</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.7.3">
<h2 class="release-version">1.7.3<a class="headerlink" href="#change-1.7.3" title="Permalink to this headline">¶</a></h2>
Released: September 17, 2021<section id="change-1.7.3-bug">
<h3>bug<a class="headerlink" href="#change-1.7.3-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.7.3-0"><span class="target" id="change-a27a8f93d9d83dc8d930358e9c716bc7"><strong>[bug] [mypy]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a27a8f93d9d83dc8d930358e9c716bc7">¶</a></span><p>Fixed type annotations for the “constraint_name” argument of operations
<code class="docutils literal notranslate"><span class="pre">create_primary_key()</span></code>, <code class="docutils literal notranslate"><span class="pre">create_foreign_key()</span></code>.  Pull request courtesy
TilmanK.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/914">#914</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.7.2">
<h2 class="release-version">1.7.2<a class="headerlink" href="#change-1.7.2" title="Permalink to this headline">¶</a></h2>
Released: September 17, 2021<section id="change-1.7.2-bug">
<h3>bug<a class="headerlink" href="#change-1.7.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.7.2-0"><span class="target" id="change-a85939e42c13746e68e50d8b2a64016a"><strong>[bug] [typing]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a85939e42c13746e68e50d8b2a64016a">¶</a></span><p>Added missing attributes from context stubs.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/900">#900</a></p>
</p>
</li>
<li><p class="caption" id="change-1.7.2-1"><span class="target" id="change-fd3cf523d06ece5c721b3e18b011d4e2"><strong>[bug] [mypy]</strong> <a class="changelog-reference headerlink reference internal" href="#change-fd3cf523d06ece5c721b3e18b011d4e2">¶</a></span><p>Fixed an import in one of the .pyi files that was triggering an
assertion error in some versions of mypy.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/897">#897</a></p>
</p>
</li>
<li><p class="caption" id="change-1.7.2-2"><span class="target" id="change-1c5b43e536dd92928ba0a1b4d18f52a6"><strong>[bug] [ops] [regression]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1c5b43e536dd92928ba0a1b4d18f52a6">¶</a></span><p>Fixed issue where registration of custom ops was prone to failure due to
the registration process running <code class="docutils literal notranslate"><span class="pre">exec()</span></code> on generated code that as of
the 1.7 series includes pep-484 annotations, which in the case of end user
code would result in name resolution errors when the exec occurs. The logic
in question has been altered so that the annotations are rendered as
forward references so that the <code class="docutils literal notranslate"><span class="pre">exec()</span></code> can proceed.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/920">#920</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.7.1">
<h2 class="release-version">1.7.1<a class="headerlink" href="#change-1.7.1" title="Permalink to this headline">¶</a></h2>
Released: August 30, 2021<section id="change-1.7.1-bug">
<h3>bug<a class="headerlink" href="#change-1.7.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.7.1-0"><span class="target" id="change-193176cdc6fa036466b778bc461cf148"><strong>[bug] [installation]</strong> <a class="changelog-reference headerlink reference internal" href="#change-193176cdc6fa036466b778bc461cf148">¶</a></span><p>Corrected “universal wheel” directive in setup.cfg so that building a wheel
does not target Python 2. The PyPi files index for 1.7.0 was corrected
manually. Pull request courtesy layday.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/893">#893</a></p>
</p>
</li>
<li><p class="caption" id="change-1.7.1-1"><span class="target" id="change-23129cec043258a532e17bf6e290dde4"><strong>[bug] [pep484]</strong> <a class="changelog-reference headerlink reference internal" href="#change-23129cec043258a532e17bf6e290dde4">¶</a></span><p>Fixed issue in generated .pyi files where default values for <code class="docutils literal notranslate"><span class="pre">Optional</span></code>
arguments were missing, thereby causing mypy to consider them as required.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/895">#895</a></p>
</p>
</li>
<li><p class="caption" id="change-1.7.1-2"><span class="target" id="change-fa4ce634011cd0d6b038b9824f49c5eb"><strong>[bug] [batch] [regression]</strong> <a class="changelog-reference headerlink reference internal" href="#change-fa4ce634011cd0d6b038b9824f49c5eb">¶</a></span><p>Fixed regression in batch mode due to <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/883">#883</a> where the “auto” mode
of batch would fail to accommodate any additional migration directives
beyond encountering an <code class="docutils literal notranslate"><span class="pre">add_column()</span></code> directive, due to a mis-application
of the conditional logic that was added as part of this change, leading to
“recreate” mode not being used in cases where it is required for SQLite
such as for unique constraints.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/896">#896</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.7.0">
<h2 class="release-version">1.7.0<a class="headerlink" href="#change-1.7.0" title="Permalink to this headline">¶</a></h2>
Released: August 30, 2021<section id="change-1.7.0-changed">
<h3>changed<a class="headerlink" href="#change-1.7.0-changed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.7.0-0"><span class="target" id="change-9a57a5d2920018886d36685d39705f7f"><strong>[changed] [installation]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9a57a5d2920018886d36685d39705f7f">¶</a></span><p>Alembic 1.7 now supports Python 3.6 and above; support for prior versions
including Python 2.7 has been dropped.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.7.0-1"><span class="target" id="change-c01e812b3ac23a262b2c9c343f009aad"><strong>[changed] [installation]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c01e812b3ac23a262b2c9c343f009aad">¶</a></span><p>Make the <code class="docutils literal notranslate"><span class="pre">python-dateutil</span></code> library an optional dependency.
This library is only required if the <code class="docutils literal notranslate"><span class="pre">timezone</span></code> option
is used in the Alembic configuration.
An extra require named <code class="docutils literal notranslate"><span class="pre">tz</span></code> is available with
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">alembic[tz]</span></code> to install it.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/674">#674</a></p>
</p>
</li>
<li><p class="caption" id="change-1.7.0-2"><span class="target" id="change-485e31adaa449606ea1bc31896fdcb7c"><strong>[changed] [installation]</strong> <a class="changelog-reference headerlink reference internal" href="#change-485e31adaa449606ea1bc31896fdcb7c">¶</a></span><p>The dependency on <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> which is part of <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> has
been removed, so there is no longer any runtime dependency on
<code class="docutils literal notranslate"><span class="pre">setuptools</span></code>. The functionality has been replaced with
<code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code> and <code class="docutils literal notranslate"><span class="pre">importlib.resources</span></code> which are both part of
Python std.lib, or via pypy dependency <code class="docutils literal notranslate"><span class="pre">importlib-metadata</span></code> for Python
version &lt; 3.8 and <code class="docutils literal notranslate"><span class="pre">importlib-resources</span></code> for Python version &lt; 3.9
(while importlib.resources was added to Python in 3.7, it did not include
the “files” API until 3.9).</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/885">#885</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.7.0-feature">
<h3>feature<a class="headerlink" href="#change-1.7.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.7.0-3"><span class="target" id="change-cde3f49dd2d7c3f8804ab66d2ffe582d"><strong>[feature] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-cde3f49dd2d7c3f8804ab66d2ffe582d">¶</a></span><p>Enhance <code class="docutils literal notranslate"><span class="pre">version_locations</span></code> parsing to handle paths containing spaces.
The new configuration option <code class="docutils literal notranslate"><span class="pre">version_path_separator</span></code> specifies the
character to use when splitting the <code class="docutils literal notranslate"><span class="pre">version_locations</span></code> string. The
default for new configurations is <code class="docutils literal notranslate"><span class="pre">version_path_separator</span> <span class="pre">=</span> <span class="pre">os</span></code>,
which will use <code class="docutils literal notranslate"><span class="pre">os.pathsep</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">;</span></code> on Windows).</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/842">#842</a></p>
</p>
</li>
<li><p class="caption" id="change-1.7.0-4"><span class="target" id="change-55760db1a7cdf8685222d40ca4d16c5e"><strong>[feature] [tests]</strong> <a class="changelog-reference headerlink reference internal" href="#change-55760db1a7cdf8685222d40ca4d16c5e">¶</a></span><p>Created a “test suite” similar to the one for SQLAlchemy, allowing
developers of third-party dialects to test their code against a set of
Alembic tests that have been specially selected to exercise
back-end database operations. At the time of release,
third-party dialects that have adopted the Alembic test suite to verify
compatibility include
<a class="reference external" href="https://pypi.org/project/sqlalchemy-cockroachdb/">CockroachDB</a> and
<a class="reference external" href="https://pypi.org/project/sqlalchemy-sybase/">SAP ASE (Sybase)</a>.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/855">#855</a></p>
</p>
</li>
<li><p class="caption" id="change-1.7.0-5"><span class="target" id="change-c19bfd454a1bd417b205d48213cff31d"><strong>[feature] [general]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c19bfd454a1bd417b205d48213cff31d">¶</a></span><p>pep-484 type annotations have been added throughout the library.
Additionally, stub .pyi files have been added for the “dynamically”
generated Alembic modules <code class="docutils literal notranslate"><span class="pre">alembic.op</span></code> and <code class="docutils literal notranslate"><span class="pre">alembic.config</span></code>, which
include complete function signatures and docstrings, so that the functions
in these namespaces will have both IDE support (vscode, pycharm, etc) as
well as support for typing tools like Mypy. The files themselves are
statically generated from their source functions within the source tree.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-1.7.0-usecase">
<h3>usecase<a class="headerlink" href="#change-1.7.0-usecase" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.7.0-6"><span class="target" id="change-471a1568984e186114908c0915461fbf"><strong>[usecase] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-471a1568984e186114908c0915461fbf">¶</a></span><p>Named CHECK constraints are now supported by batch mode, and will
automatically be part of the recreated table assuming they are named. They
also can be explicitly dropped using <code class="docutils literal notranslate"><span class="pre">op.drop_constraint()</span></code>. For
“unnamed” CHECK constraints, these are still skipped as they cannot be
distinguished from the CHECK constraints that are generated by the
<code class="docutils literal notranslate"><span class="pre">Boolean</span></code> and <code class="docutils literal notranslate"><span class="pre">Enum</span></code> datatypes.</p>
<p>Note that this change may require adjustments to migrations that drop or
rename columns which feature an associated named check constraint, such
that an additional <code class="docutils literal notranslate"><span class="pre">op.drop_constraint()</span></code> directive should be added for
that named constraint as there will no longer be an associated column
for it; for the <code class="docutils literal notranslate"><span class="pre">Boolean</span></code> and <code class="docutils literal notranslate"><span class="pre">Enum</span></code> datatypes, an <code class="docutils literal notranslate"><span class="pre">existing_type</span></code>
keyword may be passed to <code class="docutils literal notranslate"><span class="pre">BatchOperations.drop_constraint</span></code> as well.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="batch.html#batch-schematype-constraints"><span class="std std-ref">Changing the Type of Boolean, Enum and other implicit CHECK datatypes</span></a></p>
<p><a class="reference internal" href="batch.html#batch-check-constraints"><span class="std std-ref">Including CHECK constraints</span></a></p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/884">#884</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.7.0-bug">
<h3>bug<a class="headerlink" href="#change-1.7.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.7.0-7"><span class="target" id="change-4dd6bde9d2096da0af4c803fd1096420"><strong>[bug] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4dd6bde9d2096da0af4c803fd1096420">¶</a></span><p>Fixed regression due to <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/803">#803</a> where the <code class="docutils literal notranslate"><span class="pre">.info</span></code> and <code class="docutils literal notranslate"><span class="pre">.comment</span></code>
attributes of <code class="docutils literal notranslate"><span class="pre">Table</span></code> would be lost inside of the <a class="reference internal" href="api/operations.html#alembic.operations.ops.DropTableOp" title="alembic.operations.ops.DropTableOp"><code class="xref py py-class docutils literal notranslate"><span class="pre">DropTableOp</span></code></a>
class, which when “reversed” into a <a class="reference internal" href="api/operations.html#alembic.operations.ops.CreateTableOp" title="alembic.operations.ops.CreateTableOp"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTableOp</span></code></a> would then have
lost these elements. Pull request courtesy Nicolas CANIART.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/879">#879</a></p>
</p>
</li>
<li><p class="caption" id="change-1.7.0-8"><span class="target" id="change-ce877bb53344b47c2b017351d9194dba"><strong>[bug] [batch] [sqlite]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ce877bb53344b47c2b017351d9194dba">¶</a></span><p>Batch “auto” mode will now select for “recreate” if the <code class="docutils literal notranslate"><span class="pre">add_column()</span></code>
operation is used on SQLite, and the column itself meets the criteria for
SQLite where ADD COLUMN is not allowed, in this case a functional or
parenthesized SQL expression or a <code class="docutils literal notranslate"><span class="pre">Computed</span></code> (i.e. generated) column.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/883">#883</a></p>
</p>
</li>
<li><p class="caption" id="change-1.7.0-9"><span class="target" id="change-63309a4661d53ff0d2e6eb7f959dd7e9"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-63309a4661d53ff0d2e6eb7f959dd7e9">¶</a></span><p>Re-implemented the <code class="docutils literal notranslate"><span class="pre">python-editor</span></code> dependency as a small internal
function to avoid the need for external dependencies.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/856">#856</a></p>
</p>
</li>
<li><p class="caption" id="change-1.7.0-10"><span class="target" id="change-7120acfa24cb77b96599f60e002185fc"><strong>[bug] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-7120acfa24cb77b96599f60e002185fc">¶</a></span><p>Fixed issue where usage of the PostgreSQL <code class="docutils literal notranslate"><span class="pre">postgresql_include</span></code> option
within a <a class="reference internal" href="ops.html#alembic.operations.Operations.create_index" title="alembic.operations.Operations.create_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_index()</span></code></a> would raise a KeyError, as the
additional column(s) need to be added to the table object used by the
construct internally. The issue is equivalent to the SQL Server issue fixed
in <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/513">#513</a>. Pull request courtesy Steven Bronson.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/874">#874</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.6.5">
<h2 class="release-version">1.6.5<a class="headerlink" href="#change-1.6.5" title="Permalink to this headline">¶</a></h2>
Released: May 27, 2021<section id="change-1.6.5-bug">
<h3>bug<a class="headerlink" href="#change-1.6.5-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.6.5-0"><span class="target" id="change-e98e20165c8aa8d49ba6f1b27c02c6fa"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e98e20165c8aa8d49ba6f1b27c02c6fa">¶</a></span><p>Fixed issue where dialect-specific keyword arguments within the
<code class="xref py py-class docutils literal notranslate"><span class="pre">DropIndex</span></code> operation directive would not render in the
autogenerated Python code. As support was improved for adding dialect
specific arguments to directives as part of <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/803">#803</a>, in particular
arguments such as “postgresql_concurrently” which apply to the actual
create/drop of the index, support was needed for these to render even in a
drop index operation. Pull request courtesy Jet Zhou.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/849">#849</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.6.4">
<h2 class="release-version">1.6.4<a class="headerlink" href="#change-1.6.4" title="Permalink to this headline">¶</a></h2>
Released: May 24, 2021<section id="change-1.6.4-bug">
<h3>bug<a class="headerlink" href="#change-1.6.4-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.6.4-0"><span class="target" id="change-ac95552e2b69a0b7d664f19bc2131e74"><strong>[bug] [op directives] [regression]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ac95552e2b69a0b7d664f19bc2131e74">¶</a></span><p>Fixed regression caused by just fixed <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/844">#844</a> that scaled back the
filter for <code class="docutils literal notranslate"><span class="pre">unique=True/index=True</span></code> too far such that these directives no
longer worked for the <code class="docutils literal notranslate"><span class="pre">op.create_table()</span></code> op, this has been fixed.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/848">#848</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.6.3">
<h2 class="release-version">1.6.3<a class="headerlink" href="#change-1.6.3" title="Permalink to this headline">¶</a></h2>
Released: May 21, 2021<section id="change-1.6.3-bug">
<h3>bug<a class="headerlink" href="#change-1.6.3-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.6.3-0"><span class="target" id="change-af89a811d7ea87702cbf73d74a300a82"><strong>[bug] [autogenerate] [regression]</strong> <a class="changelog-reference headerlink reference internal" href="#change-af89a811d7ea87702cbf73d74a300a82">¶</a></span><p>Fixed 1.6-series regression where <code class="docutils literal notranslate"><span class="pre">UniqueConstraint</span></code> and to a lesser
extent <code class="docutils literal notranslate"><span class="pre">Index</span></code> objects would be doubled up in the generated model when
the <code class="docutils literal notranslate"><span class="pre">unique=True</span></code> / <code class="docutils literal notranslate"><span class="pre">index=True</span></code> flags were used.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/844">#844</a></p>
</p>
</li>
<li><p class="caption" id="change-1.6.3-1"><span class="target" id="change-cdc1193e1a99248da1d65eb6bff7ee7e"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-cdc1193e1a99248da1d65eb6bff7ee7e">¶</a></span><p>Fixed a bug where paths defined in post-write hook options
would be wrongly escaped in non posix environment (Windows).</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/839">#839</a></p>
</p>
</li>
<li><p class="caption" id="change-1.6.3-2"><span class="target" id="change-c0d81d8df723d78aea88c5993e6b2dd9"><strong>[bug] [regression] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c0d81d8df723d78aea88c5993e6b2dd9">¶</a></span><p>Fixed regression where a revision file that contained its own down revision
as a dependency would cause an endless loop in the traversal logic.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/843">#843</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.6.2">
<h2 class="release-version">1.6.2<a class="headerlink" href="#change-1.6.2" title="Permalink to this headline">¶</a></h2>
Released: May 6, 2021<section id="change-1.6.2-bug">
<h3>bug<a class="headerlink" href="#change-1.6.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.6.2-0"><span class="target" id="change-d85d8fbd6b31ac5011de1ab906e78f66"><strong>[bug] [regression] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d85d8fbd6b31ac5011de1ab906e78f66">¶</a></span><p>Fixed additional regression nearly the same as that of <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/838">#838</a> just
released in 1.6.1 but within a slightly different codepath, where “alembic
downgrade head” (or equivalent) would fail instead of iterating no
revisions.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/839">#839</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.6.1">
<h2 class="release-version">1.6.1<a class="headerlink" href="#change-1.6.1" title="Permalink to this headline">¶</a></h2>
Released: May 6, 2021<section id="change-1.6.1-bug">
<h3>bug<a class="headerlink" href="#change-1.6.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.6.1-0"><span class="target" id="change-43fc457a389f5284e1dc585738318c0e"><strong>[bug] [regression] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-43fc457a389f5284e1dc585738318c0e">¶</a></span><p>Fixed regression in new revisioning traversal where “alembic downgrade
base” would fail if the database itself were clean and unversioned;
additionally repairs the case where downgrade would fail if attempting
to downgrade to the current head that is already present.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/838">#838</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.6.0">
<h2 class="release-version">1.6.0<a class="headerlink" href="#change-1.6.0" title="Permalink to this headline">¶</a></h2>
Released: May 3, 2021<section id="change-1.6.0-feature">
<h3>feature<a class="headerlink" href="#change-1.6.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.6.0-0"><span class="target" id="change-3bbf45c1d3afd00c17eeb2c1961c4ac9"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3bbf45c1d3afd00c17eeb2c1961c4ac9">¶</a></span><p>Fix the documentation regarding the default command-line argument position of
the revision script filename within the post-write hook arguments. Implement a
<code class="docutils literal notranslate"><span class="pre">REVISION_SCRIPT_FILENAME</span></code> token, enabling the position to be changed. Switch
from <code class="docutils literal notranslate"><span class="pre">str.split()</span></code> to <code class="docutils literal notranslate"><span class="pre">shlex.split()</span></code> for more robust command-line argument
parsing.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/819">#819</a></p>
</p>
</li>
<li><p class="caption" id="change-1.6.0-1"><span class="target" id="change-fdad36ba623f4a0c6b6bccc17e1ed905"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-fdad36ba623f4a0c6b6bccc17e1ed905">¶</a></span><p>Implement a <code class="docutils literal notranslate"><span class="pre">.cwd</span></code> (current working directory) suboption for post-write hooks
(of type <code class="docutils literal notranslate"><span class="pre">console_scripts</span></code>). This is useful for tools like pre-commit, which
rely on the working directory to locate the necessary config files. Add
pre-commit as an example to the documentation. Minor change: rename some variables
from ticket #819 to improve readability.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/822">#822</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.6.0-bug">
<h3>bug<a class="headerlink" href="#change-1.6.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.6.0-2"><span class="target" id="change-e2fc377095992dac3d8d04410bdb2797"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e2fc377095992dac3d8d04410bdb2797">¶</a></span><p>Refactored the implementation of <a class="reference internal" href="api/operations.html#alembic.operations.ops.MigrateOperation" title="alembic.operations.ops.MigrateOperation"><code class="xref py py-class docutils literal notranslate"><span class="pre">MigrateOperation</span></code></a> constructs such
as <a class="reference internal" href="api/operations.html#alembic.operations.ops.CreateIndexOp" title="alembic.operations.ops.CreateIndexOp"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateIndexOp</span></code></a>, <a class="reference internal" href="api/operations.html#alembic.operations.ops.CreateTableOp" title="alembic.operations.ops.CreateTableOp"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateTableOp</span></code></a>, etc. so that they no
longer rely upon maintaining a persistent version of each schema object
internally; instead, the state variables of each operation object will be
used to produce the corresponding construct when the operation is invoked.
The rationale is so that environments which make use of
operation-manipulation schemes such as those those discussed in
<a class="reference internal" href="api/autogenerate.html#autogen-rewriter"><span class="std std-ref">Fine-Grained Autogenerate Generation with Rewriters</span></a> are better supported, allowing end-user code to
manipulate the public attributes of these objects which will then be
expressed in the final output, an example is
<code class="docutils literal notranslate"><span class="pre">some_create_index_op.kw[&quot;postgresql_concurrently&quot;]</span> <span class="pre">=</span> <span class="pre">True</span></code>.</p>
<p>Previously, these objects when generated from autogenerate would typically
hold onto the original, reflected element internally without honoring the
other state variables of each construct, preventing the public API from
working.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/803">#803</a></p>
</p>
</li>
<li><p class="caption" id="change-1.6.0-3"><span class="target" id="change-8498b97affea558b64fa137e28489566"><strong>[bug] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8498b97affea558b64fa137e28489566">¶</a></span><p>Fixed regression caused by the SQLAlchemy 1.4/2.0 compatibility switch
where calling <code class="docutils literal notranslate"><span class="pre">.rollback()</span></code> or <code class="docutils literal notranslate"><span class="pre">.commit()</span></code> explicitly within the
<code class="docutils literal notranslate"><span class="pre">context.begin_transaction()</span></code> context manager would cause it to fail when
the block ended, as it did not expect that the transaction was manually
closed.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/829">#829</a></p>
</p>
</li>
<li><p class="caption" id="change-1.6.0-4"><span class="target" id="change-9446ad24d93b817ce1417e9b06ba7d7b"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9446ad24d93b817ce1417e9b06ba7d7b">¶</a></span><p>Improved the rendering of <code class="docutils literal notranslate"><span class="pre">op.add_column()</span></code> operations when adding
multiple columns to an existing table, so that the order of these
statements matches the order in which the columns were declared in the
application’s table metadata. Previously the added columns were being
sorted alphabetically.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/827">#827</a></p>
</p>
</li>
<li><p class="caption" id="change-1.6.0-5"><span class="target" id="change-a8240b759639bd33da77801b09aa000e"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a8240b759639bd33da77801b09aa000e">¶</a></span><p>The algorithm used for calculating downgrades/upgrades/iterating
revisions has been rewritten, to resolve ongoing issues of branches
not being handled consistently particularly within downgrade operations,
as well as for overall clarity and maintainability.  This change includes
that a deprecation warning is emitted if an ambiguous command such
as “downgrade -1” when multiple heads are present is given.</p>
<p>In particular, the change implements a long-requested use case of allowing
downgrades of a single branch to a branchpoint.</p>
<p>Huge thanks to Simon Bowly for their impressive efforts in successfully
tackling this very difficult problem.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/464">#464</a>, <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/765">#765</a></p>
</p>
</li>
<li><p class="caption" id="change-1.6.0-6"><span class="target" id="change-304ae2c4ae3b148317b436de87cd70db"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-304ae2c4ae3b148317b436de87cd70db">¶</a></span><p>Added missing <code class="docutils literal notranslate"><span class="pre">batch_op.create_table_comment()</span></code>,
<code class="docutils literal notranslate"><span class="pre">batch_op.drop_table_comment()</span></code> directives to batch ops.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/799">#799</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.5.8">
<h2 class="release-version">1.5.8<a class="headerlink" href="#change-1.5.8" title="Permalink to this headline">¶</a></h2>
Released: March 23, 2021<section id="change-1.5.8-bug">
<h3>bug<a class="headerlink" href="#change-1.5.8-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.8-0"><span class="target" id="change-0109694f26376eab71538fb0ed05ad30"><strong>[bug] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0109694f26376eab71538fb0ed05ad30">¶</a></span><p>Fixed regression caused by SQLAlchemy 1.4 where the “alembic current”
command would fail due to changes in the <code class="docutils literal notranslate"><span class="pre">URL</span></code> object.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/816">#816</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.5.7">
<h2 class="release-version">1.5.7<a class="headerlink" href="#change-1.5.7" title="Permalink to this headline">¶</a></h2>
Released: March 11, 2021<section id="change-1.5.7-bug">
<h3>bug<a class="headerlink" href="#change-1.5.7-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.7-0"><span class="target" id="change-ca812f1593dc35ad10936145c658aace"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ca812f1593dc35ad10936145c658aace">¶</a></span><p>Adjusted the recently added
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_name" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_name</span></code></a> hook to accommodate
for additional object types such as “views” that don’t have a parent table,
to support third party recipes and extensions. Pull request courtesy Oliver
Rice.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/813">#813</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.5.6">
<h2 class="release-version">1.5.6<a class="headerlink" href="#change-1.5.6" title="Permalink to this headline">¶</a></h2>
Released: March 5, 2021<section id="change-1.5.6-bug">
<h3>bug<a class="headerlink" href="#change-1.5.6-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.6-0"><span class="target" id="change-bf330ea6156c149fb07e6e50013ef6ff"><strong>[bug] [mssql] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-bf330ea6156c149fb07e6e50013ef6ff">¶</a></span><p>Fixed bug where the “existing_type” parameter, which the MSSQL dialect
requires in order to change the nullability of a column in the absence of
also changing the column type, would cause an ALTER COLUMN operation to
incorrectly render a second ALTER statement without the nullability if a
new type were also present, as the MSSQL-specific contract did not
anticipate all three of “nullability”, “<a href="#id1"><span class="problematic" id="id2">type_</span></a>” and “existing_type” being
sent at the same time.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/812">#812</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.5.6-misc">
<h3>misc<a class="headerlink" href="#change-1.5.6-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.6-1"><span class="target" id="change-d1fc7fcb25acad45faf60357820f4485"><strong>[template]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d1fc7fcb25acad45faf60357820f4485">¶</a></span><p>Add async template to Alembic to bootstrap environments that use
async DBAPI. Updated the cookbook to include a migration guide
on how to adapt an existing environment for use with DBAPI drivers.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.5.5">
<h2 class="release-version">1.5.5<a class="headerlink" href="#change-1.5.5" title="Permalink to this headline">¶</a></h2>
Released: February 20, 2021<section id="change-1.5.5-bug">
<h3>bug<a class="headerlink" href="#change-1.5.5-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.5-0"><span class="target" id="change-0170e635b6918aad613be04ed4ceb138"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0170e635b6918aad613be04ed4ceb138">¶</a></span><p>Adjusted the use of SQLAlchemy’s “.copy()” internals to use “._copy()”
for version 1.4.0, as this method is being renamed.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.5.5-1"><span class="target" id="change-39e32b5abc92fb10c6727d09aff7448b"><strong>[bug] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-39e32b5abc92fb10c6727d09aff7448b">¶</a></span><p>Added new config file option <code class="docutils literal notranslate"><span class="pre">prepend_sys_path</span></code>, which is a series of
paths that will be prepended to sys.path; the default value in newly
generated alembic.ini files is “.”.  This fixes a long-standing issue
where for some reason running the alembic command line would not place the
local “.” path in sys.path, meaning an application locally present in “.”
and importable through normal channels, e.g. python interpreter, pytest,
etc. would not be located by Alembic, even though the <code class="docutils literal notranslate"><span class="pre">env.py</span></code> file is
loaded relative to the current path when <code class="docutils literal notranslate"><span class="pre">alembic.ini</span></code> contains a
relative path. To enable for existing installations, add the option to the
alembic.ini file as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># sys.path path, will be prepended to sys.path if present.</span>
<span class="c1"># defaults to the current working directory.</span>
<span class="n">prepend_sys_path</span> <span class="o">=</span> <span class="o">.</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="front.html#installation"><span class="std std-ref">Installation</span></a> - updated documentation reflecting that local
installation of the project is not necessary if running the Alembic cli
from the local path.</p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/797">#797</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.5.4">
<h2 class="release-version">1.5.4<a class="headerlink" href="#change-1.5.4" title="Permalink to this headline">¶</a></h2>
Released: February 3, 2021<section id="change-1.5.4-bug">
<h3>bug<a class="headerlink" href="#change-1.5.4-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.4-0"><span class="target" id="change-231ebcbd6ca8fb420a53b14de0600634"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-231ebcbd6ca8fb420a53b14de0600634">¶</a></span><p>Fixed bug in versioning model where a downgrade across a revision with a
dependency on another branch, yet an ancestor is also dependent on that
branch, would produce an erroneous state in the alembic_version table,
making upgrades impossible without manually repairing the table.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/789">#789</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.5.3">
<h2 class="release-version">1.5.3<a class="headerlink" href="#change-1.5.3" title="Permalink to this headline">¶</a></h2>
Released: January 29, 2021<section id="change-1.5.3-bug">
<h3>bug<a class="headerlink" href="#change-1.5.3-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.3-0"><span class="target" id="change-6fd28f7d9ef0428872320b2471091c3a"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6fd28f7d9ef0428872320b2471091c3a">¶</a></span><p>Changed the default ordering of “CREATE” and “DROP” statements indexes and
unique constraints within the autogenerate process, so that for example in
an upgrade() operation, a particular index or constraint that is to be
replaced such as for a casing convention change will not produce any naming
conflicts. For foreign key constraint objects, this is already how
constraints are ordered, and for table objects, users would normally want
to use <a class="reference internal" href="ops.html#alembic.operations.Operations.rename_table" title="alembic.operations.Operations.rename_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.rename_table()</span></code></a> in any case.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/786">#786</a></p>
</p>
</li>
<li><p class="caption" id="change-1.5.3-1"><span class="target" id="change-0d029290c3d54d679bd8acf357d8c847"><strong>[bug] [autogenerate] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0d029290c3d54d679bd8acf357d8c847">¶</a></span><p>Fixed assorted autogenerate issues with SQL Server:</p>
<ul>
<li><p>ignore default reflected identity on primary_key columns</p></li>
<li><p>improve server default comparison</p></li>
</ul>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/787">#787</a></p>
</p>
</li>
<li><p class="caption" id="change-1.5.3-2"><span class="target" id="change-4e7bc544d593811a9ff0eb1100ac2363"><strong>[bug] [autogenerate] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4e7bc544d593811a9ff0eb1100ac2363">¶</a></span><p>Fixed issue where autogenerate rendering of <code class="docutils literal notranslate"><span class="pre">op.alter_column()</span></code> would
fail to include MySQL <code class="docutils literal notranslate"><span class="pre">existing_nullable=False</span></code> if the column were part
of a primary key constraint within the table metadata.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/788">#788</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.5.2">
<h2 class="release-version">1.5.2<a class="headerlink" href="#change-1.5.2" title="Permalink to this headline">¶</a></h2>
Released: January 20, 2021<section id="change-1.5.2-bug">
<h3>bug<a class="headerlink" href="#change-1.5.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.2-0"><span class="target" id="change-d4f347fe7779ad66e512322716d739aa"><strong>[bug] [regression] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d4f347fe7779ad66e512322716d739aa">¶</a></span><p>Fixed regression where new “loop detection” feature introduced in
<a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/757">#757</a> produced false positives for revision names that have
overlapping substrings between revision number and down revision and/or
dependency, if the downrev/dependency were not in sequence form.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/784">#784</a></p>
</p>
</li>
<li><p class="caption" id="change-1.5.2-1"><span class="target" id="change-41a078b3d91d9e0470afd717871350f4"><strong>[bug] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-41a078b3d91d9e0470afd717871350f4">¶</a></span><p>Fixed regression where Alembic would fail to create a transaction properly
if the <a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/connections.html#sqlalchemy.engine.Connection" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection</span></code></a> were a so-called “branched”
connection, that is, one where the <code class="docutils literal notranslate"><span class="pre">.connect()</span></code> method had been called to
create a “sub” connection.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/782">#782</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.5.1">
<h2 class="release-version">1.5.1<a class="headerlink" href="#change-1.5.1" title="Permalink to this headline">¶</a></h2>
Released: January 19, 2021<section id="change-1.5.1-bug">
<h3>bug<a class="headerlink" href="#change-1.5.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.1-0"><span class="target" id="change-56a61d4a33c531f335cce4064e218519"><strong>[bug] [commands] [installation]</strong> <a class="changelog-reference headerlink reference internal" href="#change-56a61d4a33c531f335cce4064e218519">¶</a></span><p>Fixed installation issue where the “templates” directory was not being
installed, preventing commands like “list_templates” and “init” from
working.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/780">#780</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.5.0">
<h2 class="release-version">1.5.0<a class="headerlink" href="#change-1.5.0" title="Permalink to this headline">¶</a></h2>
Released: January 18, 2021<section id="change-1.5.0-changed">
<h3>changed<a class="headerlink" href="#change-1.5.0-changed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.0-0"><span class="target" id="change-3374635e9b84c495d2ede3c978cd57e6"><strong>[changed] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3374635e9b84c495d2ede3c978cd57e6">¶</a></span><p>To accommodate SQLAlchemy 1.4 and 2.0, the migration model now no longer
assumes that the SQLAlchemy Connection will autocommit an individual
operation.   This essentially means that for databases that use
non-transactional DDL (pysqlite current driver behavior, MySQL), there is
still a BEGIN/COMMIT block that will surround each individual migration.
Databases that support transactional DDL should continue to have the
same flow, either per migration or per-entire run, depending on the
value of the <code class="xref py py-paramref docutils literal notranslate"><span class="pre">Environment.configure.transaction_per_migration</span></code>
flag.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.5.0-1"><span class="target" id="change-01f097bfca587dea82644e36377e0ef4"><strong>[changed] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-01f097bfca587dea82644e36377e0ef4">¶</a></span><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">CommandError</span></code> is raised if a <code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Engine</span></code> is
passed to the <a class="reference internal" href="api/runtime.html#alembic.runtime.migration.MigrationContext.configure" title="alembic.runtime.migration.MigrationContext.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MigrationContext.configure()</span></code></a> method instead of a
<code class="docutils literal notranslate"><span class="pre">sqlalchemy.engine.Connection</span></code> object.  Previously, this would be a
warning only.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.5.0-2"><span class="target" id="change-0c3366b0144bbf2b7bc7ce6bd8c87d54"><strong>[changed]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0c3366b0144bbf2b7bc7ce6bd8c87d54">¶</a></span><p>Alembic 1.5.0 now supports <strong>Python 2.7 and Python 3.6 and above</strong>, as well
as <strong>SQLAlchemy 1.3.0 and above</strong>.  Support is removed for Python 3
versions prior to 3.6 and SQLAlchemy versions prior to the 1.3 series.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/748">#748</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.5.0-feature">
<h3>feature<a class="headerlink" href="#change-1.5.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.0-3"><span class="target" id="change-c5ca9e910eea4638a5a4fe29c206ca5b"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c5ca9e910eea4638a5a4fe29c206ca5b">¶</a></span><p>Added new hook <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_name" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_name</span></code></a>,
which complements the
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_object" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_object</span></code></a> hook by providing
a means of preventing objects of a certain name from being autogenerated
<strong>before</strong> the SQLAlchemy reflection process takes place, and notably
includes explicit support for passing each schema name when
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_schemas" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_schemas</span></code></a> is set to True.
This is most important especially for environments that make use of
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_schemas" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_schemas</span></code></a> where schemas are
actually databases (e.g. MySQL) in order to prevent reflection sweeps of
the entire server.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="autogenerate.html#autogenerate-include-hooks"><span class="std std-ref">Controlling What to be Autogenerated</span></a> - new documentation section</p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/650">#650</a></p>
</p>
</li>
<li><p class="caption" id="change-1.5.0-4"><span class="target" id="change-e4e6be991fe261906fc57b5a04298f2e"><strong>[feature] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e4e6be991fe261906fc57b5a04298f2e">¶</a></span><p>The revision tree is now checked for cycles and loops between revision
files when the revision environment is loaded up.  Scenarios such as a
revision pointing to itself, or a revision that can reach itself via a
loop, are handled and will raise the <a class="reference internal" href="api/script.html#alembic.script.revision.CycleDetected" title="alembic.script.revision.CycleDetected"><code class="xref py py-class docutils literal notranslate"><span class="pre">CycleDetected</span></code></a> exception when
the environment is loaded (expressed from the Alembic commandline as a
failure message and nonzero return code). Previously, these situations were
silently ignored up front, and the behavior of revision traversal would
either be silently incorrect, or would produce errors such as
<a class="reference internal" href="api/script.html#alembic.script.revision.RangeNotAncestorError" title="alembic.script.revision.RangeNotAncestorError"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeNotAncestorError</span></code></a>.  Pull request courtesy Koichiro Den.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/757">#757</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.5.0-usecase">
<h3>usecase<a class="headerlink" href="#change-1.5.0-usecase" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.0-5"><span class="target" id="change-324a2e1d42e3447b2503ef50723343f8"><strong>[usecase] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-324a2e1d42e3447b2503ef50723343f8">¶</a></span><p>Added support for rendering of “identity” elements on
<code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code> objects, supported in SQLAlchemy via
the <code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code> element introduced in version 1.4.</p>
<p>Adding columns with identity is supported on PostgreSQL,
MSSQL and Oracle. Changing the identity options or removing
it is supported only on PostgreSQL and Oracle.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/730">#730</a></p>
</p>
</li>
<li><p class="caption" id="change-1.5.0-6"><span class="target" id="change-c970ad2c8418202a5144d37bd0933b28"><strong>[usecase] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c970ad2c8418202a5144d37bd0933b28">¶</a></span><p>Add <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> file to alembic package to support invocation
with <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">alembic</span></code>.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-1.5.0-bug">
<h3>bug<a class="headerlink" href="#change-1.5.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.0-7"><span class="target" id="change-228be865488929f27fb625894c6731b3"><strong>[bug] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-228be865488929f27fb625894c6731b3">¶</a></span><p>Modified the <code class="docutils literal notranslate"><span class="pre">add_column()</span></code> operation such that the <code class="docutils literal notranslate"><span class="pre">Column</span></code> object in
use is shallow copied to a new instance if that <code class="docutils literal notranslate"><span class="pre">Column</span></code> is already
attached to a <code class="docutils literal notranslate"><span class="pre">table()</span></code> or <code class="docutils literal notranslate"><span class="pre">Table</span></code>. This accommodates for the change
made in SQLAlchemy issue #5618 which prohibits a <code class="docutils literal notranslate"><span class="pre">Column</span></code> from being
associated with multiple <code class="docutils literal notranslate"><span class="pre">table()</span></code> objects. This resumes support for
using a <code class="docutils literal notranslate"><span class="pre">Column</span></code> inside of an Alembic operation that already refers to a
parent <code class="docutils literal notranslate"><span class="pre">table()</span></code> or <code class="docutils literal notranslate"><span class="pre">Table</span></code> as well as allows operation objects just
autogenerated to work.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/753">#753</a></p>
</p>
</li>
<li><p class="caption" id="change-1.5.0-8"><span class="target" id="change-e735c912b790cf9ef0302150a8fb6472"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e735c912b790cf9ef0302150a8fb6472">¶</a></span><p>Added rendering for the <code class="docutils literal notranslate"><span class="pre">Table.prefixes</span></code> element to autogenerate so that
the rendered Python code includes these directives. Pull request courtesy
Rodrigo Ce Moretto.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/721">#721</a></p>
</p>
</li>
<li><p class="caption" id="change-1.5.0-9"><span class="target" id="change-850360ddfff0cd7864655cc469c6d72d"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-850360ddfff0cd7864655cc469c6d72d">¶</a></span><p>Added missing “create comment” feature for columns that are altered in
batch migrations.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/761">#761</a></p>
</p>
</li>
<li><p class="caption" id="change-1.5.0-10"><span class="target" id="change-4c95fd2f169f530e3f9cc215b79b60d7"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4c95fd2f169f530e3f9cc215b79b60d7">¶</a></span><p>Made an adjustment to the PostgreSQL dialect to allow it to work more
effectively in batch mode, where a datatype like Boolean or non-native Enum
that may have embedded rules to generate CHECK constraints will be more
correctly handled in that these constraints usually will not have been
generated on the PostgreSQL backend; previously it would inadvertently
assume they existed unconditionally in a special PG-only “drop constraint”
step.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/773">#773</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.5.0-removed">
<h3>removed<a class="headerlink" href="#change-1.5.0-removed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.5.0-11"><span class="target" id="change-2de04693424a87c6de2ae2a07354fcfd"><strong>[removed] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-2de04693424a87c6de2ae2a07354fcfd">¶</a></span><p>The long deprecated
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_symbol" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_symbol</span></code></a> hook is removed.
The  <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_object" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_object</span></code></a>
and  <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_name" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_name</span></code></a>
hooks both achieve the goals of this hook.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.5.0-12"><span class="target" id="change-93095ff6b22178fde8817162e6b46c20"><strong>[removed] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-93095ff6b22178fde8817162e6b46c20">¶</a></span><p>Removed deprecated <code class="docutils literal notranslate"><span class="pre">--head_only</span></code> option to the <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">current</span></code>
command</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.5.0-13"><span class="target" id="change-da0bea3199b905783ddbd0cde968beec"><strong>[removed] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-da0bea3199b905783ddbd0cde968beec">¶</a></span><p>Removed legacy parameter names from operations, these have been emitting
warnings since version 0.8.  In the case that legacy version files have not
yet been updated, these can be modified directly in order to maintain
compatibility:</p>
<ul>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.drop_constraint" title="alembic.operations.Operations.drop_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_constraint()</span></code></a> - “type” (use “<a href="#id3"><span class="problematic" id="id4">type_</span></a>”) and “name”
(use “constraint_name”)</p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_primary_key" title="alembic.operations.Operations.create_primary_key"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_primary_key()</span></code></a> - “cols” (use “columns”) and
“name” (use “constraint_name”)</p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_unique_constraint" title="alembic.operations.Operations.create_unique_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_unique_constraint()</span></code></a> - “name” (use
“constraint_name”), “source” (use “table_name”) and “local_cols” (use
“columns”)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.batch_create_unique_constraint()</span></code> - “name” (use
“constraint_name”)</p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_foreign_key" title="alembic.operations.Operations.create_foreign_key"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_foreign_key()</span></code></a> - “name” (use “constraint_name”),
“source” (use “source_table”), “referent” (use “referent_table”)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.batch_create_foreign_key()</span></code> - “name” (use
“constraint_name”), “referent” (use “referent_table”)</p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_check_constraint" title="alembic.operations.Operations.create_check_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_check_constraint()</span></code></a> - “name” (use
“constraint_name”), “source” (use “table_name”)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.batch_create_check_constraint()</span></code> - “name” (use
“constraint_name”)</p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_index" title="alembic.operations.Operations.create_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_index()</span></code></a> - “name” (use “index_name”)</p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.drop_index" title="alembic.operations.Operations.drop_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_index()</span></code></a> - “name” (use “index_name”), “tablename”
(use “table_name”)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.batch_drop_index()</span></code> - “name” (use “index_name”),</p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_table" title="alembic.operations.Operations.create_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_table()</span></code></a> - “name” (use “table_name”)</p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.drop_table" title="alembic.operations.Operations.drop_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_table()</span></code></a> - “name” (use “table_name”)</p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.alter_column" title="alembic.operations.Operations.alter_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.alter_column()</span></code></a> - “name” (use “new_column_name”)</p></li>
</ul>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.4.3">
<h2 class="release-version">1.4.3<a class="headerlink" href="#change-1.4.3" title="Permalink to this headline">¶</a></h2>
Released: September 11, 2020<section id="change-1.4.3-bug">
<h3>bug<a class="headerlink" href="#change-1.4.3-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.4.3-0"><span class="target" id="change-432d990d66772e621d352b0fa29f99fb"><strong>[bug] [batch] [sqlite]</strong> <a class="changelog-reference headerlink reference internal" href="#change-432d990d66772e621d352b0fa29f99fb">¶</a></span><p>Added support to drop named CHECK constraints that are specified as part of
a column, rather than table wide.  Previously, only constraints associated
with the table were considered.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/711">#711</a></p>
</p>
</li>
<li><p class="caption" id="change-1.4.3-1"><span class="target" id="change-880f0d40459cd59e79909886062f696d"><strong>[bug] [mysql] [ops]</strong> <a class="changelog-reference headerlink reference internal" href="#change-880f0d40459cd59e79909886062f696d">¶</a></span><p>Fixed issue where the MySQL dialect would not correctly render the server
default of a column in an alter operation, if the operation were
programmatically generated from an autogenerate pass as it would not
accommodate for the full structure of the DefaultClause construct.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/736">#736</a></p>
</p>
</li>
<li><p class="caption" id="change-1.4.3-2"><span class="target" id="change-1c36497faa59256dc38307d22976bd83"><strong>[bug] [batch] [sqlite]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1c36497faa59256dc38307d22976bd83">¶</a></span><p>Fixed issue where the CAST applied to a JSON column when copying a SQLite
table during batch mode would cause the data to be lost, as SQLite’s CAST
with JSON appears to convert the data to the value “0”. The CAST is now
skipped in a dialect-specific manner, including for JSON columns on SQLite.
Pull request courtesy Sebastián Ramírez.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/697">#697</a></p>
</p>
</li>
<li><p class="caption" id="change-1.4.3-3"><span class="target" id="change-99433f817a2e4729f3a643aa7e086f96"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-99433f817a2e4729f3a643aa7e086f96">¶</a></span><p>The <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">current</span></code> command no longer creates an <code class="docutils literal notranslate"><span class="pre">alembic_version</span></code>
table in the database if one does not exist already, returning no version
as the current version. This allows checking for migrations in parallel
without introducing race conditions.  Pull request courtesy Nikolay
Edigaryev.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/694">#694</a></p>
</p>
</li>
<li><p class="caption" id="change-1.4.3-4"><span class="target" id="change-4ec5c6aaf4d82da59db8ed28cb199981"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4ec5c6aaf4d82da59db8ed28cb199981">¶</a></span><p>Fixed issue where columns in a foreign-key referenced table would be
replaced with null-type columns during a batch operation; while this did
not generally have any side effects, it could theoretically impact a batch
operation that also targets that table directly and also would interfere
with future changes to the <code class="docutils literal notranslate"><span class="pre">.append_column()</span></code> method to disallow implicit
replacement of columns.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.4.3-5"><span class="target" id="change-c3b303330c8c2c97092976df0cd0f37a"><strong>[bug] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c3b303330c8c2c97092976df0cd0f37a">¶</a></span><p>Fixed issue where the <code class="docutils literal notranslate"><span class="pre">mssql_drop_foreign_key=True</span></code> flag on
<code class="docutils literal notranslate"><span class="pre">op.drop_column</span></code> would lead to incorrect syntax error due to a typo in the
SQL emitted, same typo was present in the test as well so it was not
detected. Pull request courtesy Oleg Shigorin.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/716">#716</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.4.2">
<h2 class="release-version">1.4.2<a class="headerlink" href="#change-1.4.2" title="Permalink to this headline">¶</a></h2>
Released: March 19, 2020<section id="change-1.4.2-usecase">
<h3>usecase<a class="headerlink" href="#change-1.4.2-usecase" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.4.2-0"><span class="target" id="change-9183ea20653eaf8c37a3c2d981549474"><strong>[usecase] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9183ea20653eaf8c37a3c2d981549474">¶</a></span><p>Adjusted autogen comparison to accommodate for backends that support
computed column reflection, dependent on SQLAlchemy version 1.3.16 or
higher. This emits a warning if the SQL expression inside of a
<code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code> value changes between the metadata and the database, as
these expressions can’t be changed without dropping and recreating the
column.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/669">#669</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.4.2-bug">
<h3>bug<a class="headerlink" href="#change-1.4.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.4.2-1"><span class="target" id="change-e1bdda49e6e7ac416a4cee09ad5544b7"><strong>[bug] [tests]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e1bdda49e6e7ac416a4cee09ad5544b7">¶</a></span><p>Fixed an issue that prevented the test suite from running with the
recently released py.test 5.4.0.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/668">#668</a></p>
</p>
</li>
<li><p class="caption" id="change-1.4.2-2"><span class="target" id="change-ad059de073a163513406a3c91ac37e72"><strong>[bug] [autogenerate] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ad059de073a163513406a3c91ac37e72">¶</a></span><p>Fixed more false-positive failures produced by the new “compare type” logic
first added in <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/605">#605</a>, particularly impacting MySQL string types
regarding flags such as “charset” and “collation”.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/671">#671</a></p>
</p>
</li>
<li><p class="caption" id="change-1.4.2-3"><span class="target" id="change-2ea9817616906082d5d1b92da0d49a4b"><strong>[bug] [op directives] [oracle]</strong> <a class="changelog-reference headerlink reference internal" href="#change-2ea9817616906082d5d1b92da0d49a4b">¶</a></span><p>Fixed issue in Oracle backend where a table RENAME with a schema-qualified
name would include the schema in the “to” portion, which is rejected by
Oracle.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/670">#670</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.4.1">
<h2 class="release-version">1.4.1<a class="headerlink" href="#change-1.4.1" title="Permalink to this headline">¶</a></h2>
Released: March 1, 2020<section id="change-1.4.1-bug">
<h3>bug<a class="headerlink" href="#change-1.4.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.4.1-0"><span class="target" id="change-956d497f9c9a257e481e4633c510125d"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-956d497f9c9a257e481e4633c510125d">¶</a></span><p>Fixed regression caused by the new “type comparison” logic introduced in
1.4 as part of <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/605">#605</a> where comparisons of MySQL “unsigned integer”
datatypes would produce false positives, as the regular expression logic
was not correctly parsing the “unsigned” token when MySQL’s default display
width would be returned by the database.  Pull request courtesy Paul
Becotte.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/661">#661</a></p>
</p>
</li>
<li><p class="caption" id="change-1.4.1-1"><span class="target" id="change-a0b73b7ec633b50d6d7d52d4d9513376"><strong>[bug] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a0b73b7ec633b50d6d7d52d4d9513376">¶</a></span><p>Error message for “path doesn’t exist” when loading up script environment
now displays the absolute path.  Pull request courtesy Rowan Hart.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/663">#663</a></p>
</p>
</li>
<li><p class="caption" id="change-1.4.1-2"><span class="target" id="change-0ac5bf0640ef7d217a4187b3a6e1fc7a"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0ac5bf0640ef7d217a4187b3a6e1fc7a">¶</a></span><p>Fixed regression in 1.4.0 due to <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/647">#647</a> where unique constraint
comparison with mixed case constraint names while not using a naming
convention would produce false positives during autogenerate.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/654">#654</a></p>
</p>
</li>
<li><p class="caption" id="change-1.4.1-3"><span class="target" id="change-fac21e2d0fdd98dc56ba97bc37bf1570"><strong>[bug] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-fac21e2d0fdd98dc56ba97bc37bf1570">¶</a></span><p>The check for matched rowcount when the alembic_version table is updated or
deleted from is now conditional based on whether or not the dialect
supports the concept of “rowcount” for UPDATE or DELETE rows matched.  Some
third party dialects do not support this concept.  Pull request courtesy Ke
Zhu.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.4.1-4"><span class="target" id="change-c9f46ccd03bb330c6dd5ad2a9b50f85e"><strong>[bug] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c9f46ccd03bb330c6dd5ad2a9b50f85e">¶</a></span><p>Fixed long-standing bug where an inline column CHECK constraint would not
be rendered within an “ADD COLUMN” operation.  The DDL compiler is now
consulted for inline constraints within the <a class="reference internal" href="ops.html#alembic.operations.Operations.add_column" title="alembic.operations.Operations.add_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.add_column()</span></code></a>
method as is done for regular CREATE TABLE operations.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/655">#655</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.4.0">
<h2 class="release-version">1.4.0<a class="headerlink" href="#change-1.4.0" title="Permalink to this headline">¶</a></h2>
Released: February 4, 2020<section id="change-1.4.0-feature">
<h3>feature<a class="headerlink" href="#change-1.4.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.4.0-0"><span class="target" id="change-64d5aba2981e95f267097f1bb677f1d1"><strong>[feature] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-64d5aba2981e95f267097f1bb677f1d1">¶</a></span><p>Added new parameters <a class="reference internal" href="ops.html#alembic.operations.BatchOperations.add_column.params.insert_before" title="alembic.operations.BatchOperations.add_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">BatchOperations.add_column.insert_before</span></code></a>,
<a class="reference internal" href="ops.html#alembic.operations.BatchOperations.add_column.params.insert_after" title="alembic.operations.BatchOperations.add_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">BatchOperations.add_column.insert_after</span></code></a> which provide for
establishing the specific position in which a new column should be placed.
Also added <a class="reference internal" href="ops.html#alembic.operations.Operations.batch_alter_table.params.partial_reordering" title="alembic.operations.Operations.batch_alter_table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Operations.batch_alter_table.partial_reordering</span></code></a>
which allows the complete set of columns to be reordered when the new table
is created.   Both operations apply only to when batch mode is recreating
the whole table using <code class="docutils literal notranslate"><span class="pre">recreate=&quot;always&quot;</span></code>.  Thanks to Marcin Szymanski
for assistance with the implementation.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/640">#640</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.4.0-usecase">
<h3>usecase<a class="headerlink" href="#change-1.4.0-usecase" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.4.0-1"><span class="target" id="change-693f05b2d4c7240cdbac7f8afb195fb1"><strong>[usecase] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-693f05b2d4c7240cdbac7f8afb195fb1">¶</a></span><p>Moved the use of the <code class="docutils literal notranslate"><span class="pre">__file__</span></code> attribute at the base of the Alembic
package into the one place that it is specifically needed, which is when
the config attempts to locate the template directory. This helps to allow
Alembic to be fully importable in environments that are using Python
memory-only import schemes.  Pull request courtesy layday.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/648">#648</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.4.0-bug">
<h3>bug<a class="headerlink" href="#change-1.4.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.4.0-2"><span class="target" id="change-1bdad220c5f2c1a7ef2bb06c3561d31e"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1bdad220c5f2c1a7ef2bb06c3561d31e">¶</a></span><p>Adjusted the unique constraint comparison logic in a similar manner as that
of <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/421">#421</a> did for indexes in order to take into account SQLAlchemy’s
own truncation of long constraint names when a naming convention is in use.
Without this step, a name that is truncated by SQLAlchemy based on a unique
constraint naming convention or hardcoded name will not compare properly.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/647">#647</a></p>
</p>
</li>
<li><p class="caption" id="change-1.4.0-3"><span class="target" id="change-7cfbe8a9767a0932271f65cdc9f660b2"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-7cfbe8a9767a0932271f65cdc9f660b2">¶</a></span><p>A major rework of the “type comparison” logic is in place which changes the
entire approach by which column datatypes are compared.  Types are now
compared based on the DDL string generated by the metadata type vs. the
datatype reflected from the database.  This means we compare types based on
what would actually render and additionally if elements of the types change
like string length, those changes are detected as well.  False positives
like those generated between SQLAlchemy Boolean and MySQL TINYINT should
also be resolved.   Thanks very much to Paul Becotte  for lots of hard work
and patience on this one.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="autogenerate.html#autogenerate-detects"><span class="std std-ref">What does Autogenerate Detect (and what does it not detect?)</span></a> - updated comments on type comparison</p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/605">#605</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.4.0-misc">
<h3>misc<a class="headerlink" href="#change-1.4.0-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.4.0-4"><span class="target" id="change-8cacf979eab80a4b30964f404a6a8b24"><strong>[change]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8cacf979eab80a4b30964f404a6a8b24">¶</a></span><p>The internal inspection routines no longer use SQLAlchemy’s
<code class="docutils literal notranslate"><span class="pre">Inspector.from_engine()</span></code> method, which is expected to be deprecated in
1.4.  The <code class="docutils literal notranslate"><span class="pre">inspect()</span></code> function is now used.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.3.3">
<h2 class="release-version">1.3.3<a class="headerlink" href="#change-1.3.3" title="Permalink to this headline">¶</a></h2>
Released: January 22, 2020<section id="change-1.3.3-usecase">
<h3>usecase<a class="headerlink" href="#change-1.3.3-usecase" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.3.3-0"><span class="target" id="change-660cfa2d7a64a05e454a29c51ba217e1"><strong>[usecase] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-660cfa2d7a64a05e454a29c51ba217e1">¶</a></span><p>Added support for rendering of “computed” elements on <code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code>
objects, supported in SQLAlchemy via the new <code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code> element
introduced in version 1.3.11. Pull request courtesy Federico Caselli.</p>
<p>Note that there is currently no support for ALTER COLUMN to add, remove, or
modify the “GENERATED ALWAYS AS” element from a column;  at least for
PostgreSQL, it does not seem to be supported by the database. Additionally,
SQLAlchemy does not currently reliably reflect the “GENERATED ALWAYS AS”
phrase from an existing column, so there is also no autogenerate support
for addition or removal of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code> element to or from an
existing column, there is only support for adding new columns that include
the <code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code> element.  In the case that the <code class="xref py py-class docutils literal notranslate"><span class="pre">Computed</span></code>
element is removed from the <code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code> object in the table metadata,
PostgreSQL and Oracle currently reflect the “GENERATED ALWAYS AS”
expression as the “server default” which will produce an op that tries to
drop the element as a default.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/624">#624</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.3.3-bug">
<h3>bug<a class="headerlink" href="#change-1.3.3-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.3.3-1"><span class="target" id="change-bb158722383a3258e297e6b071634742"><strong>[bug] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-bb158722383a3258e297e6b071634742">¶</a></span><p>Fixed issue where COMMENT directives for PostgreSQL failed to correctly
include an explicit schema name, as well as correct quoting rules for
schema, table, and column names.  Pull request courtesy Matthew Sills.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/637">#637</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.3.2">
<h2 class="release-version">1.3.2<a class="headerlink" href="#change-1.3.2" title="Permalink to this headline">¶</a></h2>
Released: December 16, 2019<section id="change-1.3.2-bug">
<h3>bug<a class="headerlink" href="#change-1.3.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.3.2-0"><span class="target" id="change-9ed296b49d8d7a94654fab451800d179"><strong>[bug] [api] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9ed296b49d8d7a94654fab451800d179">¶</a></span><p>Fixed regression introduced by <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/579">#579</a> where server default rendering
functions began to require a dialect implementation, however the
<a class="reference internal" href="api/autogenerate.html#alembic.autogenerate.render_python_code" title="alembic.autogenerate.render_python_code"><code class="xref py py-func docutils literal notranslate"><span class="pre">render_python_code()</span></code></a> convenience function did not include one, thus
causing the function to fail when used in a server default context.  The
function now accepts a migration context argument and also creates one
against the default dialect if one is not provided.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/635">#635</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.3.1">
<h2 class="release-version">1.3.1<a class="headerlink" href="#change-1.3.1" title="Permalink to this headline">¶</a></h2>
Released: November 13, 2019<section id="change-1.3.1-bug">
<h3>bug<a class="headerlink" href="#change-1.3.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.3.1-0"><span class="target" id="change-07462670db083af8f68adf7a8925b816"><strong>[bug] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-07462670db083af8f68adf7a8925b816">¶</a></span><p>Fixed bug in MSSQL dialect where the drop constraint execution steps used
to remove server default or implicit foreign key constraint failed to take
into account the schema name of the target table.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/621">#621</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.3.0">
<h2 class="release-version">1.3.0<a class="headerlink" href="#change-1.3.0" title="Permalink to this headline">¶</a></h2>
Released: October 31, 2019<section id="change-1.3.0-feature">
<h3>feature<a class="headerlink" href="#change-1.3.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.3.0-0"><span class="target" id="change-d1b5c470caa17c4766f9872ac2c766f0"><strong>[feature] [command]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d1b5c470caa17c4766f9872ac2c766f0">¶</a></span><p>Added support for ALEMBIC_CONFIG environment variable,
refers to the location of the alembic configuration script
in lieu of using the -c command line option.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/608">#608</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.3.0-bug">
<h3>bug<a class="headerlink" href="#change-1.3.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.3.0-1"><span class="target" id="change-6587c41cc78ea822910c1271460394c4"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6587c41cc78ea822910c1271460394c4">¶</a></span><p>Fixed bug in new Variant autogenerate where the order of the arguments to
Variant were mistakenly reversed.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/131">#131</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.3.0-misc">
<h3>misc<a class="headerlink" href="#change-1.3.0-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.3.0-2"><span class="target" id="change-ed34c592bd113606f6db4e244899c6c0"><strong>[change] [compatibility]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ed34c592bd113606f6db4e244899c6c0">¶</a></span><p>Some internal modifications have been made to how the names of indexes and
unique constraints work to make use of new functions added in SQLAlchemy
1.4, so that SQLAlchemy has more flexibility over how naming conventions
may be applied to these objects.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.2.1">
<h2 class="release-version">1.2.1<a class="headerlink" href="#change-1.2.1" title="Permalink to this headline">¶</a></h2>
Released: September 24, 2019<section id="change-1.2.1-bug">
<h3>bug<a class="headerlink" href="#change-1.2.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.2.1-0"><span class="target" id="change-1bf97742a3a56e7e87bed6b34aa2bb31"><strong>[bug] [command]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1bf97742a3a56e7e87bed6b34aa2bb31">¶</a></span><p>Reverted the name change of the “revisions” argument to
<a class="reference internal" href="api/commands.html#alembic.command.stamp" title="alembic.command.stamp"><code class="xref py py-func docutils literal notranslate"><span class="pre">command.stamp()</span></code></a> to “revision” as apparently applications are
calling upon this argument as a keyword name.  Pull request courtesy
Thomas Bechtold.  Special translations are also added to the command
line interface so that it is still known as “revisions” in the CLI.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/601">#601</a></p>
</p>
</li>
<li><p class="caption" id="change-1.2.1-1"><span class="target" id="change-022c3a073cef6b33ae8597366c0226f2"><strong>[bug] [tests]</strong> <a class="changelog-reference headerlink reference internal" href="#change-022c3a073cef6b33ae8597366c0226f2">¶</a></span><p>Removed the “test requirements” from “setup.py test”, as this command now
only emits a removal error in any case and these requirements are unused.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/592">#592</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.2.0">
<h2 class="release-version">1.2.0<a class="headerlink" href="#change-1.2.0" title="Permalink to this headline">¶</a></h2>
Released: September 20, 2019<section id="change-1.2.0-feature">
<h3>feature<a class="headerlink" href="#change-1.2.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.2.0-0"><span class="target" id="change-8538fa1ffd12bec39f93e02ea5e94a21"><strong>[feature] [command]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8538fa1ffd12bec39f93e02ea5e94a21">¶</a></span><p>Added new <code class="docutils literal notranslate"><span class="pre">--purge</span></code> flag to the <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">stamp</span></code> command, which will
unconditionally erase the version table before stamping anything.  This is
useful for development where non-existent version identifiers might be left
within the table.  Additionally, <code class="docutils literal notranslate"><span class="pre">alembic.stamp</span></code> now supports a list of
revision identifiers, which are intended to allow setting up muliple heads
at once.  Overall handling of version identifiers within the
<code class="docutils literal notranslate"><span class="pre">alembic.stamp</span></code> command has been improved with many new tests and
use cases added.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/473">#473</a></p>
</p>
</li>
<li><p class="caption" id="change-1.2.0-1"><span class="target" id="change-c94ed4b60a007b627b7e277e19a05333"><strong>[feature] [runtime]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c94ed4b60a007b627b7e277e19a05333">¶</a></span><p>Added new feature <a class="reference internal" href="api/runtime.html#alembic.runtime.migration.MigrationContext.autocommit_block" title="alembic.runtime.migration.MigrationContext.autocommit_block"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MigrationContext.autocommit_block()</span></code></a>, a special
directive which will provide for a non-transactional block inside of a
migration script. The feature requires that: the database driver
(e.g. DBAPI) supports the AUTOCOMMIT isolation mode.  The directive
also necessarily needs to COMMIT the existing transaction in progress
in order to enter autocommit mode.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="api/runtime.html#alembic.runtime.migration.MigrationContext.autocommit_block" title="alembic.runtime.migration.MigrationContext.autocommit_block"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MigrationContext.autocommit_block()</span></code></a></p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/123">#123</a></p>
</p>
</li>
<li><p class="caption" id="change-1.2.0-2"><span class="target" id="change-dcf23b8701bdbb3b709bd3b47b710c46"><strong>[feature] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-dcf23b8701bdbb3b709bd3b47b710c46">¶</a></span><p>Added “post write hooks” to revision generation.  These allow custom logic
to run after a revision Python script is generated, typically for the
purpose of running code formatters such as “Black” or “autopep8”, but may
be used for any arbitrary post-render hook as well, including custom Python
functions or scripts.  The hooks are enabled by providing a
<code class="docutils literal notranslate"><span class="pre">[post_write_hooks]</span></code> section in the alembic.ini file.  A single hook
is provided which runs an arbitrary Python executable on the newly
generated revision script, which can be configured to run code formatters
such as Black; full examples are included in the documentation.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="autogenerate.html#post-write-hooks"><span class="std std-ref">Applying Post Processing and Python Code Formatters to Generated Revisions</span></a></p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/307">#307</a></p>
</p>
</li>
<li><p class="caption" id="change-1.2.0-3"><span class="target" id="change-d2dccf13aac97d57442ac9e3a0e3f2d2"><strong>[feature] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d2dccf13aac97d57442ac9e3a0e3f2d2">¶</a></span><p>Added new flag <code class="docutils literal notranslate"><span class="pre">--package</span></code> to <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">init</span></code>.  For environments where
the Alembic migration files and such are within the package tree and
importable as modules, this flag can be specified which will add the
additional <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files in the version location and the
environment location.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/463">#463</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.2.0-usecase">
<h3>usecase<a class="headerlink" href="#change-1.2.0-usecase" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.2.0-4"><span class="target" id="change-09b01402fc8b1929002e2dddff89dbe7"><strong>[usecase] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-09b01402fc8b1929002e2dddff89dbe7">¶</a></span><p>Added autogenerate support for <code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code> objects that have
dialect-specific <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>, support first added in SQLAlchemy 1.3.
This includes SQLite “on conflict” as well as options used by some
third party dialects.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/518">#518</a></p>
</p>
</li>
<li><p class="caption" id="change-1.2.0-5"><span class="target" id="change-169e490081be73389a939beee79bd821"><strong>[usecase] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-169e490081be73389a939beee79bd821">¶</a></span><p>Added rendering for SQLAlchemy <code class="docutils literal notranslate"><span class="pre">Variant</span></code> datatypes, which render as the
base type plus one or more <code class="docutils literal notranslate"><span class="pre">.with_variant()</span></code> method calls.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/131">#131</a></p>
</p>
</li>
<li><p class="caption" id="change-1.2.0-6"><span class="target" id="change-5cd45d2c9773ea4754b3db179b982284"><strong>[usecase] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5cd45d2c9773ea4754b3db179b982284">¶</a></span><blockquote>
<div><p>Made the command interface revision lookup behavior more strict in that an
Alembic revision number is only resolved based on a partial match rules if
it has at least four characters, to prevent simple typographical issues
from inadvertently  running migrations.</p>
</div></blockquote>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/534">#534</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.2.0-bug">
<h3>bug<a class="headerlink" href="#change-1.2.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.2.0-7"><span class="target" id="change-90d758328f40637bd3d5b2ae2c6a5393"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-90d758328f40637bd3d5b2ae2c6a5393">¶</a></span><p>Improved the Python rendering of a series of migration operations such that
a single “pass” is rendered for a <a class="reference internal" href="api/operations.html#alembic.operations.ops.UpgradeOps" title="alembic.operations.ops.UpgradeOps"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpgradeOps</span></code></a> or
<a class="reference internal" href="api/operations.html#alembic.operations.ops.DowngradeOps" title="alembic.operations.ops.DowngradeOps"><code class="xref py py-class docutils literal notranslate"><span class="pre">DowngradeOps</span></code></a> based on if no lines of Python code actually
rendered under the operation, rather than whether or not sub-directives
exist. Removed extra “pass” lines that would generate from the
<a class="reference internal" href="api/operations.html#alembic.operations.ops.ModifyTableOps" title="alembic.operations.ops.ModifyTableOps"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModifyTableOps</span></code></a> directive so that these aren’t duplicated under
operation rewriting scenarios.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/550">#550</a></p>
</p>
</li>
<li><p class="caption" id="change-1.2.0-8"><span class="target" id="change-55e2ef07ad5138bde37f2d7d971833b0"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-55e2ef07ad5138bde37f2d7d971833b0">¶</a></span><p>Fixed bug where rendering of comment text for table-level comments  within
<a class="reference internal" href="ops.html#alembic.operations.Operations.create_table_comment" title="alembic.operations.Operations.create_table_comment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_table_comment()</span></code></a> and
<a class="reference internal" href="ops.html#alembic.operations.Operations.drop_table_comment" title="alembic.operations.Operations.drop_table_comment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_table_comment()</span></code></a> was not properly quote-escaped
within rendered Python code for autogenerate.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/549">#549</a></p>
</p>
</li>
<li><p class="caption" id="change-1.2.0-9"><span class="target" id="change-286d95ff087b13e0b1fe6614d75ca0d5"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-286d95ff087b13e0b1fe6614d75ca0d5">¶</a></span><p>Modified the logic of the <a class="reference internal" href="api/autogenerate.html#alembic.autogenerate.rewriter.Rewriter" title="alembic.autogenerate.rewriter.Rewriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rewriter</span></code></a> object such that it keeps a
memoization of which directives it has processed, so that it can ensure it
processes a particular directive only once, and additionally fixed
<a class="reference internal" href="api/autogenerate.html#alembic.autogenerate.rewriter.Rewriter" title="alembic.autogenerate.rewriter.Rewriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rewriter</span></code></a> so that it functions correctly for multiple-pass
autogenerate schemes, such as the one illustrated in the “multidb”
template.  By tracking which directives have been processed, a
multiple-pass scheme which calls upon the <a class="reference internal" href="api/autogenerate.html#alembic.autogenerate.rewriter.Rewriter" title="alembic.autogenerate.rewriter.Rewriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Rewriter</span></code></a> multiple times
for the same structure as elements are added can work without running
duplicate operations on the same elements more than once.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/505">#505</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.2.0-misc">
<h3>misc<a class="headerlink" href="#change-1.2.0-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.2.0-10"><span class="target" id="change-6215c83f022026076100bdd5787ac8d1"><strong>[change: py3k]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6215c83f022026076100bdd5787ac8d1">¶</a></span><p>Python 3.4 support is dropped, as the upstream tooling (pip, mysqlclient)
etc are already dropping support for Python 3.4, which itself is no longer
maintained.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.1.0">
<h2 class="release-version">1.1.0<a class="headerlink" href="#change-1.1.0" title="Permalink to this headline">¶</a></h2>
Released: August 26, 2019<section id="change-1.1.0-usecase">
<h3>usecase<a class="headerlink" href="#change-1.1.0-usecase" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.1.0-0"><span class="target" id="change-9561183cf4b993713bcc457caf157eeb"><strong>[usecase] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9561183cf4b993713bcc457caf157eeb">¶</a></span><p>The “alembic init” command will now proceed if the target directory exists
as long as it’s still empty.  Previously, it would not proceed if the
directory existed. The new behavior is modeled from what git does, to
accommodate for container or other deployments where an Alembic target
directory may need to be already mounted instead of being created with
alembic init.  Pull request courtesy Aviskar KC.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/571">#571</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.1.0-bug">
<h3>bug<a class="headerlink" href="#change-1.1.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.1.0-1"><span class="target" id="change-367d37040c16861d92549fc6840b1b90"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-367d37040c16861d92549fc6840b1b90">¶</a></span><p>Fixed bug where the double-percent logic applied to some dialects such as
psycopg2 would be rendered in <code class="docutils literal notranslate"><span class="pre">--sql</span></code> mode, by allowing dialect options
to be passed through to the dialect used to generate SQL and then providing
<code class="docutils literal notranslate"><span class="pre">paramstyle=&quot;named&quot;</span></code> so that percent signs need not be doubled.   For
users having this issue, existing env.py scripts need to add
<code class="docutils literal notranslate"><span class="pre">dialect_opts={&quot;paramstyle&quot;:</span> <span class="pre">&quot;named&quot;}</span></code> to their offline
context.configure().  See the <code class="docutils literal notranslate"><span class="pre">alembic/templates/generic/env.py</span></code> template
for an example.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/562">#562</a></p>
</p>
</li>
<li><p class="caption" id="change-1.1.0-2"><span class="target" id="change-5681bfa8b70eb750d3060b4541fa1662"><strong>[bug] [py3k]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5681bfa8b70eb750d3060b4541fa1662">¶</a></span><p>Fixed use of the deprecated “imp” module, which is used to detect  pep3147
availability as well as to locate .pyc files, which started  emitting
deprecation warnings during the test suite.   The warnings were not being
emitted earlier during the test suite, the change is possibly due to
changes in py.test itself but this is not clear. The check for pep3147 is
set to True for any Python version 3.5 or greater now and importlib is used
when available.  Note that some dependencies such as distutils may still be
emitting this warning. Tests are adjusted to accommodate for dependencies
that emit the warning as well.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.1.0-3"><span class="target" id="change-95b1d95ae28343d7fc9a269ffe68c450"><strong>[bug] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-95b1d95ae28343d7fc9a269ffe68c450">¶</a></span><p>Fixed issue where emitting a change of column name for MySQL did not
preserve the column comment, even if it were specified as existing_comment.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/594">#594</a></p>
</p>
</li>
<li><p class="caption" id="change-1.1.0-4"><span class="target" id="change-32be580287d30b2fa09e8f3df3343de9"><strong>[bug] [setup]</strong> <a class="changelog-reference headerlink reference internal" href="#change-32be580287d30b2fa09e8f3df3343de9">¶</a></span><p>Removed the “python setup.py test” feature in favor of a straight run of
“tox”.   Per Pypa / pytest developers, “setup.py” commands are in general
headed towards deprecation in favor of tox.  The tox.ini script has been
updated such that running “tox” with no arguments will perform a single run
of the test suite against the default installed Python interpreter.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://github.com/pypa/setuptools/issues/1684">https://github.com/pypa/setuptools/issues/1684</a></p>
<p><a class="reference external" href="https://github.com/pytest-dev/pytest/issues/5534">https://github.com/pytest-dev/pytest/issues/5534</a></p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/592">#592</a></p>
</p>
</li>
</ul>
</section>
<section id="change-1.1.0-misc">
<h3>misc<a class="headerlink" href="#change-1.1.0-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.1.0-5"><span class="target" id="change-0b37374a3ad4a57dda8cb895a16baa0d"><strong>[change]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0b37374a3ad4a57dda8cb895a16baa0d">¶</a></span><p>Alembic 1.1 bumps the minimum version of SQLAlchemy to 1.1.   As was the
case before, Python requirements remain at Python 2.7, or in the 3.x series
Python 3.4.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.1.0-6"><span class="target" id="change-38d4249a25f35c67e7c664a4dcb27939"><strong>[change] [internals]</strong> <a class="changelog-reference headerlink reference internal" href="#change-38d4249a25f35c67e7c664a4dcb27939">¶</a></span><p>The test suite for Alembic now makes use of SQLAlchemy’s testing framework
directly.  Previously, Alembic had its own version of this framework that
was mostly copied from that of SQLAlchemy to enable testing with older
SQLAlchemy versions.  The majority of this code is now removed so that both
projects can leverage improvements from a common testing framework.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.0.11">
<h2 class="release-version">1.0.11<a class="headerlink" href="#change-1.0.11" title="Permalink to this headline">¶</a></h2>
Released: June 25, 2019<section id="change-1.0.11-bug">
<h3>bug<a class="headerlink" href="#change-1.0.11-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.11-0"><span class="target" id="change-36b7c608cfdcfd7f709bf150428b37d1"><strong>[bug] [autogenerate] [batch] [sqlite]</strong> <a class="changelog-reference headerlink reference internal" href="#change-36b7c608cfdcfd7f709bf150428b37d1">¶</a></span><p>SQLite server default reflection will ensure parenthesis are surrounding a
column default expression that is detected as being a non-constant
expression, such as a <code class="docutils literal notranslate"><span class="pre">datetime()</span></code> default, to accommodate for the
requirement that SQL expressions have to be parenthesized when being sent
as DDL.  Parenthesis are not added to constant expressions to allow for
maximum cross-compatibility with other dialects and existing test suites
(such as Alembic’s), which necessarily entails scanning the expression to
eliminate for constant numeric and string values. The logic is added to the
two “reflection-&gt;DDL round trip” paths which are currently autogenerate and
batch migration.  Within autogenerate, the logic is on the rendering side,
whereas in batch the logic is installed as a column reflection hook.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/579">#579</a></p>
</p>
</li>
<li><p class="caption" id="change-1.0.11-1"><span class="target" id="change-58ff4897116ac7709c19c597c3141787"><strong>[bug] [autogenerate] [sqlite]</strong> <a class="changelog-reference headerlink reference internal" href="#change-58ff4897116ac7709c19c597c3141787">¶</a></span><p>Improved SQLite server default comparison to accommodate for a <code class="docutils literal notranslate"><span class="pre">text()</span></code>
construct that added parenthesis directly vs. a construct that relied
upon the SQLAlchemy SQLite dialect to render the parenthesis, as well
as improved support for various forms of constant expressions such as
values that are quoted vs. non-quoted.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/579">#579</a></p>
</p>
</li>
<li><p class="caption" id="change-1.0.11-2"><span class="target" id="change-b7dfcb026036b3a47d8cfd92eff5bc09"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-b7dfcb026036b3a47d8cfd92eff5bc09">¶</a></span><p>Fixed bug where the “literal_binds” flag was not being set when
autogenerate would create a server default value, meaning server default
comparisons would fail for functions that contained literal values.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.0.11-3"><span class="target" id="change-a281786852cbc8e2f6cccfd7244650ee"><strong>[bug] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a281786852cbc8e2f6cccfd7244650ee">¶</a></span><p>Added support for MySQL “DROP CHECK”, which is added as of MySQL 8.0.16,
separate from MariaDB’s “DROP CONSTRAINT” for CHECK constraints.  The MySQL
Alembic implementation now checks for “MariaDB” in server_version_info to
decide which one to use.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/554">#554</a></p>
</p>
</li>
<li><p class="caption" id="change-1.0.11-4"><span class="target" id="change-e546b3d1c2246d1513b80bd7646b83e8"><strong>[bug] [mysql] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e546b3d1c2246d1513b80bd7646b83e8">¶</a></span><p>Fixed issue where MySQL databases need to use CHANGE COLUMN when altering a
server default of CURRENT_TIMESTAMP, NOW() and probably other functions
that are only usable with DATETIME/TIMESTAMP columns.  While MariaDB
supports both CHANGE and ALTER COLUMN in this case, MySQL databases only
support CHANGE.  So the new logic is that if the server default change is
against a DateTime-oriented column, the CHANGE format is used
unconditionally, as in the vast majority of cases the server default is to
be CURRENT_TIMESTAMP which may also be potentially bundled with an “ON
UPDATE CURRENT_TIMESTAMP” directive, which SQLAlchemy does not currently
support as a distinct field.  The fix addiionally improves the server
default comparison logic when the “ON UPDATE” clause is present and
there are parenthesis to be adjusted for as is the case on some MariaDB
versions.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/564">#564</a></p>
</p>
</li>
<li><p class="caption" id="change-1.0.11-5"><span class="target" id="change-b118973e6ef15e95532f5fd2647592d4"><strong>[bug] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-b118973e6ef15e95532f5fd2647592d4">¶</a></span><p>Warnings emitted by Alembic now include a default stack level of 2, and in
some cases it’s set to 3, in order to help warnings indicate more closely
where they are originating from.  Pull request courtesy Ash Berlin-Taylor.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-1.0.11-6"><span class="target" id="change-7a34a9e0248e82ac2e8a596457f5f556"><strong>[bug] [py3k]</strong> <a class="changelog-reference headerlink reference internal" href="#change-7a34a9e0248e82ac2e8a596457f5f556">¶</a></span><p>Replaced the Python compatibility routines for <code class="docutils literal notranslate"><span class="pre">getargspec()</span></code> with a fully
vendored version based on <code class="docutils literal notranslate"><span class="pre">getfullargspec()</span></code> from Python 3.3.
Originally, Python was emitting deprecation warnings for this function in
Python 3.8 alphas.  While this change was reverted, it was observed that
Python 3 implementations for <code class="docutils literal notranslate"><span class="pre">getfullargspec()</span></code> are an order of magnitude
slower as of the 3.4 series where it was rewritten against <code class="docutils literal notranslate"><span class="pre">Signature</span></code>.
While Python plans to improve upon this situation, SQLAlchemy projects for
now are using a simple replacement to avoid any future issues.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/563">#563</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.0.10">
<h2 class="release-version">1.0.10<a class="headerlink" href="#change-1.0.10" title="Permalink to this headline">¶</a></h2>
Released: April 28, 2019<section id="change-1.0.10-bug">
<h3>bug<a class="headerlink" href="#change-1.0.10-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.10-0"><span class="target" id="change-17d42e31c2d70b48061542a1fd695f89"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-17d42e31c2d70b48061542a1fd695f89">¶</a></span><p>Fixed bug introduced in release 0.9.0 where the helptext for commands
inadvertently got expanded to include function docstrings from the
command.py module.  The logic has been adjusted to only refer to the first
line(s) preceding the first line break within each docstring, as was the
original intent.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/552">#552</a></p>
</p>
</li>
<li><p class="caption" id="change-1.0.10-1"><span class="target" id="change-3232b20bfd0900b31a318f8df00feb0c"><strong>[bug] [mysql] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3232b20bfd0900b31a318f8df00feb0c">¶</a></span><p>Added an assertion in <a class="reference internal" href="api/script.html#alembic.script.revision.RevisionMap.get_revisions" title="alembic.script.revision.RevisionMap.get_revisions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RevisionMap.get_revisions()</span></code></a> and other methods
which ensures revision numbers are passed as strings or collections of
strings.   Driver issues particularly on MySQL may inadvertently be passing
bytes here which leads to failures later on.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/551">#551</a></p>
</p>
</li>
<li><p class="caption" id="change-1.0.10-2"><span class="target" id="change-00e879549915237a13e74a1dd339d09e"><strong>[bug] [autogenerate] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-00e879549915237a13e74a1dd339d09e">¶</a></span><p>Fixed bug when using the
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.compare_server_default" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.compare_server_default</span></code></a> flag set
to <code class="docutils literal notranslate"><span class="pre">True</span></code> where a server default that is introduced in the table metadata
on an <code class="docutils literal notranslate"><span class="pre">Integer</span></code> column, where there is no existing server default in the
database, would raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/553">#553</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.0.9">
<h2 class="release-version">1.0.9<a class="headerlink" href="#change-1.0.9" title="Permalink to this headline">¶</a></h2>
Released: April 15, 2019<section id="change-1.0.9-bug">
<h3>bug<a class="headerlink" href="#change-1.0.9-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.9-0"><span class="target" id="change-4403ee421b16df11e2a7ae35ec2657f3"><strong>[bug] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4403ee421b16df11e2a7ae35ec2657f3">¶</a></span><p>Simplified the internal scheme used to generate the <code class="docutils literal notranslate"><span class="pre">alembic.op</span></code> namespace
to no longer attempt to generate full method signatures (e.g. rather than
generic <code class="docutils literal notranslate"><span class="pre">*args,</span> <span class="pre">**kw</span></code>) as this was not working in most cases anyway, while
in rare circumstances it would in fact sporadically have access to the real
argument names and then fail when generating the function due to missing
symbols in the argument signature.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/548">#548</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.0.8">
<h2 class="release-version">1.0.8<a class="headerlink" href="#change-1.0.8" title="Permalink to this headline">¶</a></h2>
Released: March 4, 2019<section id="change-1.0.8-bug">
<h3>bug<a class="headerlink" href="#change-1.0.8-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.8-0"><span class="target" id="change-f6c8d58278e5a162425044561c16feb6"><strong>[bug] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f6c8d58278e5a162425044561c16feb6">¶</a></span><p>Removed use of deprecated <code class="docutils literal notranslate"><span class="pre">force</span></code> parameter for SQLAlchemy quoting
functions as this parameter will be removed in a future release.
Pull request courtesy Parth Shandilya(ParthS007).</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/528">#528</a></p>
</p>
</li>
<li><p class="caption" id="change-1.0.8-1"><span class="target" id="change-d9ef5122c339e5214355188d38148079"><strong>[bug] [autogenerate] [postgresql] [py3k]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d9ef5122c339e5214355188d38148079">¶</a></span><p>Fixed issue where server default comparison on the PostgreSQL dialect would
fail for a blank string on Python 3.7 only, due to a change in regular
expression behavior in Python 3.7.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/541">#541</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.0.7">
<h2 class="release-version">1.0.7<a class="headerlink" href="#change-1.0.7" title="Permalink to this headline">¶</a></h2>
Released: January 25, 2019<section id="change-1.0.7-bug">
<h3>bug<a class="headerlink" href="#change-1.0.7-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.7-0"><span class="target" id="change-36cff0cb873ca1ab0568f11be250e770"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-36cff0cb873ca1ab0568f11be250e770">¶</a></span><p>Fixed issue in new comment support where autogenerated Python code
for comments wasn’t using <code class="docutils literal notranslate"><span class="pre">repr()</span></code> thus causing issues with
quoting.  Pull request courtesy Damien Garaud.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/529">#529</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.0.6">
<h2 class="release-version">1.0.6<a class="headerlink" href="#change-1.0.6" title="Permalink to this headline">¶</a></h2>
Released: January 13, 2019<section id="change-1.0.6-feature">
<h3>feature<a class="headerlink" href="#change-1.0.6-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.6-0"><span class="target" id="change-d7a3f73a02f2a970ad67fcc520e61d4d"><strong>[feature] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d7a3f73a02f2a970ad67fcc520e61d4d">¶</a></span><p>Added Table and Column level comments for supported backends.
New methods <a class="reference internal" href="ops.html#alembic.operations.Operations.create_table_comment" title="alembic.operations.Operations.create_table_comment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_table_comment()</span></code></a> and
<a class="reference internal" href="ops.html#alembic.operations.Operations.drop_table_comment" title="alembic.operations.Operations.drop_table_comment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_table_comment()</span></code></a> are added.  A new arguments
<a class="reference internal" href="ops.html#alembic.operations.Operations.alter_column.params.comment" title="alembic.operations.Operations.alter_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Operations.alter_column.comment</span></code></a> and
<a class="reference internal" href="ops.html#alembic.operations.Operations.alter_column.params.existing_comment" title="alembic.operations.Operations.alter_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Operations.alter_column.existing_comment</span></code></a> are added to
<a class="reference internal" href="ops.html#alembic.operations.Operations.alter_column" title="alembic.operations.Operations.alter_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.alter_column()</span></code></a>.   Autogenerate support is also added
to ensure comment add/drops from tables and columns are generated as well
as that <a class="reference internal" href="ops.html#alembic.operations.Operations.create_table" title="alembic.operations.Operations.create_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_table()</span></code></a>, <a class="reference internal" href="ops.html#alembic.operations.Operations.add_column" title="alembic.operations.Operations.add_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.add_column()</span></code></a>
both include the comment field from the source <code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code>
or <code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code> object.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/422">#422</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.0.5">
<h2 class="release-version">1.0.5<a class="headerlink" href="#change-1.0.5" title="Permalink to this headline">¶</a></h2>
Released: November 27, 2018<section id="change-1.0.5-bug">
<h3>bug<a class="headerlink" href="#change-1.0.5-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.5-0"><span class="target" id="change-78e70a53c1b407db7beaee3bedb3e18f"><strong>[bug] [py3k]</strong> <a class="changelog-reference headerlink reference internal" href="#change-78e70a53c1b407db7beaee3bedb3e18f">¶</a></span><p>Resolved remaining Python 3 deprecation warnings, covering
the use of inspect.formatargspec() with a vendored version
copied from the Python standard library, importing
collections.abc above Python 3.3 when testing against abstract
base classes, fixed one occurrence of log.warn(), as well as a few
invalid escape sequences.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/507">#507</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.0.4">
<h2 class="release-version">1.0.4<a class="headerlink" href="#change-1.0.4" title="Permalink to this headline">¶</a></h2>
Released: November 27, 2018<ul class="simple">
<li><p class="caption" id="change-1.0.4-0"><span class="target" id="change-c6fe2a25d0fe029c6b60484734a083f9"><strong>[change]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c6fe2a25d0fe029c6b60484734a083f9">¶</a></span><p>Code hosting has been moved to GitHub, at
<a class="reference external" href="https://github.com/sqlalchemy/alembic">https://github.com/sqlalchemy/alembic</a>.  Additionally, the
main Alembic website documentation URL is now
<a class="reference external" href="https://alembic.sqlalchemy.org">https://alembic.sqlalchemy.org</a>.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-1.0.3">
<h2 class="release-version">1.0.3<a class="headerlink" href="#change-1.0.3" title="Permalink to this headline">¶</a></h2>
Released: November 14, 2018<section id="change-1.0.3-bug">
<h3>bug<a class="headerlink" href="#change-1.0.3-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.3-0"><span class="target" id="change-e43ea7466d05d7cc5d44751b1c905674"><strong>[bug] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e43ea7466d05d7cc5d44751b1c905674">¶</a></span><p>Fixed regression caused by <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/513">#513</a>, where the logic to consume
<code class="docutils literal notranslate"><span class="pre">mssql_include</span></code> was not correctly interpreting the case where the flag
was not present, breaking the <code class="docutils literal notranslate"><span class="pre">op.create_index</span></code> directive for SQL Server
as a whole.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/516">#516</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.0.2">
<h2 class="release-version">1.0.2<a class="headerlink" href="#change-1.0.2" title="Permalink to this headline">¶</a></h2>
Released: October 31, 2018<section id="change-1.0.2-bug">
<h3>bug<a class="headerlink" href="#change-1.0.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.2-0"><span class="target" id="change-e1a209e341ec7c156ca8f787ddbf84eb"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e1a209e341ec7c156ca8f787ddbf84eb">¶</a></span><p>The <code class="docutils literal notranslate"><span class="pre">system=True</span></code> flag on <code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code>, used primarily in conjunction
with the Postgresql “xmin” column, now renders within the autogenerate
render process, allowing the column to be excluded from DDL.  Additionally,
adding a system=True column to a model will produce no autogenerate diff as
this column is implicitly present in the database.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/515">#515</a></p>
</p>
</li>
<li><p class="caption" id="change-1.0.2-1"><span class="target" id="change-327a65b6deaf031895817e4c3eb0b2b3"><strong>[bug] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-327a65b6deaf031895817e4c3eb0b2b3">¶</a></span><p>Fixed issue where usage of the SQL Server <code class="docutils literal notranslate"><span class="pre">mssql_include</span></code> option within a
<a class="reference internal" href="ops.html#alembic.operations.Operations.create_index" title="alembic.operations.Operations.create_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_index()</span></code></a> would raise a KeyError, as the additional
column(s) need to be added to the table object used by the construct
internally.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/513">#513</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.0.1">
<h2 class="release-version">1.0.1<a class="headerlink" href="#change-1.0.1" title="Permalink to this headline">¶</a></h2>
Released: October 17, 2018<section id="change-1.0.1-bug">
<h3>bug<a class="headerlink" href="#change-1.0.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.1-0"><span class="target" id="change-b30c45e36ff1f3756a4e57347018ca50"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-b30c45e36ff1f3756a4e57347018ca50">¶</a></span><p>Fixed an issue where revision descriptions were essentially
being formatted twice. Any revision description that contained
characters like %, writing output to stdout will fail because
the call to config.print_stdout attempted to format any
additional args passed to the function.
This fix now only applies string formatting if any args are provided
along with the output text.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/497">#497</a></p>
</p>
</li>
<li><p class="caption" id="change-1.0.1-1"><span class="target" id="change-e07e00407e62a8361ec9ae5d4d6b6388"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e07e00407e62a8361ec9ae5d4d6b6388">¶</a></span><p>Fixed issue where removed method <code class="docutils literal notranslate"><span class="pre">union_update()</span></code> was used when a
customized <a class="reference internal" href="api/operations.html#alembic.operations.ops.MigrationScript" title="alembic.operations.ops.MigrationScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">MigrationScript</span></code></a> instance included entries in the
<code class="docutils literal notranslate"><span class="pre">.imports</span></code> data member, raising an AttributeError.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/512">#512</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-1.0.0">
<h2 class="release-version">1.0.0<a class="headerlink" href="#change-1.0.0" title="Permalink to this headline">¶</a></h2>
Released: July 13, 2018<section id="change-1.0.0-feature">
<h3>feature<a class="headerlink" href="#change-1.0.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.0-0"><span class="target" id="change-0c10b9a55475a0b2900e3eb1ffc3c05d"><strong>[feature] [general]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0c10b9a55475a0b2900e3eb1ffc3c05d">¶</a></span><p>For Alembic 1.0, Python 2.6 / 3.3 support is being dropped, allowing a
fixed setup.py to be built as well as universal wheels.  Pull request
courtesy Hugo.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/491">#491</a></p>
</p>
</li>
<li><p class="caption" id="change-1.0.0-1"><span class="target" id="change-dc132a86043c89f9b6f691a4f5e902ae"><strong>[feature] [general]</strong> <a class="changelog-reference headerlink reference internal" href="#change-dc132a86043c89f9b6f691a4f5e902ae">¶</a></span><p>With the 1.0 release, Alembic’s minimum SQLAlchemy support version
moves to 0.9.0, previously 0.7.9.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-1.0.0-bug">
<h3>bug<a class="headerlink" href="#change-1.0.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-1.0.0-2"><span class="target" id="change-a65597d6139a31cac7b078239251bec5"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a65597d6139a31cac7b078239251bec5">¶</a></span><p>Fixed issue in batch where dropping a primary key column, then adding it
back under the same name but without the primary_key flag, would not remove
it from the existing PrimaryKeyConstraint.  If a new PrimaryKeyConstraint
is added, it is used as-is, as was the case before.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/502">#502</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.9.10">
<h2 class="release-version">0.9.10<a class="headerlink" href="#change-0.9.10" title="Permalink to this headline">¶</a></h2>
Released: June 29, 2018<section id="change-0.9.10-bug">
<h3>bug<a class="headerlink" href="#change-0.9.10-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.10-0"><span class="target" id="change-69e7ec22f84079320168d71942d27875"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-69e7ec22f84079320168d71942d27875">¶</a></span><p>The “op.drop_constraint()” directive will now render using <code class="docutils literal notranslate"><span class="pre">repr()</span></code> for
the schema name, in the same way that “schema” renders for all the other op
directives.  Pull request courtesy Denis Kataev.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.9.10-1"><span class="target" id="change-64ac1bc8d11904e67a30b22593b6f92e"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-64ac1bc8d11904e67a30b22593b6f92e">¶</a></span><p>Added basic capabilities for external dialects to support rendering of
“nested” types, like arrays, in a manner similar to that of the Postgresql
dialect.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/494">#494</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.10-2"><span class="target" id="change-891f251061c42e4fef5fd285cb3e70ca"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-891f251061c42e4fef5fd285cb3e70ca">¶</a></span><p>Fixed issue where “autoincrement=True” would not render for a column that
specified it, since as of SQLAlchemy 1.1 this is no longer the default
value for “autoincrement”.  Note the behavior only takes effect against the
SQLAlchemy 1.1.0 and higher; for pre-1.1 SQLAlchemy, “autoincrement=True”
does not render as was the case before. Pull request courtesy  Elad Almos.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.9.9">
<h2 class="release-version">0.9.9<a class="headerlink" href="#change-0.9.9" title="Permalink to this headline">¶</a></h2>
Released: March 22, 2018<section id="change-0.9.9-feature">
<h3>feature<a class="headerlink" href="#change-0.9.9-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.9-0"><span class="target" id="change-cbd555c40c64897873a7c3bbbae97fa8"><strong>[feature] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-cbd555c40c64897873a7c3bbbae97fa8">¶</a></span><p>Added new flag <code class="docutils literal notranslate"><span class="pre">--indicate-current</span></code> to the <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">history</span></code> command.
When listing versions, it will include the token “(current)” to indicate
the given version is a current head in the target database.  Pull request
courtesy Kazutaka Mise.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/481">#481</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.9.9-bug">
<h3>bug<a class="headerlink" href="#change-0.9.9-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.9-1"><span class="target" id="change-c2016a6829ffc9890ab4f5143496464f"><strong>[bug] [autogenerate] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c2016a6829ffc9890ab4f5143496464f">¶</a></span><p>The fix for <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/455">#455</a> in version 0.9.6 involving MySQL server default
comparison was entirely non functional, as the test itself was also broken
and didn’t reveal that it wasn’t working. The regular expression to compare
server default values like CURRENT_TIMESTAMP to current_timestamp() is
repaired.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/455">#455</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.9-2"><span class="target" id="change-78c8d123216b2b6b0c8671bce580a995"><strong>[bug] [autogenerate] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-78c8d123216b2b6b0c8671bce580a995">¶</a></span><p>Fixed bug where MySQL server default comparisons were basically not working
at all due to incorrect regexp added in <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/455">#455</a>.  Also accommodates
for MariaDB 10.2 quoting differences in reporting integer based server
defaults.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/483">#483</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.9-3"><span class="target" id="change-1edb6189fed1feaf55dbe3bbccb2691d"><strong>[bug] [mysql] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1edb6189fed1feaf55dbe3bbccb2691d">¶</a></span><p>Fixed bug in <code class="docutils literal notranslate"><span class="pre">op.drop_constraint()</span></code> for MySQL where
quoting rules would not be applied to the constraint name.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/487">#487</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.9.8">
<h2 class="release-version">0.9.8<a class="headerlink" href="#change-0.9.8" title="Permalink to this headline">¶</a></h2>
Released: February 16, 2018<section id="change-0.9.8-bug">
<h3>bug<a class="headerlink" href="#change-0.9.8-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.8-0"><span class="target" id="change-ea32d7dce3bbb337325ccd9da6b8fc94"><strong>[bug] [runtime]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ea32d7dce3bbb337325ccd9da6b8fc94">¶</a></span><p>Fixed bug where the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Script.as_revision_number()</span></code> method
did not accommodate for the ‘heads’ identifier, which in turn
caused the <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.get_head_revisions" title="alembic.runtime.environment.EnvironmentContext.get_head_revisions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnvironmentContext.get_head_revisions()</span></code></a>
and <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.get_revision_argument" title="alembic.runtime.environment.EnvironmentContext.get_revision_argument"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnvironmentContext.get_revision_argument()</span></code></a> methods
to be not usable when multiple heads were present.
The :meth:.`EnvironmentContext.get_head_revisions` method returns
a tuple in all cases as documented.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/482">#482</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.8-1"><span class="target" id="change-57d08eea0af14dcdaf5a93a7074e841b"><strong>[bug] [autogenerate] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-57d08eea0af14dcdaf5a93a7074e841b">¶</a></span><p>Fixed bug where autogenerate of <code class="xref py py-class docutils literal notranslate"><span class="pre">ExcludeConstraint</span></code>
would render a raw quoted name for a Column that has case-sensitive
characters, which when invoked as an inline member of the Table
would produce a stack trace that the quoted name is not found.
An incoming Column object is now rendered as <code class="docutils literal notranslate"><span class="pre">sa.column('name')</span></code>.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/478">#478</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.8-2"><span class="target" id="change-8c2f43ae2c8e636bac4eb447766a09ee"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8c2f43ae2c8e636bac4eb447766a09ee">¶</a></span><p>Fixed bug where the indexes would not be included in a
migration that was dropping the owning table.   The fix
now will also emit DROP INDEX for the indexes ahead of time,
but more importantly will include CREATE INDEX in the
downgrade migration.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/468">#468</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.8-3"><span class="target" id="change-f39bebb30b01f6f1c70c5165f7579879"><strong>[bug] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f39bebb30b01f6f1c70c5165f7579879">¶</a></span><p>Fixed the autogenerate of the module prefix
when rendering the text_type parameter of
postgresql.HSTORE, in much the same way that
we do for ARRAY’s type and JSON’s text_type.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/480">#480</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.8-4"><span class="target" id="change-94552852a08984786546541f09d24c4d"><strong>[bug] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-94552852a08984786546541f09d24c4d">¶</a></span><p>Added support for DROP CONSTRAINT to the MySQL Alembic
dialect to support MariaDB 10.2 which now has real
CHECK constraints.  Note this change does <strong>not</strong>
add autogenerate support, only support for op.drop_constraint()
to work.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/479">#479</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.9.7">
<h2 class="release-version">0.9.7<a class="headerlink" href="#change-0.9.7" title="Permalink to this headline">¶</a></h2>
Released: January 16, 2018<section id="change-0.9.7-bug">
<h3>bug<a class="headerlink" href="#change-0.9.7-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.7-0"><span class="target" id="change-66ea29c2543e0e6e38f36b19947c7f6c"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-66ea29c2543e0e6e38f36b19947c7f6c">¶</a></span><p>Fixed regression caused by <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/421">#421</a> which would
cause case-sensitive quoting rules to interfere with the
comparison logic for index names, thus causing indexes to show
as added for indexes that have case-sensitive names.   Works with
SQLAlchemy 0.9 and later series.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/472">#472</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.7-1"><span class="target" id="change-1420d34b8811535597303fe39088b820"><strong>[bug] [autogenerate] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1420d34b8811535597303fe39088b820">¶</a></span><p>Fixed bug where autogenerate would produce a DROP statement for the index
implicitly created by a Postgresql EXCLUDE constraint, rather than skipping
it as is the case for indexes implicitly generated by unique constraints.
Makes use of SQLAlchemy 1.0.x’s improved “duplicates index” metadata and
requires at least SQLAlchemy version 1.0.x to function correctly.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/461">#461</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.9.6">
<h2 class="release-version">0.9.6<a class="headerlink" href="#change-0.9.6" title="Permalink to this headline">¶</a></h2>
Released: October 13, 2017<section id="change-0.9.6-feature">
<h3>feature<a class="headerlink" href="#change-0.9.6-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.6-0"><span class="target" id="change-1dea2c78506fe41b63bfbf9a86cc2c5c"><strong>[feature] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1dea2c78506fe41b63bfbf9a86cc2c5c">¶</a></span><p>The <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">history</span></code> command will now make use of the revision
environment <code class="docutils literal notranslate"><span class="pre">env.py</span></code> unconditionally if the <code class="docutils literal notranslate"><span class="pre">revision_environment</span></code>
configuration flag is set to True.  Previously, the environment would
only be invoked if the history specification were against a database-stored
revision token.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/447">#447</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.9.6-bug">
<h3>bug<a class="headerlink" href="#change-0.9.6-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.6-1"><span class="target" id="change-367c96131608e683f9b0e7af4ddca9d1"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-367c96131608e683f9b0e7af4ddca9d1">¶</a></span><p>Fixed a few Python3.6 deprecation warnings by replacing <code class="docutils literal notranslate"><span class="pre">StopIteration</span></code>
with <code class="docutils literal notranslate"><span class="pre">return</span></code>, as well as using <code class="docutils literal notranslate"><span class="pre">getfullargspec()</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">getargspec()</span></code> under Python 3.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/458">#458</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.6-2"><span class="target" id="change-1653c9613895ace24b974b2dc86649d9"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1653c9613895ace24b974b2dc86649d9">¶</a></span><p>An addition to <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/441">#441</a> fixed in 0.9.5, we forgot to also filter
for the <code class="docutils literal notranslate"><span class="pre">+</span></code> sign in migration names which also breaks due to the relative
migrations feature.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/441">#441</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.6-3"><span class="target" id="change-69ae243e582d4c22ed61524ac729d6a8"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-69ae243e582d4c22ed61524ac729d6a8">¶</a></span><p>Fixed bug expanding upon the fix for
<a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/85">#85</a> which adds the correct module import to the
“inner” type for an <code class="docutils literal notranslate"><span class="pre">ARRAY</span></code> type, the fix now accommodates for the
generic <code class="docutils literal notranslate"><span class="pre">sqlalchemy.types.ARRAY</span></code> type added in SQLAlchemy 1.1,
rendering the inner type correctly regardless of whether or not the
Postgresql dialect is present.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/442">#442</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.6-4"><span class="target" id="change-5459a7552a17d8b658f0f710bedf6da0"><strong>[bug] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5459a7552a17d8b658f0f710bedf6da0">¶</a></span><p>Fixed bug where server default comparison of CURRENT_TIMESTAMP would fail
on MariaDB 10.2 due to a change in how the function is
represented by the database during reflection.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/455">#455</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.6-5"><span class="target" id="change-96e63575543a176ad08f5c202995b8cb"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-96e63575543a176ad08f5c202995b8cb">¶</a></span><p>Fixed bug where comparison of <code class="docutils literal notranslate"><span class="pre">Numeric</span></code> types would produce
a difference if the Python-side <code class="docutils literal notranslate"><span class="pre">Numeric</span></code> inadvertently specified
a non-None “scale” with a “precision” of None, even though this <code class="docutils literal notranslate"><span class="pre">Numeric</span></code>
type will pass over the “scale” argument when rendering. Pull request
courtesy Ivan Mmelnychuk.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.9.6-6"><span class="target" id="change-2e2d7def2820309209ddbd2d9d9aee6e"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-2e2d7def2820309209ddbd2d9d9aee6e">¶</a></span><p>The name of the temporary table in batch mode is now generated
off of the original table name itself, to avoid conflicts for the
unusual case of multiple batch operations running against the same
database schema at the same time.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/457">#457</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.6-7"><span class="target" id="change-54904226e45c6fb88fac973bd2a26746"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-54904226e45c6fb88fac973bd2a26746">¶</a></span><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code> can now render correctly if the
<code class="docutils literal notranslate"><span class="pre">link_to_name</span></code> flag is set, as it will not attempt to resolve the name
from a “key” in this case.  Additionally, the constraint will render
as-is even if the remote column name isn’t present on the referenced
remote table.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/456">#456</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.6-8"><span class="target" id="change-29363b7285ea348976f7a6c62241e737"><strong>[bug] [py3k] [runtime]</strong> <a class="changelog-reference headerlink reference internal" href="#change-29363b7285ea348976f7a6c62241e737">¶</a></span><p>Reworked “sourceless” system to be fully capable of handling any
combination of: Python2/3x, pep3149 or not, PYTHONOPTIMIZE or not,
for locating and loading both env.py files as well as versioning files.
This includes: locating files inside of <code class="docutils literal notranslate"><span class="pre">__pycache__</span></code> as well as listing
out version files that might be only in <code class="docutils literal notranslate"><span class="pre">versions/__pycache__</span></code>, deduplicating
version files that may be in <code class="docutils literal notranslate"><span class="pre">versions/__pycache__</span></code> and <code class="docutils literal notranslate"><span class="pre">versions/</span></code>
at the same time, correctly looking for .pyc or .pyo files based on
if pep488 is present or not. The latest Python3x deprecation warnings
involving importlib are also corrected.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/449">#449</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.9.5">
<h2 class="release-version">0.9.5<a class="headerlink" href="#change-0.9.5" title="Permalink to this headline">¶</a></h2>
Released: August 9, 2017<section id="change-0.9.5-bug">
<h3>bug<a class="headerlink" href="#change-0.9.5-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.5-0"><span class="target" id="change-80f2cedab8c2762a6c675110fa4bcd2c"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-80f2cedab8c2762a6c675110fa4bcd2c">¶</a></span><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">CommandError</span></code> is raised if the “–rev-id” passed to the
<a class="reference internal" href="api/commands.html#alembic.command.revision" title="alembic.command.revision"><code class="xref py py-func docutils literal notranslate"><span class="pre">revision()</span></code></a> command contains dashes or at-signs, as this interferes
with the command notation used to locate revisions.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/441">#441</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.5-1"><span class="target" id="change-9b3b8ea8f212b45898e111cf626d8a40"><strong>[bug] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9b3b8ea8f212b45898e111cf626d8a40">¶</a></span><p>Added support for the dialect-specific keyword arguments
to <a class="reference internal" href="ops.html#alembic.operations.Operations.drop_index" title="alembic.operations.Operations.drop_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_index()</span></code></a>.   This includes support for
<code class="docutils literal notranslate"><span class="pre">postgresql_concurrently</span></code> and others.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/424">#424</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.5-2"><span class="target" id="change-0ab0b07fa01bc5efb8bf08489fe0622b"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0ab0b07fa01bc5efb8bf08489fe0622b">¶</a></span><p>Fixed bug in timezone feature introduced in
<a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/425">#425</a> when the creation
date in a revision file is calculated, to
accommodate for timezone names that contain
mixed-case characters in their name as opposed
to all uppercase.  Pull request courtesy Nils
Philippsen.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.9.4">
<h2 class="release-version">0.9.4<a class="headerlink" href="#change-0.9.4" title="Permalink to this headline">¶</a></h2>
Released: July 31, 2017<section id="change-0.9.4-bug">
<h3>bug<a class="headerlink" href="#change-0.9.4-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.4-0"><span class="target" id="change-dd93da0685493dbc5298997d0036a315"><strong>[bug] [runtime]</strong> <a class="changelog-reference headerlink reference internal" href="#change-dd93da0685493dbc5298997d0036a315">¶</a></span><p>Added an additional attribute to the new
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.on_version_apply" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.on_version_apply</span></code></a> API,
<code class="xref py py-attr docutils literal notranslate"><span class="pre">MigrationInfo.up_revision_ids</span></code>, to accommodate for the uncommon
case of the <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">stamp</span></code> command being used to move from multiple
branches down to a common branchpoint; there will be multiple
“up” revisions in this one case.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.9.3">
<h2 class="release-version">0.9.3<a class="headerlink" href="#change-0.9.3" title="Permalink to this headline">¶</a></h2>
Released: July 6, 2017<section id="change-0.9.3-feature">
<h3>feature<a class="headerlink" href="#change-0.9.3-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.3-0"><span class="target" id="change-b3f11e59ad4269853c7e9be1fbf64991"><strong>[feature] [runtime]</strong> <a class="changelog-reference headerlink reference internal" href="#change-b3f11e59ad4269853c7e9be1fbf64991">¶</a></span><p>Added a new callback hook
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.on_version_apply" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.on_version_apply</span></code></a>,
which allows user-defined code to be invoked each time an individual
upgrade, downgrade, or stamp operation proceeds against a database.
Pull request courtesy John Passaro.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.9.3-bug">
<h3>bug<a class="headerlink" href="#change-0.9.3-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.3-1"><span class="target" id="change-e97320bfc0d178b7bc4e3853cd1ac078"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e97320bfc0d178b7bc4e3853cd1ac078">¶</a></span><p>Fixed bug where autogen comparison of a <code class="xref py py-class docutils literal notranslate"><span class="pre">Variant</span></code> datatype
would not compare to the dialect level type for the “default”
implementation of the <code class="xref py py-class docutils literal notranslate"><span class="pre">Variant</span></code>, returning the type as changed
between database and table metadata.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/433">#433</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.3-2"><span class="target" id="change-ab5c6f3ab6cedc5d03643cd86fd9aaa2"><strong>[bug] [tests]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ab5c6f3ab6cedc5d03643cd86fd9aaa2">¶</a></span><p>Fixed unit tests to run correctly under the SQLAlchemy 1.0.x series
prior to version 1.0.10 where a particular bug involving Postgresql
exclude constraints was fixed.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/431">#431</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.9.2">
<h2 class="release-version">0.9.2<a class="headerlink" href="#change-0.9.2" title="Permalink to this headline">¶</a></h2>
Released: May 18, 2017<section id="change-0.9.2-feature">
<h3>feature<a class="headerlink" href="#change-0.9.2-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.2-0"><span class="target" id="change-b7ca765fb575d65ec38c24dd3e978af2"><strong>[feature] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-b7ca765fb575d65ec38c24dd3e978af2">¶</a></span><p>Added a new configuration option <code class="docutils literal notranslate"><span class="pre">timezone</span></code>, a string timezone name
that will be applied to the create date timestamp rendered
inside the revision file as made available to the <code class="docutils literal notranslate"><span class="pre">file_template</span></code> used
to generate the revision filename.  Note this change adds the
<code class="docutils literal notranslate"><span class="pre">python-dateutil</span></code> package as a dependency.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/425">#425</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.9.2-bug">
<h3>bug<a class="headerlink" href="#change-0.9.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.2-1"><span class="target" id="change-16b17bfa81771c2e848f9638e3d788da"><strong>[bug] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-16b17bfa81771c2e848f9638e3d788da">¶</a></span><p>Repaired <a class="reference internal" href="ops.html#alembic.operations.Operations.rename_table" title="alembic.operations.Operations.rename_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.rename_table()</span></code></a> for SQL Server when the
target table is in a remote schema, the schema name is omitted from
the “new name” argument.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/429">#429</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.2-2"><span class="target" id="change-ce98f1365360bc546517bf492ac5c9d3"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ce98f1365360bc546517bf492ac5c9d3">¶</a></span><p>The autogenerate compare scheme now takes into account the name truncation
rules applied by SQLAlchemy’s DDL compiler to the names of the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code> object, when these names are dynamically truncated
due to a too-long identifier name.   As the identifier truncation is
deterministic, applying the same rule to the metadata name allows
correct comparison to the database-derived name.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/421">#421</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.9.2-misc">
<h3>misc<a class="headerlink" href="#change-0.9.2-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.2-3"><span class="target" id="change-43f94416159c492fae7d3b440aeb87d7"><strong>[bug environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-43f94416159c492fae7d3b440aeb87d7">¶</a></span><p>A warning is emitted when an object that’s not a
<a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/connections.html#sqlalchemy.engine.Connection" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> is passed to
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnvironmentContext.configure()</span></code></a>.  For the case of a
<a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/connections.html#sqlalchemy.engine.Engine" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> passed, the check for “in transaction”
introduced in version 0.9.0 has been relaxed to work in the case of an
attribute error, as some users appear to be passing an
<a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/connections.html#sqlalchemy.engine.Engine" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a> and not a
<a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/connections.html#sqlalchemy.engine.Connection" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/419">#419</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.9.1">
<h2 class="release-version">0.9.1<a class="headerlink" href="#change-0.9.1" title="Permalink to this headline">¶</a></h2>
Released: March 1, 2017<section id="change-0.9.1-bug">
<h3>bug<a class="headerlink" href="#change-0.9.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.1-0"><span class="target" id="change-a3f8f682c3f750d8318419284c3ccb96"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a3f8f682c3f750d8318419284c3ccb96">¶</a></span><p>An adjustment to the bug fix for <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/369">#369</a> to accommodate for
env.py scripts that use an enclosing transaction distinct from the
one that the context provides, so that the check for “didn’t commit
the transaction” doesn’t trigger in this scenario.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/369">#369</a>, <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/417">#417</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.9.0">
<h2 class="release-version">0.9.0<a class="headerlink" href="#change-0.9.0" title="Permalink to this headline">¶</a></h2>
Released: February 28, 2017<section id="change-0.9.0-feature">
<h3>feature<a class="headerlink" href="#change-0.9.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.0-0"><span class="target" id="change-73639ea9dfba22778d5589f97a4c1e84"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-73639ea9dfba22778d5589f97a4c1e84">¶</a></span><p>The <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.target_metadata" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.target_metadata</span></code></a> parameter
may now be optionally specified as a sequence of <code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code>
objects instead of a single <code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code> object.  The
autogenerate process will process the sequence of <code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code>
objects in order.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/38">#38</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.0-1"><span class="target" id="change-f1eb580eebe61673dab8806e34153750"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f1eb580eebe61673dab8806e34153750">¶</a></span><p>Added a keyword argument <code class="docutils literal notranslate"><span class="pre">process_revision_directives</span></code> to the
<a class="reference internal" href="api/commands.html#alembic.command.revision" title="alembic.command.revision"><code class="xref py py-func docutils literal notranslate"><span class="pre">command.revision()</span></code></a> API call.  This function acts in the
same role as the environment-level
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.process_revision_directives" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.process_revision_directives</span></code></a>,
and allows API use of the
command to drop in an ad-hoc directive process function.  This
function can be used among other things to place a complete
<a class="reference internal" href="api/operations.html#alembic.operations.ops.MigrationScript" title="alembic.operations.ops.MigrationScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">MigrationScript</span></code></a> structure in place.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.9.0-2"><span class="target" id="change-7411b2dde8225077dc490609b965aa7d"><strong>[feature] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-7411b2dde8225077dc490609b965aa7d">¶</a></span><p>Added support for Postgresql EXCLUDE constraints, including the
operation directive <code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_exclude_constraints()</span></code>
as well as autogenerate render support for the <code class="docutils literal notranslate"><span class="pre">ExcludeConstraint</span></code>
object as present in a <code class="docutils literal notranslate"><span class="pre">Table</span></code>.  Autogenerate detection for an EXCLUDE
constraint added or removed to/from an existing table is <strong>not</strong>
implemented as the SQLAlchemy Postgresql dialect does not yet support
reflection of EXCLUDE constraints.</p>
<p>Additionally, unknown constraint types now warn when
encountered within an autogenerate action rather than raise.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/412">#412</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.9.0-bug">
<h3>bug<a class="headerlink" href="#change-0.9.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.9.0-3"><span class="target" id="change-689114113b973caa03172b3cb418a94c"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-689114113b973caa03172b3cb418a94c">¶</a></span><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">CommandError</span></code> is now raised when a migration file opens
a database transaction and does not close/commit/rollback, when
the backend database or environment options also specify transactional_ddl
is False.   When transactional_ddl is not in use, Alembic doesn’t
close any transaction so a transaction opened by a migration file
will cause the following migrations to fail to apply.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/369">#369</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.0-4"><span class="target" id="change-70975564d344ac3505eced1d7a23bbc0"><strong>[bug] [autogenerate] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-70975564d344ac3505eced1d7a23bbc0">¶</a></span><p>The <code class="docutils literal notranslate"><span class="pre">autoincrement=True</span></code> flag is now rendered within the
<a class="reference internal" href="ops.html#alembic.operations.Operations.alter_column" title="alembic.operations.Operations.alter_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.alter_column()</span></code></a> operation if the source column indicates
that this flag should be set to True.  The behavior is sensitive to
the SQLAlchemy version in place, as the “auto” default option is new
in SQLAlchemy 1.1.  When the source column indicates autoincrement
as True or “auto”, the flag will render as True if the original column
contextually indicates that it should have “autoincrement” keywords,
and when the source column explcitly sets it to False, this is also
rendered.  The behavior is intended to preserve the AUTO_INCREMENT flag
on MySQL as the column is fully recreated on this backend.  Note that this
flag does <strong>not</strong> support alteration of a column’s “autoincrement” status,
as this is not portable across backends.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/413">#413</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.0-5"><span class="target" id="change-ea3e7edb9b96fbcd3b98dba50ab938c9"><strong>[bug] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ea3e7edb9b96fbcd3b98dba50ab938c9">¶</a></span><p>Fixed bug where Postgresql JSON/JSONB types rendered on SQLAlchemy
1.1 would render the “astext_type” argument which defaults to
the <code class="docutils literal notranslate"><span class="pre">Text()</span></code> type without the module prefix, similarly to the
issue with ARRAY fixed in <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/85">#85</a>.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/411">#411</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.0-6"><span class="target" id="change-5d88b61e81ccf43ab6783694af3bef0c"><strong>[bug] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5d88b61e81ccf43ab6783694af3bef0c">¶</a></span><p>Fixed bug where Postgresql ARRAY type would not render the import prefix
for the inner type; additionally, user-defined renderers take place
for the inner type as well as the outer type.  Pull request courtesy
Paul Brackin.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/85">#85</a></p>
</p>
</li>
<li><p class="caption" id="change-0.9.0-7"><span class="target" id="change-d282704f50e1e448f2fd00febb736381"><strong>[bug] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d282704f50e1e448f2fd00febb736381">¶</a></span><p>Fixed bug in <code class="xref py py-func docutils literal notranslate"><span class="pre">ops.create_foreign_key()</span></code> where the internal table
representation would not be created properly if the foreign key referred
to a table in a different schema of the same name.  Pull request
courtesy Konstantin Lebedev.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.8.10">
<h2 class="release-version">0.8.10<a class="headerlink" href="#change-0.8.10" title="Permalink to this headline">¶</a></h2>
Released: January 17, 2017<section id="change-0.8.10-bug">
<h3>bug<a class="headerlink" href="#change-0.8.10-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.10-0"><span class="target" id="change-d9ec988955da80ae143146dd3efdaa4d"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d9ec988955da80ae143146dd3efdaa4d">¶</a></span><p>The alembic_version table, when initially created, now establishes a
primary key constraint on the “version_num” column, to suit database
engines that don’t support tables without primary keys.   This behavior
can be controlled using the parameter
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.version_table_pk" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.version_table_pk</span></code></a>.  Note that
this change only applies to the initial creation of the alembic_version
table; it does not impact any existing alembic_version table already
present.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/406">#406</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.10-1"><span class="target" id="change-bb423038280c11683fc5784d00e72f0c"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-bb423038280c11683fc5784d00e72f0c">¶</a></span><p>Fixed bug where doing <code class="docutils literal notranslate"><span class="pre">batch_op.drop_constraint()</span></code> against the
primary key constraint would fail to remove the “primary_key” flag
from the column, resulting in the constraint being recreated.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/402">#402</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.10-2"><span class="target" id="change-912cc80795b2d2178f5faa188900f60e"><strong>[bug] [autogenerate] [oracle]</strong> <a class="changelog-reference headerlink reference internal" href="#change-912cc80795b2d2178f5faa188900f60e">¶</a></span><p>Adjusted the logic originally added for <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/276">#276</a> that detects MySQL
unique constraints which are actually unique indexes to be generalized
for any dialect that has this behavior, for SQLAlchemy version 1.0 and
greater.  This is to allow for upcoming SQLAlchemy support for unique
constraint reflection for Oracle, which also has no dedicated concept of
“unique constraint” and instead establishes a unique index.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.8.10-3"><span class="target" id="change-4ea96228cbfc1379fdb0c08a63335956"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4ea96228cbfc1379fdb0c08a63335956">¶</a></span><p>Added a file ignore for Python files of the form <code class="docutils literal notranslate"><span class="pre">.#&lt;name&gt;.py</span></code>,
which are generated by the Emacs editor.  Pull request courtesy
Markus Mattes.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/356">#356</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.8.9">
<h2 class="release-version">0.8.9<a class="headerlink" href="#change-0.8.9" title="Permalink to this headline">¶</a></h2>
Released: November 28, 2016<section id="change-0.8.9-bug">
<h3>bug<a class="headerlink" href="#change-0.8.9-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.9-0"><span class="target" id="change-dac5ce1e24269eca116374238b21cc84"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-dac5ce1e24269eca116374238b21cc84">¶</a></span><p>Adjustment to the “please adjust!” comment in the script.py.mako
template so that the generated comment starts with a single pound
sign, appeasing flake8.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/393">#393</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.9-1"><span class="target" id="change-3b0191f15162921e70a6afffc1d0ad7e"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3b0191f15162921e70a6afffc1d0ad7e">¶</a></span><p>Batch mode will not use CAST() to copy data if <a href="#id5"><span class="problematic" id="id6">type_</span></a> is given, however
the basic type affinity matches that of the existing type.  This to
avoid SQLite’s CAST of TIMESTAMP which results in truncation of the
data, in those cases where the user needs to add redundant <a href="#id7"><span class="problematic" id="id8">type_</span></a> for
other reasons.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/391">#391</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.9-2"><span class="target" id="change-c3349a994d0d0f651ccdce6ff60cef7d"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c3349a994d0d0f651ccdce6ff60cef7d">¶</a></span><p>Continued pep8 improvements by adding appropriate whitespace in
the base template for generated migrations.  Pull request courtesy
Markus Mattes.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/393">#393</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.9-3"><span class="target" id="change-386a04f4e7acba25a85fdd637f3c1fc6"><strong>[bug] [revisioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-386a04f4e7acba25a85fdd637f3c1fc6">¶</a></span><p>Added an additional check when reading in revision files to detect
if the same file is being read twice; this can occur if the same directory
or a symlink equivalent is present more than once in version_locations.
A warning is now emitted and the file is skipped.  Pull request courtesy
Jiri Kuncar.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.8.9-4"><span class="target" id="change-ad3473eaf274ca73e00e36aaaf9fa84e"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ad3473eaf274ca73e00e36aaaf9fa84e">¶</a></span><p>Fixed bug where usage of a custom TypeDecorator which returns a
per-dialect type via <code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeDecorator.load_dialect_impl()</span></code> that differs
significantly from the default “impl” for the type decorator would fail
to compare correctly during autogenerate.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/395">#395</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.9-5"><span class="target" id="change-127fe37e19dfd4d1c39645deeff72d2e"><strong>[bug] [autogenerate] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-127fe37e19dfd4d1c39645deeff72d2e">¶</a></span><p>Fixed bug in Postgresql “functional index skip” behavior where a
functional index that ended in ASC/DESC wouldn’t be detected as something
we can’t compare in autogenerate, leading to duplicate definitions
in autogenerated files.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/392">#392</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.9-6"><span class="target" id="change-abcea106038640ef54a91bbba31d09e8"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-abcea106038640ef54a91bbba31d09e8">¶</a></span><p>Fixed bug where the “base” specifier, as in “base:head”, could not
be used explicitly when <code class="docutils literal notranslate"><span class="pre">--sql</span></code> mode was present.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.8.8">
<h2 class="release-version">0.8.8<a class="headerlink" href="#change-0.8.8" title="Permalink to this headline">¶</a></h2>
Released: September 12, 2016<section id="change-0.8.8-feature">
<h3>feature<a class="headerlink" href="#change-0.8.8-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.8-0"><span class="target" id="change-affeb940d1af9f1107f1b19b3c4f3a45"><strong>[feature] [operations] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-affeb940d1af9f1107f1b19b3c4f3a45">¶</a></span><p>Added support for the USING clause to the ALTER COLUMN operation
for Postgresql.  Support is via the
<code class="xref py py-paramref docutils literal notranslate"><span class="pre">op.alter_column.postgresql_using</span></code>
parameter.  Pull request courtesy Frazer McLean.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/292">#292</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.8-1"><span class="target" id="change-5b6034de4117140b734bfa48ac512187"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5b6034de4117140b734bfa48ac512187">¶</a></span><p>Autogenerate with type comparison enabled will pick up on the timezone
setting changing between DateTime types.   Pull request courtesy
David Szotten.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.8.8-misc">
<h3>misc<a class="headerlink" href="#change-0.8.8-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.8-2"><span class="target" id="change-428e67bd5f0c2733a7e39d8a12df5601"><strong>[autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-428e67bd5f0c2733a7e39d8a12df5601">¶</a></span><p>The imports in the default script.py.mako are now at the top
so that flake8 editors don’t complain by default.  PR courtesy
Guilherme Mansur.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.8.7">
<h2 class="release-version">0.8.7<a class="headerlink" href="#change-0.8.7" title="Permalink to this headline">¶</a></h2>
Released: July 26, 2016<section id="change-0.8.7-bug">
<h3>bug<a class="headerlink" href="#change-0.8.7-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.7-0"><span class="target" id="change-08e3ed70ebbb0511102a33980e7f78e3"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-08e3ed70ebbb0511102a33980e7f78e3">¶</a></span><p>Fixed bug where upgrading to the head of a branch which is already
present would fail, only if that head were also the dependency
of a different branch that is also upgraded, as the revision system
would see this as trying to go in the wrong direction.   The check
here has been refined to distinguish between same-branch revisions
out of order vs. movement along sibling branches.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/336">#336</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.7-1"><span class="target" id="change-14905ab8ec9fdc83e454d57392284973"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-14905ab8ec9fdc83e454d57392284973">¶</a></span><p>Adjusted the version traversal on downgrade
such that we can downgrade to a version that is a dependency for
a version in a different branch, <em>without</em> needing to remove that
dependent version as well.  Previously, the target version would be
seen as a “merge point” for it’s normal up-revision as well as the
dependency.  This integrates with the changes for <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/377">#377</a>
and <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/378">#378</a> to improve treatment of branches with dependencies
overall.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/379">#379</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.7-2"><span class="target" id="change-3c5cde91d9a44ce88d4f860480fc16cc"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3c5cde91d9a44ce88d4f860480fc16cc">¶</a></span><p>Fixed bug where a downgrade to a version that is also a dependency
to a different branch would fail, as the system attempted to treat
this as an “unmerge” of a merge point, when in fact it doesn’t have
the other side of the merge point available for update.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/377">#377</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.7-3"><span class="target" id="change-9b1fe197824a58bd166cd847c3537fbc"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9b1fe197824a58bd166cd847c3537fbc">¶</a></span><p>Fixed bug where the “alembic current” command wouldn’t show a revision
as a current head if it were also a dependency of a version in a
different branch that’s also applied.   Extra logic is added to
extract “implied” versions of different branches from the top-level
versions listed in the alembic_version table.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/378">#378</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.7-4"><span class="target" id="change-00e98e3a1dedf80c3f937e4a99530eec"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-00e98e3a1dedf80c3f937e4a99530eec">¶</a></span><p>Fixed bug where a repr() or str() of a Script object would fail
if the script had multiple dependencies.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.8.7-5"><span class="target" id="change-323e2148ded611f9f43325d4e9f26ec7"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-323e2148ded611f9f43325d4e9f26ec7">¶</a></span><p>Fixed bug in autogen where if the DB connection sends the default
schema as “None”, this “None” would be removed from the list of
schemas to check if include_schemas were set.  This could possibly
impact using include_schemas with SQLite.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.8.7-6"><span class="target" id="change-31741edc43136fbb2fdb61dbe776c40d"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-31741edc43136fbb2fdb61dbe776c40d">¶</a></span><p>Small adjustment made to the batch handling for reflected CHECK
constraints to accommodate for SQLAlchemy 1.1 now reflecting these.
Batch mode still does not support CHECK constraints from the reflected
table as these can’t be easily differentiated from the ones created
by types such as Boolean.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.8.6">
<h2 class="release-version">0.8.6<a class="headerlink" href="#change-0.8.6" title="Permalink to this headline">¶</a></h2>
Released: April 14, 2016<section id="change-0.8.6-bug">
<h3>bug<a class="headerlink" href="#change-0.8.6-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.6-0"><span class="target" id="change-8d1d95260bd6270b24f000de896b8bfd"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8d1d95260bd6270b24f000de896b8bfd">¶</a></span><p>Errors which occur within the Mako render step are now intercepted
and raised as CommandErrors like other failure cases; the Mako
exception itself is written using template-line formatting to
a temporary file which is named in the exception message.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/367">#367</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.6-1"><span class="target" id="change-63b65035dbe403396c891c33e9efdb7b"><strong>[bug] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-63b65035dbe403396c891c33e9efdb7b">¶</a></span><p>Added a fix to Postgresql server default comparison which first checks
if the text of the default is identical to the original, before attempting
to actually run the default.  This accommodates for default-generation
functions that generate a new value each time such as a uuid function.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/365">#365</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.6-2"><span class="target" id="change-aba71a35d0370725f91516a2937a492f"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-aba71a35d0370725f91516a2937a492f">¶</a></span><p>Fixed bug introduced by the fix for <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/338">#338</a> in version 0.8.4
where a server default could no longer be dropped in batch mode.
Pull request courtesy Martin Domke.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/361">#361</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.6-3"><span class="target" id="change-91637ee999cf1966a4a54d18ac511f33"><strong>[bug] [batch] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-91637ee999cf1966a4a54d18ac511f33">¶</a></span><p>Fixed bug where SQL Server arguments for drop_column() would not
be propagated when running under a batch block.  Pull request
courtesy Michal Petrucha.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.8.5">
<h2 class="release-version">0.8.5<a class="headerlink" href="#change-0.8.5" title="Permalink to this headline">¶</a></h2>
Released: March 9, 2016<section id="change-0.8.5-bug">
<h3>bug<a class="headerlink" href="#change-0.8.5-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.5-0"><span class="target" id="change-0aa1c91afef6bf83db8719672689fefa"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0aa1c91afef6bf83db8719672689fefa">¶</a></span><p>Fixed bug where the columns rendered in a <code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint</span></code>
in autogenerate would inappropriately render the “key” of the
column, not the name.  Pull request courtesy Jesse Dhillon.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/335">#335</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.5-1"><span class="target" id="change-4e659f8ce8317d17aa13248d370e095c"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4e659f8ce8317d17aa13248d370e095c">¶</a></span><p>Repaired batch migration support for “schema” types which generate
constraints, in particular the <code class="docutils literal notranslate"><span class="pre">Boolean</span></code> datatype which generates
a CHECK constraint.  Previously, an alter column operation with this
type would fail to correctly accommodate for the CHECK constraint
on change both from and to this type.  In the former case the operation
would fail entirely, in the latter, the CHECK constraint would
not get generated.  Both of these issues are repaired.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/354">#354</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.5-2"><span class="target" id="change-450e51257d233b43db7ad0cfce3d0f36"><strong>[bug] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-450e51257d233b43db7ad0cfce3d0f36">¶</a></span><p>Changing a schema type such as <code class="docutils literal notranslate"><span class="pre">Boolean</span></code> to a non-schema type would
emit a drop constraint operation which emits <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> for
the MySQL dialect.  This drop constraint operation is now skipped when
the constraint originates from a schema type.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/355">#355</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.8.4">
<h2 class="release-version">0.8.4<a class="headerlink" href="#change-0.8.4" title="Permalink to this headline">¶</a></h2>
Released: December 15, 2015<section id="change-0.8.4-feature">
<h3>feature<a class="headerlink" href="#change-0.8.4-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.4-0"><span class="target" id="change-12ac201ffdc5c463c385d2c6ccd1530a"><strong>[feature] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-12ac201ffdc5c463c385d2c6ccd1530a">¶</a></span><p>A major improvement to the hash id generation function, which for some
reason used an awkward arithmetic formula against uuid4() that produced
values that tended to start with the digits 1-4.  Replaced with a
simple substring approach which provides an even distribution.  Pull
request courtesy Antti Haapala.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.8.4-1"><span class="target" id="change-93eab9859a4ad0970169efba7f84cbca"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-93eab9859a4ad0970169efba7f84cbca">¶</a></span><p>Added an autogenerate renderer for the <a class="reference internal" href="api/operations.html#alembic.operations.ops.ExecuteSQLOp" title="alembic.operations.ops.ExecuteSQLOp"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExecuteSQLOp</span></code></a> operation
object; only renders if given a plain SQL string, otherwise raises
NotImplementedError.  Can be of help with custom autogenerate
sequences that includes straight SQL execution.  Pull request courtesy
Jacob Magnusson.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.8.4-bug">
<h3>bug<a class="headerlink" href="#change-0.8.4-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.4-2"><span class="target" id="change-82a9456a2fda9a22fab7d6a8e07b42c8"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-82a9456a2fda9a22fab7d6a8e07b42c8">¶</a></span><p>Batch mode generates a FOREIGN KEY constraint that is self-referential
using the ultimate table name, rather than <code class="docutils literal notranslate"><span class="pre">_alembic_batch_temp</span></code>.
When the table is renamed from <code class="docutils literal notranslate"><span class="pre">_alembic_batch_temp</span></code> back to the
original name, the FK now points to the right name.  This
will <strong>not</strong> work if referential integrity is being enforced (eg. SQLite
“PRAGMA FOREIGN_KEYS=ON”) since the original table is dropped and
the new table then renamed to that name, however this is now consistent
with how foreign key constraints on <strong>other</strong> tables already operate
with batch mode; these don’t support batch mode if referential integrity
is enabled in any case.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/345">#345</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.4-3"><span class="target" id="change-f8a974100f54b74d7f90ef765edae1ed"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f8a974100f54b74d7f90ef765edae1ed">¶</a></span><p>Added a type-level comparator that distinguishes <code class="xref py py-class docutils literal notranslate"><span class="pre">Integer</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">BigInteger</span></code>, and <code class="xref py py-class docutils literal notranslate"><span class="pre">SmallInteger</span></code> types and
dialect-specific types; these all have “Integer” affinity so previously
all compared as the same.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/341">#341</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.4-4"><span class="target" id="change-42c41ce6016807389094c6bba596835f"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-42c41ce6016807389094c6bba596835f">¶</a></span><p>Fixed bug where the <code class="docutils literal notranslate"><span class="pre">server_default</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">alter_column()</span></code>
would not function correctly in batch mode.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/338">#338</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.4-5"><span class="target" id="change-398bb6280fc5d6d1eb104764e6d76efd"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-398bb6280fc5d6d1eb104764e6d76efd">¶</a></span><p>Adjusted the rendering for index expressions such that a <code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code>
object present in the source <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code> will not be rendered
as table-qualified; e.g. the column name will be rendered alone.
Table-qualified names here were failing on systems such as Postgresql.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/337">#337</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.8.3">
<h2 class="release-version">0.8.3<a class="headerlink" href="#change-0.8.3" title="Permalink to this headline">¶</a></h2>
Released: October 16, 2015<section id="change-0.8.3-bug">
<h3>bug<a class="headerlink" href="#change-0.8.3-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.3-0"><span class="target" id="change-7d9e4e8e32939b01ec451e44167f5607"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-7d9e4e8e32939b01ec451e44167f5607">¶</a></span><p>Fixed an 0.8 regression whereby the “imports” dictionary member of
the autogen context was removed; this collection is documented in the
“render custom type” documentation as a place to add new imports.
The member is now known as
<a class="reference internal" href="api/autogenerate.html#alembic.autogenerate.api.AutogenContext.imports" title="alembic.autogenerate.api.AutogenContext.imports"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AutogenContext.imports</span></code></a> and the documentation is repaired.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/332">#332</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.3-1"><span class="target" id="change-9ef6be6709e71f3800b6e451ae75c5f8"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9ef6be6709e71f3800b6e451ae75c5f8">¶</a></span><p>Fixed bug in batch mode where a table that had pre-existing indexes
would create the same index on the new table with the same name,
which on SQLite produces a naming conflict as index names are in a
global namespace on that backend.   Batch mode now defers the production
of both existing and new indexes until after the entire table transfer
operation is complete, which also means those indexes no longer take
effect during the INSERT from SELECT section as well; the indexes
are applied in a single step afterwards.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/333">#333</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.3-2"><span class="target" id="change-a859ff5818931ab962f46e2eaa8fe8fb"><strong>[bug] [tests]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a859ff5818931ab962f46e2eaa8fe8fb">¶</a></span><p>Added “pytest-xdist” as a tox dependency, so that the -n flag
in the test command works if this is not already installed.
Pull request courtesy Julien Danjou.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.8.3-3"><span class="target" id="change-f1ce3537f565a0627754e960e5ef6389"><strong>[bug] [autogenerate] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f1ce3537f565a0627754e960e5ef6389">¶</a></span><p>Fixed issue in PG server default comparison where model-side defaults
configured with Python unicode literals would leak the “u” character
from a <code class="docutils literal notranslate"><span class="pre">repr()</span></code> into the SQL used for comparison, creating an invalid
SQL expression, as the server-side comparison feature in PG currently
repurposes the autogenerate Python rendering feature to get a quoted
version of a plain string default.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/324">#324</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.8.2">
<h2 class="release-version">0.8.2<a class="headerlink" href="#change-0.8.2" title="Permalink to this headline">¶</a></h2>
Released: August 25, 2015<section id="change-0.8.2-bug">
<h3>bug<a class="headerlink" href="#change-0.8.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.2-0"><span class="target" id="change-04201961f35a53545533641443935f52"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-04201961f35a53545533641443935f52">¶</a></span><p>Added workaround in new foreign key option detection feature for
MySQL’s consideration of the “RESTRICT” option being the default,
for which no value is reported from the database; the MySQL impl now
corrects for when the model reports RESTRICT but the database reports
nothing.   A similar rule is in the default FK comparison to accommodate
for the default “NO ACTION” setting being present in the model but not
necessarily reported by the database, or vice versa.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/321">#321</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.8.1">
<h2 class="release-version">0.8.1<a class="headerlink" href="#change-0.8.1" title="Permalink to this headline">¶</a></h2>
Released: August 22, 2015<section id="change-0.8.1-feature">
<h3>feature<a class="headerlink" href="#change-0.8.1-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.1-0"><span class="target" id="change-33a7e29f698ee546a00a8637a6da8e0a"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-33a7e29f698ee546a00a8637a6da8e0a">¶</a></span><p>A custom <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.process_revision_directives" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.process_revision_directives</span></code></a>
hook can now generate op directives within the <a class="reference internal" href="api/operations.html#alembic.operations.ops.UpgradeOps" title="alembic.operations.ops.UpgradeOps"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpgradeOps</span></code></a>
and <a class="reference internal" href="api/operations.html#alembic.operations.ops.DowngradeOps" title="alembic.operations.ops.DowngradeOps"><code class="xref py py-class docutils literal notranslate"><span class="pre">DowngradeOps</span></code></a> containers that will be generated as Python
code even when the <code class="docutils literal notranslate"><span class="pre">--autogenerate</span></code> flag is False; provided that
<code class="docutils literal notranslate"><span class="pre">revision_environment=True</span></code>, the full render operation will be run
even in “offline” mode.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.8.1-1"><span class="target" id="change-0fbe5d57da5d0fc69adb44615b46a83f"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0fbe5d57da5d0fc69adb44615b46a83f">¶</a></span><p>Implemented support for autogenerate detection of changes in the
<code class="docutils literal notranslate"><span class="pre">ondelete</span></code>, <code class="docutils literal notranslate"><span class="pre">onupdate</span></code>, <code class="docutils literal notranslate"><span class="pre">initially</span></code> and <code class="docutils literal notranslate"><span class="pre">deferrable</span></code>
attributes of <code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code> objects on
SQLAlchemy backends that support these on reflection
(as of SQLAlchemy 1.0.8 currently Postgresql for all four,
MySQL for <code class="docutils literal notranslate"><span class="pre">ondelete</span></code> and  <code class="docutils literal notranslate"><span class="pre">onupdate</span></code> only).   A constraint object
that modifies these values will be reported as a “diff” and come out
as a drop/create of the constraint with the modified values.
The fields are ignored for backends which don’t reflect these
attributes (as of SQLA 1.0.8 this includes SQLite, Oracle, SQL Server,
others).</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/317">#317</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.8.1-bug">
<h3>bug<a class="headerlink" href="#change-0.8.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.1-2"><span class="target" id="change-7177e3bb51d5528e026f6e5ece6635d0"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-7177e3bb51d5528e026f6e5ece6635d0">¶</a></span><p>Repaired the render operation for the <a class="reference internal" href="api/operations.html#alembic.operations.ops.AlterColumnOp" title="alembic.operations.ops.AlterColumnOp"><code class="xref py py-class docutils literal notranslate"><span class="pre">ops.AlterColumnOp</span></code></a> object
to succeed when the “existing_type” field was not present.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.8.1-3"><span class="target" id="change-6efeaa9d5c7c3c9e5a9324b53289f374"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6efeaa9d5c7c3c9e5a9324b53289f374">¶</a></span><p>Fixed a regression 0.8 whereby the “multidb” environment template
failed to produce independent migration script segments for the
output template.  This was due to the reorganization of the script
rendering system for 0.8.  To accommodate this change, the
<a class="reference internal" href="api/operations.html#alembic.operations.ops.MigrationScript" title="alembic.operations.ops.MigrationScript"><code class="xref py py-class docutils literal notranslate"><span class="pre">MigrationScript</span></code></a> structure will in the case of multiple
calls to <a class="reference internal" href="api/runtime.html#alembic.runtime.migration.MigrationContext.run_migrations" title="alembic.runtime.migration.MigrationContext.run_migrations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MigrationContext.run_migrations()</span></code></a> produce lists
for the <a class="reference internal" href="api/operations.html#alembic.operations.ops.MigrationScript.upgrade_ops" title="alembic.operations.ops.MigrationScript.upgrade_ops"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MigrationScript.upgrade_ops</span></code></a> and
<a class="reference internal" href="api/operations.html#alembic.operations.ops.MigrationScript.downgrade_ops" title="alembic.operations.ops.MigrationScript.downgrade_ops"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MigrationScript.downgrade_ops</span></code></a> attributes; each <a class="reference internal" href="api/operations.html#alembic.operations.ops.UpgradeOps" title="alembic.operations.ops.UpgradeOps"><code class="xref py py-class docutils literal notranslate"><span class="pre">UpgradeOps</span></code></a>
and <a class="reference internal" href="api/operations.html#alembic.operations.ops.DowngradeOps" title="alembic.operations.ops.DowngradeOps"><code class="xref py py-class docutils literal notranslate"><span class="pre">DowngradeOps</span></code></a> instance keeps track of its own
<code class="docutils literal notranslate"><span class="pre">upgrade_token</span></code> and <code class="docutils literal notranslate"><span class="pre">downgrade_token</span></code>, and each are rendered
individually.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="api/autogenerate.html#autogen-customizing-multiengine-revision"><span class="std std-ref">Revision Generation with Multiple Engines / run_migrations() calls</span></a> - additional detail
on the workings of the
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.process_revision_directives" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.process_revision_directives</span></code></a>
parameter when multiple calls to <a class="reference internal" href="api/runtime.html#alembic.runtime.migration.MigrationContext.run_migrations" title="alembic.runtime.migration.MigrationContext.run_migrations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MigrationContext.run_migrations()</span></code></a>
are made.</p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/318">#318</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.8.0">
<h2 class="release-version">0.8.0<a class="headerlink" href="#change-0.8.0" title="Permalink to this headline">¶</a></h2>
Released: August 12, 2015<section id="change-0.8.0-feature">
<h3>feature<a class="headerlink" href="#change-0.8.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.0-0"><span class="target" id="change-6f7ad612c3971d2e335dfae3772c19e2"><strong>[feature] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6f7ad612c3971d2e335dfae3772c19e2">¶</a></span><p>Added new command <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">edit</span></code>.  This command takes the same
arguments as <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">show</span></code>, however runs the target script
file within $EDITOR.  Makes use of the <code class="docutils literal notranslate"><span class="pre">python-editor</span></code> library
in order to facilitate the handling of $EDITOR with reasonable
default behaviors across platforms.  Pull request courtesy
Michel Albert.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.8.0-1"><span class="target" id="change-901a190d686c8ec4db8eac0a54f3e24c"><strong>[feature] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-901a190d686c8ec4db8eac0a54f3e24c">¶</a></span><p>Added new multiple-capable argument <code class="docutils literal notranslate"><span class="pre">--depends-on</span></code> to the
<code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">revision</span></code> command, allowing <code class="docutils literal notranslate"><span class="pre">depends_on</span></code> to be
established at the command line level rather than having to edit
the file after the fact. <code class="docutils literal notranslate"><span class="pre">depends_on</span></code> identifiers may also be
specified as branch names at the command line or directly within
the migration file. The values may be specified as partial
revision numbers from the command line which will be resolved to
full revision numbers in the output file.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/311">#311</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.0-2"><span class="target" id="change-6be53f9aa3f50b5cd853006ced350e9c"><strong>[feature] [tests]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6be53f9aa3f50b5cd853006ced350e9c">¶</a></span><p>The default test runner via “python setup.py test” is now py.test.
nose still works via run_tests.py.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.8.0-3"><span class="target" id="change-6769b6b1cdb16ea73ca0c5eefb5718bf"><strong>[feature] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6769b6b1cdb16ea73ca0c5eefb5718bf">¶</a></span><p>The internal system for Alembic operations has been reworked to now
build upon an extensible system of operation objects.  New operations
can be added to the <code class="docutils literal notranslate"><span class="pre">op.</span></code> namespace, including that they are
available in custom autogenerate schemes.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="api/operations.html#operation-plugins"><span class="std std-ref">Operation Plugins</span></a></p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/302">#302</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.0-4"><span class="target" id="change-e308e49198036ceb6388349a30698e30"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e308e49198036ceb6388349a30698e30">¶</a></span><p>The internal system for autogenerate been reworked to build upon
the extensible system of operation objects present in
<a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/302">#302</a>.  As part of this change, autogenerate now produces
a full object graph representing a list of migration scripts to
be written as well as operation objects that will render all the
Python code within them; a new hook
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.process_revision_directives" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.process_revision_directives</span></code></a>
allows end-user code to fully customize what autogenerate will do,
including not just full manipulation of the Python steps to take
but also what file or files will be written and where.  Additionally,
autogenerate is now extensible as far as database objects compared
and rendered into scripts; any new operation directive can also be
registered into a series of hooks that allow custom database/model
comparison functions to run as well as to render new operation
directives into autogenerate scripts.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="api/autogenerate.html#alembic-autogenerate-toplevel"><span class="std std-ref">Autogeneration</span></a></p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/301">#301</a>, <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/306">#306</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.8.0-bug">
<h3>bug<a class="headerlink" href="#change-0.8.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.0-5"><span class="target" id="change-90cd5f97548a278d7629006845ea52a1"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-90cd5f97548a278d7629006845ea52a1">¶</a></span><p>Fixed bug in batch mode where the <code class="docutils literal notranslate"><span class="pre">batch_op.create_foreign_key()</span></code>
directive would be incorrectly rendered with the source table and
schema names in the argument list.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/315">#315</a></p>
</p>
</li>
<li><p class="caption" id="change-0.8.0-6"><span class="target" id="change-7e12baac010418ff738f6fdbd6b8fe4c"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-7e12baac010418ff738f6fdbd6b8fe4c">¶</a></span><p>Fixed bug where in the erroneous case that alembic_version contains
duplicate revisions, some commands would fail to process the
version history correctly and end up with a KeyError.   The fix
allows the versioning logic to proceed, however a clear error is
emitted later when attempting to update the alembic_version table.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/314">#314</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.8.0-misc">
<h3>misc<a class="headerlink" href="#change-0.8.0-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.8.0-7"><span class="target" id="change-1b8b04274957914b974cc92cf06abd19"><strong>[change] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1b8b04274957914b974cc92cf06abd19">¶</a></span><p>A range of positional argument names have been changed to be
clearer and more consistent across methods within the
<a class="reference internal" href="ops.html#alembic.operations.Operations" title="alembic.operations.Operations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Operations</span></code></a> namespace.   The most prevalent form of name change
is that the descriptive names <code class="docutils literal notranslate"><span class="pre">constraint_name</span></code> and <code class="docutils literal notranslate"><span class="pre">table_name</span></code>
are now used where previously the name <code class="docutils literal notranslate"><span class="pre">name</span></code> would be used.
This is in support of the newly modularized and extensible system of
operation objects in <a class="reference internal" href="api/operations.html#module-alembic.operations.ops" title="alembic.operations.ops"><code class="xref py py-mod docutils literal notranslate"><span class="pre">alembic.operations.ops</span></code></a>.
An argument translation layer is in place
across the <code class="docutils literal notranslate"><span class="pre">alembic.op</span></code> namespace that will ensure that named
argument calling styles that use the old names will continue to
function by transparently translating to the new names,
also emitting a warning.   This, along with the fact that these
arguments are positional in any case and aren’t normally
passed with an explicit name, should ensure that the
overwhelming majority of applications should be unaffected by this
change.   The <em>only</em> applications that are impacted are those that:</p>
<ol class="arabic simple">
<li><p>use the <a class="reference internal" href="ops.html#alembic.operations.Operations" title="alembic.operations.Operations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Operations</span></code></a> object directly in some way, rather
than calling upon the <code class="docutils literal notranslate"><span class="pre">alembic.op</span></code> namespace, and</p></li>
<li><p>invoke the methods on <a class="reference internal" href="ops.html#alembic.operations.Operations" title="alembic.operations.Operations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Operations</span></code></a> using named keyword
arguments for positional arguments like <code class="docutils literal notranslate"><span class="pre">table_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">constraint_name</span></code>, etc., which commonly were named <code class="docutils literal notranslate"><span class="pre">name</span></code>
as of 0.7.6.</p></li>
<li><p>any application that is using named keyword arguments in place
of positional argument for the recently added
<a class="reference internal" href="ops.html#alembic.operations.BatchOperations" title="alembic.operations.BatchOperations"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchOperations</span></code></a> object may also be affected.</p></li>
</ol>
<p>The naming changes are documented as “versionchanged” for 0.8.0:</p>
<ul>
<li><p><a class="reference internal" href="ops.html#alembic.operations.BatchOperations.create_check_constraint" title="alembic.operations.BatchOperations.create_check_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BatchOperations.create_check_constraint()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.BatchOperations.create_foreign_key" title="alembic.operations.BatchOperations.create_foreign_key"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BatchOperations.create_foreign_key()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.BatchOperations.create_index" title="alembic.operations.BatchOperations.create_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BatchOperations.create_index()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.BatchOperations.create_unique_constraint" title="alembic.operations.BatchOperations.create_unique_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BatchOperations.create_unique_constraint()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.BatchOperations.drop_constraint" title="alembic.operations.BatchOperations.drop_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BatchOperations.drop_constraint()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.BatchOperations.drop_index" title="alembic.operations.BatchOperations.drop_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BatchOperations.drop_index()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_check_constraint" title="alembic.operations.Operations.create_check_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_check_constraint()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_foreign_key" title="alembic.operations.Operations.create_foreign_key"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_foreign_key()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_primary_key" title="alembic.operations.Operations.create_primary_key"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_primary_key()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_index" title="alembic.operations.Operations.create_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_index()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_table" title="alembic.operations.Operations.create_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_table()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_unique_constraint" title="alembic.operations.Operations.create_unique_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_unique_constraint()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.drop_constraint" title="alembic.operations.Operations.drop_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_constraint()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.drop_index" title="alembic.operations.Operations.drop_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_index()</span></code></a></p></li>
<li><p><a class="reference internal" href="ops.html#alembic.operations.Operations.drop_table" title="alembic.operations.Operations.drop_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_table()</span></code></a></p></li>
</ul>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.7.7">
<h2 class="release-version">0.7.7<a class="headerlink" href="#change-0.7.7" title="Permalink to this headline">¶</a></h2>
Released: July 22, 2015<section id="change-0.7.7-feature">
<h3>feature<a class="headerlink" href="#change-0.7.7-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.7-0"><span class="target" id="change-5345e62733890d1bc611663400d27894"><strong>[feature] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5345e62733890d1bc611663400d27894">¶</a></span><p>Implemented support for <a class="reference internal" href="ops.html#alembic.operations.BatchOperations.create_primary_key" title="alembic.operations.BatchOperations.create_primary_key"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BatchOperations.create_primary_key()</span></code></a>
and <a class="reference internal" href="ops.html#alembic.operations.BatchOperations.create_check_constraint" title="alembic.operations.BatchOperations.create_check_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BatchOperations.create_check_constraint()</span></code></a>. Additionally,
table keyword arguments are copied from the original reflected table,
such as the “mysql_engine” keyword argument.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/305">#305</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.7.7-bug">
<h3>bug<a class="headerlink" href="#change-0.7.7-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.7-1"><span class="target" id="change-23781d425a6142eb7f28c01de4fc04f9"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-23781d425a6142eb7f28c01de4fc04f9">¶</a></span><p>Fixed critical issue where a complex series of branches/merges would
bog down the iteration algorithm working over redundant nodes for
millions of cycles.   An internal adjustment has been
made so that duplicate nodes are skipped within this iteration.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/310">#310</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.7-2"><span class="target" id="change-1fc11f1c8d36220cd82da7798a07e6da"><strong>[bug] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1fc11f1c8d36220cd82da7798a07e6da">¶</a></span><p>The <a class="reference internal" href="api/runtime.html#alembic.runtime.migration.MigrationContext.stamp" title="alembic.runtime.migration.MigrationContext.stamp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MigrationContext.stamp()</span></code></a> method, added as part of the
versioning refactor in 0.7 as a more granular version of
<a class="reference internal" href="api/commands.html#alembic.command.stamp" title="alembic.command.stamp"><code class="xref py py-func docutils literal notranslate"><span class="pre">command.stamp()</span></code></a>, now includes the “create the alembic_version
table if not present” step in the same way as the command version,
which was previously omitted.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/300">#300</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.7-3"><span class="target" id="change-f921a88332077dbbbcb670c73ba95dbf"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f921a88332077dbbbcb670c73ba95dbf">¶</a></span><p>Fixed bug where foreign key options including “onupdate”,
“ondelete” would not render within the <code class="docutils literal notranslate"><span class="pre">op.create_foreign_key()</span></code>
directive, even though they render within a full
<code class="docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code> directive.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/298">#298</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.7-4"><span class="target" id="change-015aee500693ad1802612dda63adf04c"><strong>[bug] [tests]</strong> <a class="changelog-reference headerlink reference internal" href="#change-015aee500693ad1802612dda63adf04c">¶</a></span><p>Repaired warnings that occur when running unit tests against
SQLAlchemy 1.0.5 or greater involving the “legacy_schema_aliasing”
flag.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.7.6">
<h2 class="release-version">0.7.6<a class="headerlink" href="#change-0.7.6" title="Permalink to this headline">¶</a></h2>
Released: May 5, 2015<section id="change-0.7.6-feature">
<h3>feature<a class="headerlink" href="#change-0.7.6-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.6-0"><span class="target" id="change-03efca581ba1c07c8338bb99bcbf4739"><strong>[feature] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-03efca581ba1c07c8338bb99bcbf4739">¶</a></span><p>Fixed bug where the case of multiple mergepoints that all
have the identical set of ancestor revisions would fail to be
upgradable, producing an assertion failure.   Merge points were
previously assumed to always require at least an UPDATE in
alembic_revision from one of the previous revs to the new one,
however in this case, if one of the mergepoints has already
been reached, the remaining mergepoints have no row to UPDATE therefore
they must do an INSERT of their target version.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/297">#297</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.6-1"><span class="target" id="change-27e4a2489a4ce0f2c626c9543267f2d9"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-27e4a2489a4ce0f2c626c9543267f2d9">¶</a></span><p>Added support for type comparison functions to be not just per
environment, but also present on the custom types themselves, by
supplying a method <code class="docutils literal notranslate"><span class="pre">compare_against_backend</span></code>.
Added a new documentation section <a class="reference internal" href="autogenerate.html#compare-types"><span class="std std-ref">Comparing Types</span></a> describing
type comparison fully.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/296">#296</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.6-2"><span class="target" id="change-063d0f4120250ad1ef764e5f81488242"><strong>[feature] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-063d0f4120250ad1ef764e5f81488242">¶</a></span><p>Added a new option
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.literal_binds" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.literal_binds</span></code></a>, which
will pass the <code class="docutils literal notranslate"><span class="pre">literal_binds</span></code> flag into the compilation of SQL
constructs when using “offline” mode.  This has the effect that
SQL objects like inserts, updates, deletes as well as textual
statements sent using <code class="docutils literal notranslate"><span class="pre">text()</span></code> will be compiled such that the dialect
will attempt to render literal values “inline” automatically.
Only a subset of types is typically supported; the
<a class="reference internal" href="ops.html#alembic.operations.Operations.inline_literal" title="alembic.operations.Operations.inline_literal"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.inline_literal()</span></code></a> construct remains as the construct
used to force a specific literal representation of a value.
The <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.literal_binds" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.literal_binds</span></code></a> flag
is added to the “offline” section of the <code class="docutils literal notranslate"><span class="pre">env.py</span></code> files generated
in new environments.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/255">#255</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.7.6-bug">
<h3>bug<a class="headerlink" href="#change-0.7.6-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.6-3"><span class="target" id="change-84e0c8c6a21044248b8be616265e22ae"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-84e0c8c6a21044248b8be616265e22ae">¶</a></span><p>Fully implemented the
<a class="reference internal" href="ops.html#alembic.operations.Operations.batch_alter_table.params.copy_from" title="alembic.operations.Operations.batch_alter_table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">copy_from</span></code></a> parameter for
batch mode, which previously was not functioning.  This allows
“batch mode” to be usable in conjunction with <code class="docutils literal notranslate"><span class="pre">--sql</span></code>.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/289">#289</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.6-4"><span class="target" id="change-7359836ab17b432f3cde6ce1a7c3c7e4"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-7359836ab17b432f3cde6ce1a7c3c7e4">¶</a></span><p>Repaired support for the <a class="reference internal" href="ops.html#alembic.operations.BatchOperations.create_index" title="alembic.operations.BatchOperations.create_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BatchOperations.create_index()</span></code></a>
directive, which was mis-named internally such that the operation
within a batch context could not proceed.   The create index
operation will proceed as part of a larger “batch table recreate”
operation only if
<a class="reference internal" href="ops.html#alembic.operations.Operations.batch_alter_table.params.recreate" title="alembic.operations.Operations.batch_alter_table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">recreate</span></code></a> is set to
“always”, or if the batch operation includes other instructions that
require a table recreate.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/287">#287</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.7.5">
<h2 class="release-version">0.7.5<a class="headerlink" href="#change-0.7.5" title="Permalink to this headline">¶</a></h2>
Released: March 19, 2015<section id="change-0.7.5-feature">
<h3>feature<a class="headerlink" href="#change-0.7.5-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.5-0"><span class="target" id="change-68f4a04edd159fbf2501a823d67df2ab"><strong>[feature] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-68f4a04edd159fbf2501a823d67df2ab">¶</a></span><p>Added a new feature <a class="reference internal" href="api/config.html#alembic.config.Config.attributes" title="alembic.config.Config.attributes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Config.attributes</span></code></a>, to help with the use
case of sharing state such as engines and connections on the outside
with a series of Alembic API calls; also added a new cookbook section
to describe this simple but pretty important use case.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cookbook.html#connection-sharing"><span class="std std-ref">Sharing a Connection with a Series of Migration Commands and Environments</span></a></p>
</div>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.7.5-1"><span class="target" id="change-32867b9a86ca1c3e6a5efc5018ad967d"><strong>[feature] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-32867b9a86ca1c3e6a5efc5018ad967d">¶</a></span><p>The format of the default <code class="docutils literal notranslate"><span class="pre">env.py</span></code> script has been refined a bit;
it now uses context managers not only for the scope of the transaction,
but also for connectivity from the starting engine.  The engine is also
now called a “connectable” in support of the use case of an external
connection being passed in.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.7.5-2"><span class="target" id="change-c517f2fafe0e5fa9ea5d277d0b0cb91f"><strong>[feature] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c517f2fafe0e5fa9ea5d277d0b0cb91f">¶</a></span><p>Added support for “alembic stamp” to work when given “heads” as an
argument, when multiple heads are present.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/267">#267</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.7.5-bug">
<h3>bug<a class="headerlink" href="#change-0.7.5-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.5-3"><span class="target" id="change-1b8448bdb477b9f3d222f3e43af1028b"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1b8448bdb477b9f3d222f3e43af1028b">¶</a></span><p>The <code class="docutils literal notranslate"><span class="pre">--autogenerate</span></code> option is not valid when used in conjunction
with “offline” mode, e.g. <code class="docutils literal notranslate"><span class="pre">--sql</span></code>.  This now raises a <code class="docutils literal notranslate"><span class="pre">CommandError</span></code>,
rather than failing more deeply later on.  Pull request courtesy
Johannes Erdfelt.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/266">#266</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.5-4"><span class="target" id="change-95b87d2b0273197c862d01665bc26128"><strong>[bug] [mssql] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-95b87d2b0273197c862d01665bc26128">¶</a></span><p>Fixed bug where the mssql DROP COLUMN directive failed to include
modifiers such as “schema” when emitting the DDL.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/284">#284</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.5-5"><span class="target" id="change-c128649439c1d280c9b07e878a8fc24f"><strong>[bug] [autogenerate] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c128649439c1d280c9b07e878a8fc24f">¶</a></span><p>Postgresql “functional” indexes are necessarily skipped from the
autogenerate process, as the SQLAlchemy backend currently does not
support reflection of these structures.   A warning is emitted
both from the SQLAlchemy backend as well as from the Alembic
backend for Postgresql when such an index is detected.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/282">#282</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.5-6"><span class="target" id="change-40b43f94dca3aeee601dd90579335cb6"><strong>[bug] [autogenerate] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-40b43f94dca3aeee601dd90579335cb6">¶</a></span><p>Fixed bug where MySQL backend would report dropped unique indexes
and/or constraints as both at the same time.  This is because
MySQL doesn’t actually have a “unique constraint” construct that
reports differently than a “unique index”, so it is present in both
lists.  The net effect though is that the MySQL backend will report
a dropped unique index/constraint as an index in cases where the object
was first created as a unique constraint, if no other information
is available to make the decision.  This differs from other backends
like Postgresql which can report on unique constraints and
unique indexes separately.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/276">#276</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.5-7"><span class="target" id="change-672bde6a4d0c6039a492706b5457d46b"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-672bde6a4d0c6039a492706b5457d46b">¶</a></span><p>Fixed bug where using a partial revision identifier as the
“starting revision” in <code class="docutils literal notranslate"><span class="pre">--sql</span></code> mode in a downgrade operation
would fail to resolve properly.</p>
<p>As a side effect of this change, the
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.get_starting_revision_argument" title="alembic.runtime.environment.EnvironmentContext.get_starting_revision_argument"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnvironmentContext.get_starting_revision_argument()</span></code></a>
method will return the “starting” revision in its originally-
given “partial” form in all cases, whereas previously when
running within the <code class="xref py py-meth docutils literal notranslate"><span class="pre">command.stamp()</span></code> command, it would have
been resolved to a full number before passing it to the
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext" title="alembic.runtime.environment.EnvironmentContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnvironmentContext</span></code></a>.  The resolution of this value to
a real revision number has basically been moved to a more fundamental
level within the offline migration process.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/269">#269</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.7.4">
<h2 class="release-version">0.7.4<a class="headerlink" href="#change-0.7.4" title="Permalink to this headline">¶</a></h2>
Released: January 12, 2015<section id="change-0.7.4-bug">
<h3>bug<a class="headerlink" href="#change-0.7.4-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.4-0"><span class="target" id="change-67b3d80132e3657ea4c9993c2d4f587d"><strong>[bug] [autogenerate] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-67b3d80132e3657ea4c9993c2d4f587d">¶</a></span><p>Repaired issue where a server default specified without <code class="docutils literal notranslate"><span class="pre">text()</span></code>
that represented a numeric or floating point (e.g. with decimal places)
value would fail in the Postgresql-specific check for “compare server
default”; as PG accepts the value with quotes in the table specification,
it’s still valid.  Pull request courtesy Dimitris Theodorou.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/241">#241</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.4-1"><span class="target" id="change-aa7772b6ea7a40a10180856865c276cc"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-aa7772b6ea7a40a10180856865c276cc">¶</a></span><p>The rendering of a <a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/constraints.html#sqlalchemy.schema.ForeignKeyConstraint" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code></a>
will now ensure that the names of the source and target columns are
the database-side name of each column, and not the value of the
<code class="docutils literal notranslate"><span class="pre">.key</span></code> attribute as may be set only on the Python side.
This is because Alembic generates the DDL for constraints
as standalone objects without the need to actually refer to an in-Python
<a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Table" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object, so there’s no step that
would resolve these Python-only key names to database column names.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/259">#259</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.4-2"><span class="target" id="change-1c70cc234b1cac2257cb8eb77879955e"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1c70cc234b1cac2257cb8eb77879955e">¶</a></span><p>Fixed bug in foreign key autogenerate where if the in-Python table
used custom column keys (e.g. using the <code class="docutils literal notranslate"><span class="pre">key='foo'</span></code> kwarg to
<code class="docutils literal notranslate"><span class="pre">Column</span></code>), the comparison of existing foreign keys to those specified
in the metadata would fail, as the reflected table would not have
these keys available which to match up.  Foreign key comparison for
autogenerate now ensures it’s looking at the database-side names
of the columns in all cases; this matches the same functionality
within unique constraints and indexes.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/260">#260</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.4-3"><span class="target" id="change-4deef0362ad86b8e59c1929b45ec8882"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4deef0362ad86b8e59c1929b45ec8882">¶</a></span><p>Fixed issue in autogenerate type rendering where types that belong
to modules that have the name “sqlalchemy” in them would be mistaken
as being part of the <code class="docutils literal notranslate"><span class="pre">sqlalchemy.</span></code> namespace.  Pull req courtesy
Bartosz Burclaf.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/261">#261</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.7.3">
<h2 class="release-version">0.7.3<a class="headerlink" href="#change-0.7.3" title="Permalink to this headline">¶</a></h2>
Released: December 30, 2014<section id="change-0.7.3-bug">
<h3>bug<a class="headerlink" href="#change-0.7.3-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.3-0"><span class="target" id="change-d7f431254183a5ab8d99d6360a4f00ed"><strong>[bug] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d7f431254183a5ab8d99d6360a4f00ed">¶</a></span><p>Fixed regression in new versioning system where upgrade / history
operation would fail on AttributeError if no version files were
present at all.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/258">#258</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.7.2">
<h2 class="release-version">0.7.2<a class="headerlink" href="#change-0.7.2" title="Permalink to this headline">¶</a></h2>
Released: December 18, 2014<section id="change-0.7.2-bug">
<h3>bug<a class="headerlink" href="#change-0.7.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.2-0"><span class="target" id="change-e7cd4687841cf3188b3bb304746e93d3"><strong>[bug] [autogenerate] [sqlite]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e7cd4687841cf3188b3bb304746e93d3">¶</a></span><p>Adjusted the SQLite backend regarding autogen of unique constraints
to work fully with the current SQLAlchemy 1.0, which now will report
on UNIQUE constraints that have no name.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.7.2-1"><span class="target" id="change-1c850c3af41ce4e37db0115c54ab7207"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1c850c3af41ce4e37db0115c54ab7207">¶</a></span><p>Fixed bug in batch where if the target table contained multiple
foreign keys to the same target table, the batch mechanics would
fail with a “table already exists” error.  Thanks for the help
on this from Lucas Kahlert.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/254">#254</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.2-2"><span class="target" id="change-eab1b8d1275c880ff0119018f4754bd0"><strong>[bug] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-eab1b8d1275c880ff0119018f4754bd0">¶</a></span><p>Fixed an issue where the MySQL routine to skip foreign-key-implicit
indexes would also catch unnamed unique indexes, as they would be
named after the column and look like the FK indexes.  Pull request
courtesy Johannes Erdfelt.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/251">#251</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.2-3"><span class="target" id="change-331f7c3132dbc3d8bc7fa5ad308bca8d"><strong>[bug] [mssql] [oracle]</strong> <a class="changelog-reference headerlink reference internal" href="#change-331f7c3132dbc3d8bc7fa5ad308bca8d">¶</a></span><p>Repaired a regression in both the MSSQL and Oracle dialects whereby
the overridden <code class="docutils literal notranslate"><span class="pre">_exec()</span></code> method failed to return a value, as is
needed now in the 0.7 series.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/253">#253</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.7.1">
<h2 class="release-version">0.7.1<a class="headerlink" href="#change-0.7.1" title="Permalink to this headline">¶</a></h2>
Released: December 3, 2014<section id="change-0.7.1-feature">
<h3>feature<a class="headerlink" href="#change-0.7.1-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.1-0"><span class="target" id="change-d6c235651452d863922773adcfa217e6"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d6c235651452d863922773adcfa217e6">¶</a></span><p>Support for autogenerate of FOREIGN KEY constraints has been added.
These are delivered within the autogenerate process in the same
manner as UNIQUE constraints, including <code class="docutils literal notranslate"><span class="pre">include_object</span></code> support.
Big thanks to Ann Kamyshnikova for doing the heavy lifting here.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/178">#178</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.1-1"><span class="target" id="change-fbaf6763200b1b917216a3f7e2d35701"><strong>[feature] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-fbaf6763200b1b917216a3f7e2d35701">¶</a></span><p>Added <a class="reference internal" href="ops.html#alembic.operations.Operations.batch_alter_table.params.naming_convention" title="alembic.operations.Operations.batch_alter_table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">naming_convention</span></code></a>
argument to <a class="reference internal" href="ops.html#alembic.operations.Operations.batch_alter_table" title="alembic.operations.Operations.batch_alter_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.batch_alter_table()</span></code></a>, as this is necessary
in order to drop foreign key constraints; these are often unnamed
on the target database, and in the case that they are named, SQLAlchemy
is as of the 0.9 series not including these names yet.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="batch.html#dropping-sqlite-foreign-keys"><span class="std std-ref">Dropping Unnamed or Named Foreign Key Constraints</span></a></p>
</div>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.7.1-2"><span class="target" id="change-d668b1bb4150b06a3caa876ddc16a352"><strong>[feature] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d668b1bb4150b06a3caa876ddc16a352">¶</a></span><p>Added two new arguments
<a class="reference internal" href="ops.html#alembic.operations.Operations.batch_alter_table.params.reflect_args" title="alembic.operations.Operations.batch_alter_table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Operations.batch_alter_table.reflect_args</span></code></a>
and <a class="reference internal" href="ops.html#alembic.operations.Operations.batch_alter_table.params.reflect_kwargs" title="alembic.operations.Operations.batch_alter_table"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Operations.batch_alter_table.reflect_kwargs</span></code></a>, so that
arguments may be passed directly to suit the
<a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Table" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
object that will be reflected.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="batch.html#batch-controlling-table-reflection"><span class="std std-ref">Controlling Table Reflection</span></a></p>
</div>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.7.1-bug">
<h3>bug<a class="headerlink" href="#change-0.7.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.1-3"><span class="target" id="change-417d8d55b2461360d5810789eb5e58c8"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-417d8d55b2461360d5810789eb5e58c8">¶</a></span><p>The <code class="docutils literal notranslate"><span class="pre">render_as_batch</span></code> flag was inadvertently hardcoded to <code class="docutils literal notranslate"><span class="pre">True</span></code>,
so all autogenerates were spitting out batch mode…this has been
fixed so that batch mode again is only when selected in env.py.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.7.1-4"><span class="target" id="change-19a6d3c26f2c15f65fec9642ffaf430c"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-19a6d3c26f2c15f65fec9642ffaf430c">¶</a></span><p>Fixed bug where the “source_schema” argument was not correctly passed
when calling <a class="reference internal" href="ops.html#alembic.operations.BatchOperations.create_foreign_key" title="alembic.operations.BatchOperations.create_foreign_key"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BatchOperations.create_foreign_key()</span></code></a>.  Pull
request courtesy Malte Marquarding.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.7.1-5"><span class="target" id="change-807ac0ed86f33666dd974ceec6c242ca"><strong>[bug] [batch]</strong> <a class="changelog-reference headerlink reference internal" href="#change-807ac0ed86f33666dd974ceec6c242ca">¶</a></span><p>Repaired the inspection, copying and rendering of CHECK constraints
and so-called “schema” types such as Boolean, Enum within the batch
copy system; the CHECK constraint will not be “doubled” when the table is
copied, and additionally the inspection of the CHECK constraint for
its member columns will no longer fail with an attribute error.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/249">#249</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.7.0">
<h2 class="release-version">0.7.0<a class="headerlink" href="#change-0.7.0" title="Permalink to this headline">¶</a></h2>
Released: November 24, 2014<section id="change-0.7.0-changed">
<h3>changed<a class="headerlink" href="#change-0.7.0-changed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.0-0"><span class="target" id="change-d29da7e6769afa23c882b725af8463df"><strong>[changed] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d29da7e6769afa23c882b725af8463df">¶</a></span><p>The <code class="docutils literal notranslate"><span class="pre">--head_only</span></code> option to the <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">current</span></code> command is
deprecated; the <code class="docutils literal notranslate"><span class="pre">current</span></code> command now lists just the version numbers
alone by default; use <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> to get at additional output.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-1"><span class="target" id="change-87498973d80028689b298195ab000c27"><strong>[changed] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-87498973d80028689b298195ab000c27">¶</a></span><p>The default value of the
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.user_module_prefix" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.user_module_prefix</span></code></a>
parameter is <strong>no longer the same as the SQLAlchemy prefix</strong>.
When omitted, user-defined types will now use the <code class="docutils literal notranslate"><span class="pre">__module__</span></code>
attribute of the type class itself when rendering in an
autogenerated module.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/229">#229</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-2"><span class="target" id="change-f27953254386cf132a96ce79b2c0cb0b"><strong>[changed] [compatibility]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f27953254386cf132a96ce79b2c0cb0b">¶</a></span><p>Minimum SQLAlchemy version is now 0.7.6, however at least
0.8.4 is strongly recommended.  The overhaul of the test suite
allows for fully passing tests on all SQLAlchemy versions
from 0.7.6 on forward.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.7.0-feature">
<h3>feature<a class="headerlink" href="#change-0.7.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.0-3"><span class="target" id="change-a34444a70439195e84311f01f6b0ee1b"><strong>[feature] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a34444a70439195e84311f01f6b0ee1b">¶</a></span><p>The “multiple heads / branches” feature has now landed.  This is
by far the most significant change Alembic has seen since its inception;
while the workflow of most commands hasn’t changed, and the format
of version files and the <code class="docutils literal notranslate"><span class="pre">alembic_version</span></code> table are unchanged as well,
a new suite of features opens up in the case where multiple version
files refer to the same parent, or to the “base”.  Merging of
branches, operating across distinct named heads, and multiple
independent bases are now all supported.   The feature incurs radical
changes to the internals of versioning and traversal, and should be
treated as “beta mode” for the next several subsequent releases
within 0.7.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="branches.html#branches"><span class="std std-ref">Working with Branches</span></a></p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/167">#167</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-4"><span class="target" id="change-0c25b7600787adc0f81611e49788d3de"><strong>[feature] [versioning]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0c25b7600787adc0f81611e49788d3de">¶</a></span><p>In conjunction with support for multiple independent bases, the
specific version directories are now also configurable to include
multiple, user-defined directories.   When multiple directories exist,
the creation of a revision file with no down revision requires
that the starting directory is indicated; the creation of subsequent
revisions along that lineage will then automatically use that
directory for new files.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="branches.html#multiple-version-directories"><span class="std std-ref">Setting up Multiple Version Directories</span></a></p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/124">#124</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-5"><span class="target" id="change-db6f85bc76d41e8f551d4011bb3c4168"><strong>[feature] [operations] [sqlite]</strong> <a class="changelog-reference headerlink reference internal" href="#change-db6f85bc76d41e8f551d4011bb3c4168">¶</a></span><p>Added “move and copy” workflow, where a table to be altered is copied to
a new one with the new structure and the old one dropped, is now
implemented for SQLite as well as all database backends in general
using the new <a class="reference internal" href="ops.html#alembic.operations.Operations.batch_alter_table" title="alembic.operations.Operations.batch_alter_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.batch_alter_table()</span></code></a> system.   This
directive provides a table-specific operations context which gathers
column- and constraint-level mutations specific to that table, and
at the end of the context creates a new table combining the structure
of the old one with the given changes, copies data from old table to new,
and finally drops the old table,
renaming the new one to the existing name.  This is required for
fully featured SQLite migrations, as SQLite has very little support for the
traditional ALTER directive.   The batch directive
is intended to produce code that is still compatible with other databases,
in that the “move and copy” process only occurs for SQLite by default,
while still providing some level of sanity to SQLite’s
requirement by allowing multiple table mutation operations to
proceed within one “move and copy” as well as providing explicit
control over when this operation actually occurs.  The “move and copy”
feature may be optionally applied to other backends as well, however
dealing with referential integrity constraints from other tables must
still be handled explicitly.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="batch.html#batch-migrations"><span class="std std-ref">Running “Batch” Migrations for SQLite and Other Databases</span></a></p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/21">#21</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-6"><span class="target" id="change-dec3009a090c21082e7f576b0a4653a4"><strong>[feature] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-dec3009a090c21082e7f576b0a4653a4">¶</a></span><p>Relative revision identifiers as used with <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">upgrade</span></code>,
<code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">downgrade</span></code> and <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">history</span></code> can be combined with
specific revisions as well, e.g. <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">upgrade</span> <span class="pre">ae10+3</span></code>, to produce
a migration target relative to the given exact version.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-7"><span class="target" id="change-4efddca1a4935691140cffea05fbb63c"><strong>[feature] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4efddca1a4935691140cffea05fbb63c">¶</a></span><p>New commands added: <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">show</span></code>, <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">heads</span></code> and
<code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">merge</span></code>.  Also, a new option <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> has been
added to  several informational commands, such as <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">history</span></code>,
<code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">current</span></code>, <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">branches</span></code>, and <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">heads</span></code>.
<code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">revision</span></code> also contains several new options used
within the new branch management system.    The output of commands has
been altered in many cases to support new fields and attributes;
the <code class="docutils literal notranslate"><span class="pre">history</span></code> command in particular now returns it’s “verbose” output
only if <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> is sent; without this flag it reverts to it’s
older behavior of short line items (which was never changed in the docs).</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-8"><span class="target" id="change-3ad5c14959029aa2a8dc9c4b443cd625"><strong>[feature] [config]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3ad5c14959029aa2a8dc9c4b443cd625">¶</a></span><p>Added new argument <a class="reference internal" href="api/config.html#alembic.config.Config.params.config_args" title="alembic.config.Config"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Config.config_args</span></code></a>, allows a dictionary
of replacement variables to be passed which will serve as substitution
values when an API-produced <a class="reference internal" href="api/config.html#alembic.config.Config" title="alembic.config.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> consumes the <code class="docutils literal notranslate"><span class="pre">.ini</span></code>
file.  Pull request courtesy Noufal Ibrahim.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-9"><span class="target" id="change-1ab0d6e9d0e6ec90e38ef38bb47269b4"><strong>[feature] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1ab0d6e9d0e6ec90e38ef38bb47269b4">¶</a></span><p>The <a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Table" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object is now returned when
the <a class="reference internal" href="ops.html#alembic.operations.Operations.create_table" title="alembic.operations.Operations.create_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_table()</span></code></a> method is used.  This <code class="docutils literal notranslate"><span class="pre">Table</span></code>
is suitable for use in subsequent SQL operations, in particular
the <a class="reference internal" href="ops.html#alembic.operations.Operations.bulk_insert" title="alembic.operations.Operations.bulk_insert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.bulk_insert()</span></code></a> operation.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/205">#205</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-10"><span class="target" id="change-f82542103269627ada2c618df1ed5c87"><strong>[feature] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f82542103269627ada2c618df1ed5c87">¶</a></span><p>Indexes and unique constraints are now included in the
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_object" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_object</span></code></a> hook.
Indexes are sent with type <code class="docutils literal notranslate"><span class="pre">&quot;index&quot;</span></code> and unique constraints with
type <code class="docutils literal notranslate"><span class="pre">&quot;unique_constraint&quot;</span></code>.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/203">#203</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-11"><span class="target" id="change-7ac4c12c9bf52594da3181db6595ac79"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-7ac4c12c9bf52594da3181db6595ac79">¶</a></span><p>SQLAlchemy’s testing infrastructure is now used to run tests.
This system supports both nose and pytest and opens the way
for Alembic testing to support any number of backends, parallel
testing, and 3rd party dialect testing.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.7.0-bug">
<h3>bug<a class="headerlink" href="#change-0.7.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.7.0-12"><span class="target" id="change-f15e1e4ee535baa37b7322f3a29eec25"><strong>[bug] [commands]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f15e1e4ee535baa37b7322f3a29eec25">¶</a></span><p>The <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">revision</span></code> command accepts the <code class="docutils literal notranslate"><span class="pre">--sql</span></code> option to
suit some very obscure use case where the <code class="docutils literal notranslate"><span class="pre">revision_environment</span></code>
flag is set up, so that <code class="docutils literal notranslate"><span class="pre">env.py</span></code> is run when <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">revision</span></code>
is run even though autogenerate isn’t specified.   As this flag is
otherwise confusing, error messages are now raised if
<code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">revision</span></code> is invoked with both <code class="docutils literal notranslate"><span class="pre">--sql</span></code> and
<code class="docutils literal notranslate"><span class="pre">--autogenerate</span></code> or with <code class="docutils literal notranslate"><span class="pre">--sql</span></code> without
<code class="docutils literal notranslate"><span class="pre">revision_environment</span></code> being set.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/248">#248</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-13"><span class="target" id="change-b6ed2c44086e4d8c38da44bababd660e"><strong>[bug] [autogenerate] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-b6ed2c44086e4d8c38da44bababd660e">¶</a></span><p>Added a rule for Postgresql to not render a “drop unique” and “drop index”
given the same name; for now it is assumed that the “index” is the
implicit one Postgreql generates.   Future integration with
new SQLAlchemy 1.0 features will improve this to be more
resilient.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/247">#247</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-14"><span class="target" id="change-4ae0ee2ba481ff390459892a4a37c0f3"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4ae0ee2ba481ff390459892a4a37c0f3">¶</a></span><p>A change in the ordering when columns and constraints are dropped;
autogenerate will now place the “drop constraint” calls <em>before</em>
the “drop column” calls, so that columns involved in those constraints
still exist when the constraint is dropped.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/247">#247</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-15"><span class="target" id="change-2805c3d5a2d66fe24e3d6edb285dec92"><strong>[bug] [oracle]</strong> <a class="changelog-reference headerlink reference internal" href="#change-2805c3d5a2d66fe24e3d6edb285dec92">¶</a></span><p>The Oracle dialect sets “transactional DDL” to False by default,
as Oracle does not support transactional DDL.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/245">#245</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-16"><span class="target" id="change-c5bf69f3054ddcff091d729dcba2ba0b"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c5bf69f3054ddcff091d729dcba2ba0b">¶</a></span><p>Fixed a variety of issues surrounding rendering of Python code that
contains unicode literals.  The first is that the “quoted_name” construct
that SQLAlchemy uses to represent table and column names as well
as schema names does not <code class="docutils literal notranslate"><span class="pre">repr()</span></code> correctly on Py2K when the value
contains unicode characters; therefore an explicit stringification is
added to these.  Additionally, SQL expressions such as server defaults
were not being generated in a unicode-safe fashion leading to decode
errors if server defaults contained non-ascii characters.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/243">#243</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-17"><span class="target" id="change-263802e51f07a564f2e80228ee50efa8"><strong>[bug] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-263802e51f07a564f2e80228ee50efa8">¶</a></span><p>The <a class="reference internal" href="ops.html#alembic.operations.Operations.add_column" title="alembic.operations.Operations.add_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.add_column()</span></code></a> directive will now additionally emit
the appropriate <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">INDEX</span></code> statement if the
<a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Column" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> object specifies <code class="docutils literal notranslate"><span class="pre">index=True</span></code>.
Pull request courtesy David Szotten.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/174">#174</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-18"><span class="target" id="change-438ea1be5699b9226b5ef0e1c298a0c0"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-438ea1be5699b9226b5ef0e1c298a0c0">¶</a></span><p>Bound parameters are now resolved as “literal” values within the
SQL expression inside of a CheckConstraint(), when rendering the SQL
as a text string; supported for SQLAlchemy 0.8.0 and forward.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/219">#219</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-19"><span class="target" id="change-e6c112ca1d9cdf5b60608d18c4f4b073"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e6c112ca1d9cdf5b60608d18c4f4b073">¶</a></span><p>Added a workaround for SQLAlchemy issue #3023 (fixed in 0.9.5) where
a column that’s part of an explicit PrimaryKeyConstraint would not
have its “nullable” flag set to False, thus producing a false
autogenerate.  Also added a related correction to MySQL which will
correct for MySQL’s implicit server default of ‘0’ when a NULL integer
column is turned into a primary key column.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/199">#199</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-20"><span class="target" id="change-23fb92aa3b8117c9d89ce3c87a45f0fe"><strong>[bug] [autogenerate] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-23fb92aa3b8117c9d89ce3c87a45f0fe">¶</a></span><p>Repaired issue related to the fix for #208 and others; a composite
foreign key reported by MySQL would cause a KeyError as Alembic
attempted to remove MySQL’s implicitly generated indexes from the
autogenerate list.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/240">#240</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-21"><span class="target" id="change-5ca7ae6aa537988e7d02beda23acae3e"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5ca7ae6aa537988e7d02beda23acae3e">¶</a></span><p>If the “alembic_version” table is present in the target metadata,
autogenerate will skip this also.  Pull request courtesy
Dj Gilcrease.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/28">#28</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-22"><span class="target" id="change-40ae1af5952dbe3b749bac486e208583"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-40ae1af5952dbe3b749bac486e208583">¶</a></span><p>The <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.version_table" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.version_table</span></code></a>
and <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.version_table_schema" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.version_table_schema</span></code></a>
arguments are now honored during the autogenerate process, such that
these names will be used as the “skip” names on both the database
reflection and target metadata sides.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/77">#77</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-23"><span class="target" id="change-1d63826fda64150da1fe33662c38ca22"><strong>[bug] [templates]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1d63826fda64150da1fe33662c38ca22">¶</a></span><p>Revision files are now written out using the <code class="docutils literal notranslate"><span class="pre">'wb'</span></code> modifier to
<code class="docutils literal notranslate"><span class="pre">open()</span></code>, since Mako reads the templates with <code class="docutils literal notranslate"><span class="pre">'rb'</span></code>, thus preventing
CRs from being doubled up as has been observed on windows.  The encoding
of the output now defaults to ‘utf-8’, which can be configured using
a newly added config file parameter <code class="docutils literal notranslate"><span class="pre">output_encoding</span></code>.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/234">#234</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-24"><span class="target" id="change-5d25e097771fb68b6a7d50b2c3ff3b8e"><strong>[bug] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5d25e097771fb68b6a7d50b2c3ff3b8e">¶</a></span><p>Added support for use of the <a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/sqlelement.html#sqlalchemy.sql.expression.quoted_name" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">quoted_name</span></code></a>
construct when using the <code class="docutils literal notranslate"><span class="pre">schema</span></code> argument within operations.  This
allows a name containing a dot to be fully quoted, as well as to
provide configurable quoting on a per-name basis.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/230">#230</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-25"><span class="target" id="change-bf968f9f5fad2434ed503394651ec076"><strong>[bug] [autogenerate] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-bf968f9f5fad2434ed503394651ec076">¶</a></span><p>Added a routine by which the Postgresql Alembic dialect inspects
the server default of INTEGER/BIGINT columns as they are reflected
during autogenerate for the pattern <code class="docutils literal notranslate"><span class="pre">nextval(&lt;name&gt;...)</span></code> containing
a potential sequence name, then queries <code class="docutils literal notranslate"><span class="pre">pg_catalog</span></code> to see if this
sequence is “owned” by the column being reflected; if so, it assumes
this is a SERIAL or BIGSERIAL column and the server default is
omitted from the column reflection as well as any kind of
server_default comparison or rendering, along with an INFO message
in the logs indicating this has taken place. This allows SERIAL/BIGSERIAL
columns to keep the SEQUENCE from being unnecessarily present within
the autogenerate operation.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/73">#73</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-26"><span class="target" id="change-99d69e5327f8dd694fcf6001b77fb267"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-99d69e5327f8dd694fcf6001b77fb267">¶</a></span><p>The system by which autogenerate renders expressions within
a <a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/constraints.html#sqlalchemy.schema.Index" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>, the <code class="docutils literal notranslate"><span class="pre">server_default</span></code>
of <a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Column" title="(in SQLAlchemy v1.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>, and the
<code class="docutils literal notranslate"><span class="pre">existing_server_default</span></code> of
<a class="reference internal" href="ops.html#alembic.operations.Operations.alter_column" title="alembic.operations.Operations.alter_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.alter_column()</span></code></a> has been overhauled to anticipate
arbitrary SQLAlchemy SQL constructs, such as <code class="docutils literal notranslate"><span class="pre">func.somefunction()</span></code>,
<code class="docutils literal notranslate"><span class="pre">cast()</span></code>, <code class="docutils literal notranslate"><span class="pre">desc()</span></code>, and others.   The system does not, as might
be preferred, render the full-blown Python expression as originally
created within the application’s source code, as this would be exceedingly
complex and difficult.  Instead, it renders the SQL expression against
the target backend that’s subject to the autogenerate, and then
renders that SQL inside of a <a class="reference external" href="https://docs.sqlalchemy.org/en/14/core/sqlelement.html#sqlalchemy.sql.expression.text" title="(in SQLAlchemy v1.4)"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a>
construct as a literal SQL string.  This approach still has the
downside that the rendered SQL construct may not be backend-agnostic
in all cases, so there is still a need for manual intervention in that
small number of cases, but overall the majority of cases should work
correctly now.  Big thanks to Carlos Rivera for pull requests and
support on this.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/196">#196</a>, <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/197">#197</a>, <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/64">#64</a></p>
</p>
</li>
<li><p class="caption" id="change-0.7.0-27"><span class="target" id="change-35b9e45fd447fb83eba6120dab13bfbb"><strong>[bug] [operations]</strong> <a class="changelog-reference headerlink reference internal" href="#change-35b9e45fd447fb83eba6120dab13bfbb">¶</a></span><p>The “match” keyword is not sent to <code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKeyConstraint</span></code>
by <a class="reference internal" href="ops.html#alembic.operations.Operations.create_foreign_key" title="alembic.operations.Operations.create_foreign_key"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_foreign_key()</span></code></a> when SQLAlchemy 0.7 is in use;
this keyword was added to SQLAlchemy as of 0.8.0.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.6.7">
<h2 class="release-version">0.6.7<a class="headerlink" href="#change-0.6.7" title="Permalink to this headline">¶</a></h2>
Released: September 9, 2014<section id="change-0.6.7-feature">
<h3>feature<a class="headerlink" href="#change-0.6.7-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.7-0"><span class="target" id="change-367fd1b9fe1fe5d7c56408fa73ab418c"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-367fd1b9fe1fe5d7c56408fa73ab418c">¶</a></span><p>Added support for functional indexes when using the
<a class="reference internal" href="ops.html#alembic.operations.Operations.create_index" title="alembic.operations.Operations.create_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_index()</span></code></a> directive.   Within the list of columns,
the SQLAlchemy <code class="docutils literal notranslate"><span class="pre">text()</span></code> construct can be sent, embedding a literal
SQL expression; the <a class="reference internal" href="ops.html#alembic.operations.Operations.create_index" title="alembic.operations.Operations.create_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_index()</span></code></a> will perform some hackery
behind the scenes to get the <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code> construct to cooperate.
This works around some current limitations in <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>
which should be resolved on the SQLAlchemy side at some point.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/222">#222</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.6.7-bug">
<h3>bug<a class="headerlink" href="#change-0.6.7-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.7-1"><span class="target" id="change-be1e47b17da492587438fb8424adb7a1"><strong>[bug] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-be1e47b17da492587438fb8424adb7a1">¶</a></span><p>Fixed bug in MSSQL dialect where “rename table” wasn’t using
<code class="docutils literal notranslate"><span class="pre">sp_rename()</span></code> as is required on SQL Server.  Pull request courtesy
Łukasz Bołdys.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.6.6">
<h2 class="release-version">0.6.6<a class="headerlink" href="#change-0.6.6" title="Permalink to this headline">¶</a></h2>
Released: August 7, 2014<section id="change-0.6.6-feature">
<h3>feature<a class="headerlink" href="#change-0.6.6-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.6-0"><span class="target" id="change-d057961ce5b3254ebbbc9fcf8e533680"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d057961ce5b3254ebbbc9fcf8e533680">¶</a></span><p>Added a new accessor <a class="reference internal" href="api/runtime.html#alembic.runtime.migration.MigrationContext.config" title="alembic.runtime.migration.MigrationContext.config"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MigrationContext.config</span></code></a>, when used
in conjunction with a <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext" title="alembic.runtime.environment.EnvironmentContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnvironmentContext</span></code></a> and
<a class="reference internal" href="api/config.html#alembic.config.Config" title="alembic.config.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a>, this config will be returned.  Patch
courtesy Marc Abramowitz.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.6.6-bug">
<h3>bug<a class="headerlink" href="#change-0.6.6-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.6-1"><span class="target" id="change-fb1cdc0b0595b08864e2ebd72f685282"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-fb1cdc0b0595b08864e2ebd72f685282">¶</a></span><p>A file named <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> in the <code class="docutils literal notranslate"><span class="pre">versions/</span></code> directory is now
ignored by Alembic when the collection of version files is retrieved.
Pull request courtesy Michael Floering.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/95">#95</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.6-2"><span class="target" id="change-36ad882cb5e3ba518e933bec9ad8097f"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-36ad882cb5e3ba518e933bec9ad8097f">¶</a></span><p>Fixed Py3K bug where an attempt would be made to sort None against
string values when autogenerate would detect tables across multiple
schemas, including the default schema.  Pull request courtesy
paradoxxxzero.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.6-3"><span class="target" id="change-aebc3eaf30968bbd26c53659377d8aa4"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-aebc3eaf30968bbd26c53659377d8aa4">¶</a></span><p>Autogenerate render will render the arguments within a Table construct
using <code class="docutils literal notranslate"><span class="pre">*[...]</span></code> when the number of columns/elements is greater than
255.  Pull request courtesy Ryan P. Kelly.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.6-4"><span class="target" id="change-13e6dabbe64ea41e59509b94b0ca1e32"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-13e6dabbe64ea41e59509b94b0ca1e32">¶</a></span><p>Fixed bug where foreign key constraints would fail to render in
autogenerate when a schema name was present.  Pull request courtesy
Andreas Zeidler.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.6-5"><span class="target" id="change-5d9e3cf552242293705305168a87aa4b"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5d9e3cf552242293705305168a87aa4b">¶</a></span><p>Some deep-in-the-weeds fixes to try to get “server default” comparison
working better across platforms and expressions, in particular on
the Postgresql backend, mostly dealing with quoting/not quoting of various
expressions at the appropriate time and on a per-backend basis.
Repaired and tested support for such defaults as Postgresql interval
and array defaults.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/212">#212</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.6-6"><span class="target" id="change-afcf3a95ca0bfe87c9371ba9bef1d750"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-afcf3a95ca0bfe87c9371ba9bef1d750">¶</a></span><p>Liberalized even more the check for MySQL indexes that shouldn’t be
counted in autogenerate as “drops”; this time it’s been reported
that an implicitly created index might be named the same as a composite
foreign key constraint, and not the actual columns, so we now skip those
when detected as well.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/208">#208</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.6.6-misc">
<h3>misc<a class="headerlink" href="#change-0.6.6-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.6-7"><span class="target" id="change-777474403d509be94efdd14f3262e410"><strong>[enhancement]</strong> <a class="changelog-reference headerlink reference internal" href="#change-777474403d509be94efdd14f3262e410">¶</a></span><p>When a run of Alembic command line fails due to <code class="docutils literal notranslate"><span class="pre">CommandError</span></code>,
the output now prefixes the string with <code class="docutils literal notranslate"><span class="pre">&quot;FAILED:&quot;</span></code>, and the error
is also written to the log output using <code class="docutils literal notranslate"><span class="pre">log.error()</span></code>.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/209">#209</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.6.5">
<h2 class="release-version">0.6.5<a class="headerlink" href="#change-0.6.5" title="Permalink to this headline">¶</a></h2>
Released: May 3, 2014<section id="change-0.6.5-feature">
<h3>feature<a class="headerlink" href="#change-0.6.5-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.5-0"><span class="target" id="change-82b2f1589317c30a3bf32cbf7b4e089c"><strong>[feature] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-82b2f1589317c30a3bf32cbf7b4e089c">¶</a></span><p>Added new feature <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.transaction_per_migration" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.transaction_per_migration</span></code></a>,
which when True causes the BEGIN/COMMIT pair to incur for each migration
individually, rather than for the whole series of migrations.  This is
to assist with some database directives that need to be within individual
transactions, without the need to disable transactional DDL entirely.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/201">#201</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.6.5-bug">
<h3>bug<a class="headerlink" href="#change-0.6.5-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.5-1"><span class="target" id="change-08832fb2cc714d02fe5132ef43a318f5"><strong>[bug] [autogenerate] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-08832fb2cc714d02fe5132ef43a318f5">¶</a></span><p>This releases’ “autogenerate index detection” bug, when a MySQL table
includes an Index with the same name as a column, autogenerate reported
it as an “add” even though its not; this is because we ignore reflected
indexes of this nature due to MySQL creating them implicitly.  Indexes
that are named the same as a column are now ignored on
MySQL if we see that the backend is reporting that it already exists;
this indicates that we can still detect additions of these indexes
but not drops, as we cannot distinguish a backend index same-named
as the column as one that is user generated or mysql-generated.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/202">#202</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.5-2"><span class="target" id="change-dbb0806fb97da35ffe87ba5acf3651d4"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-dbb0806fb97da35ffe87ba5acf3651d4">¶</a></span><p>Fixed bug where the <code class="docutils literal notranslate"><span class="pre">include_object()</span></code> filter would not receive
the original <code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code> object when evaluating a database-only
column to be dropped; the object would not include the parent
<code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code> nor other aspects of the column that are important
for generating the “downgrade” case where the column is recreated.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/200">#200</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.5-3"><span class="target" id="change-24610c8aede24d249a1afcab632ffdef"><strong>[bug] [environment]</strong> <a class="changelog-reference headerlink reference internal" href="#change-24610c8aede24d249a1afcab632ffdef">¶</a></span><p>Fixed bug where <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.get_x_argument" title="alembic.runtime.environment.EnvironmentContext.get_x_argument"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnvironmentContext.get_x_argument()</span></code></a>
would fail if the <a class="reference internal" href="api/config.html#alembic.config.Config" title="alembic.config.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> in use didn’t actually
originate from a command line call.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/195">#195</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.5-4"><span class="target" id="change-66c78964c43f4efabe562c923a416922"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-66c78964c43f4efabe562c923a416922">¶</a></span><p>Fixed another bug regarding naming conventions, continuing
from <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/183">#183</a>, where add_index()
drop_index() directives would not correctly render the <code class="docutils literal notranslate"><span class="pre">f()</span></code>
construct when the index contained a convention-driven name.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/194">#194</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.6.4">
<h2 class="release-version">0.6.4<a class="headerlink" href="#change-0.6.4" title="Permalink to this headline">¶</a></h2>
Released: March 28, 2014<section id="change-0.6.4-feature">
<h3>feature<a class="headerlink" href="#change-0.6.4-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.4-0"><span class="target" id="change-1cec795b398f1046836fd19744767935"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1cec795b398f1046836fd19744767935">¶</a></span><p>The <a class="reference internal" href="api/commands.html#alembic.command.revision" title="alembic.command.revision"><code class="xref py py-func docutils literal notranslate"><span class="pre">command.revision()</span></code></a> command now returns the <a class="reference internal" href="api/script.html#alembic.script.Script" title="alembic.script.Script"><code class="xref py py-class docutils literal notranslate"><span class="pre">Script</span></code></a>
object corresponding to the newly generated revision.  From this
structure, one can get the revision id, the module documentation,
and everything else, for use in scripts that call upon this command.
Pull request courtesy Robbie Coomber.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.6.4-bug">
<h3>bug<a class="headerlink" href="#change-0.6.4-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.4-1"><span class="target" id="change-8d72b390933c9eeed92ce824dfea07ab"><strong>[bug] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8d72b390933c9eeed92ce824dfea07ab">¶</a></span><p>Added quoting to the table name when the special EXEC is run to
drop any existing server defaults or constraints when the
<a class="reference internal" href="api/ddl.html#alembic.ddl.impl.DefaultImpl.drop_column.params.mssql_drop_check" title="alembic.ddl.impl.DefaultImpl.drop_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">drop_column.mssql_drop_check</span></code></a> or
<a class="reference internal" href="api/ddl.html#alembic.ddl.impl.DefaultImpl.drop_column.params.mssql_drop_default" title="alembic.ddl.impl.DefaultImpl.drop_column"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">drop_column.mssql_drop_default</span></code></a>
arguments are used.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/186">#186</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.4-2"><span class="target" id="change-37a0a4b5af840eefcf7d0f2e1fff22f6"><strong>[bug] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-37a0a4b5af840eefcf7d0f2e1fff22f6">¶</a></span><p>Added/fixed support for MySQL “SET DEFAULT” / “DROP DEFAULT” phrases,
which will now be rendered if only the server default is changing
or being dropped (e.g. specify None to alter_column() to indicate
“DROP DEFAULT”).  Also added support for rendering MODIFY rather than
CHANGE when the column name isn’t changing.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/103">#103</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.4-3"><span class="target" id="change-02a2337216c3734fc205d6b50783e08e"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-02a2337216c3734fc205d6b50783e08e">¶</a></span><p>Added support for the <code class="docutils literal notranslate"><span class="pre">initially</span></code>, <code class="docutils literal notranslate"><span class="pre">match</span></code> keyword arguments
as well as dialect-specific keyword arguments to
<a class="reference internal" href="ops.html#alembic.operations.Operations.create_foreign_key" title="alembic.operations.Operations.create_foreign_key"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_foreign_key()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">tags</dt>
<dd class="field-odd"><p>feature</p>
</dd>
<dt class="field-even">tickets</dt>
<dd class="field-even"><p>163</p>
</dd>
</dl>
<p>Altered the support for “sourceless” migration files (e.g. only
.pyc or .pyo present) so that the flag “sourceless=true” needs to
be in alembic.ini for this behavior to take effect.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/190">#190</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.4-4"><span class="target" id="change-ae1e7d2785afd70303343b0a6f876572"><strong>[bug] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ae1e7d2785afd70303343b0a6f876572">¶</a></span><p>The feature that keeps on giving, index/unique constraint autogenerate
detection, has even more fixes, this time to accommodate database dialects
that both don’t yet report on unique constraints, but the backend
does report unique constraints as indexes.   The logic
Alembic uses to distinguish between “this is an index!” vs.
“this is a unique constraint that is also reported as an index!” has now
been further enhanced to not produce unwanted migrations when the dialect
is observed to not yet implement get_unique_constraints() (e.g. mssql).
Note that such a backend will no longer report index drops for unique
indexes, as these cannot be distinguished from an unreported unique
index.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/185">#185</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.4-5"><span class="target" id="change-8b2e57ac61a4493d86940abbc8167df2"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8b2e57ac61a4493d86940abbc8167df2">¶</a></span><p>Extensive changes have been made to more fully support SQLAlchemy’s new
naming conventions feature.  Note that while SQLAlchemy has added this
feature as of 0.9.2, some additional fixes in 0.9.4 are needed to
resolve some of the issues:</p>
<ol class="arabic simple">
<li><p>The <a class="reference internal" href="ops.html#alembic.operations.Operations" title="alembic.operations.Operations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Operations</span></code></a> object now takes into account the naming
conventions that are present on the <code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code> object that’s
associated using <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.target_metadata" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">target_metadata</span></code></a>.
When <a class="reference internal" href="ops.html#alembic.operations.Operations" title="alembic.operations.Operations"><code class="xref py py-class docutils literal notranslate"><span class="pre">Operations</span></code></a> renders a constraint directive like
<code class="docutils literal notranslate"><span class="pre">ADD</span> <span class="pre">CONSTRAINT</span></code>, it now will make use of this naming convention
when it produces its own temporary <code class="xref py py-class docutils literal notranslate"><span class="pre">MetaData</span></code> object.</p></li>
<li><p>Note however that the autogenerate feature in most cases generates
constraints like foreign keys and unique constraints with the
final names intact; the only exception are the constraints implicit
with a schema-type like Boolean or Enum.  In most of these cases,
the naming convention feature will not take effect for these constraints
and will instead use the given name as is, with one exception….</p></li>
<li><p>Naming conventions which use the <code class="docutils literal notranslate"><span class="pre">&quot;%(constraint_name)s&quot;</span></code> token, that
is, produce a new name that uses the original name as a component,
will still be pulled into the naming convention converter and be
converted.  The problem arises when autogenerate renders a constraint
with it’s already-generated name present in the migration file’s source
code, the name will be doubled up at render time due to the combination
of #1 and #2.  So to work around this, autogenerate now renders these
already-tokenized names using the new <a class="reference internal" href="ops.html#alembic.operations.Operations.f" title="alembic.operations.Operations.f"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.f()</span></code></a> component.
This component is only generated if <strong>SQLAlchemy 0.9.4</strong> or greater
is in use.</p></li>
</ol>
<p>Therefore it is highly recommended that an upgrade to Alembic 0.6.4
be accompanied by an upgrade of SQLAlchemy 0.9.4, if the new naming
conventions feature is used.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="naming.html#autogen-naming-conventions"><span class="std std-ref">Integration of Naming Conventions into Operations, Autogenerate</span></a></p>
</div>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/183">#183</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.4-6"><span class="target" id="change-3ed8c566a5744760031ab16b1223933f"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3ed8c566a5744760031ab16b1223933f">¶</a></span><p>Suppressed IOErrors which can raise when program output pipe
is closed under a program like <code class="docutils literal notranslate"><span class="pre">head</span></code>; however this only
works on Python 2.  On Python 3, there is not yet a known way to
suppress the BrokenPipeError warnings without prematurely terminating
the program via signals.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/160">#160</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.4-7"><span class="target" id="change-d8ad925bf390337cbb38b6fbefb8f545"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d8ad925bf390337cbb38b6fbefb8f545">¶</a></span><p>Fixed bug where <a class="reference internal" href="ops.html#alembic.operations.Operations.bulk_insert" title="alembic.operations.Operations.bulk_insert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.bulk_insert()</span></code></a> would not function
properly when <a class="reference internal" href="ops.html#alembic.operations.Operations.inline_literal" title="alembic.operations.Operations.inline_literal"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.inline_literal()</span></code></a> values were used,
either in –sql or non-sql mode.    The values will now render
directly in –sql mode.  For compatibility with “online” mode,
a new flag <a class="reference internal" href="ops.html#alembic.operations.Operations.bulk_insert.params.multiinsert" title="alembic.operations.Operations.bulk_insert"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">multiinsert</span></code></a>
can be set to False which will cause each parameter set to be
compiled and executed with individual INSERT statements.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/179">#179</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.4-8"><span class="target" id="change-d94fdbccfa3c17c2917e19c4f23f8b32"><strong>[bug] [py3k]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d94fdbccfa3c17c2917e19c4f23f8b32">¶</a></span><p>Fixed a failure of the system that allows “legacy keyword arguments”
to be understood, which arose as of a change in Python 3.4 regarding
decorators.  A workaround is applied that allows the code to work
across Python 3 versions.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/175">#175</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.6.3">
<h2 class="release-version">0.6.3<a class="headerlink" href="#change-0.6.3" title="Permalink to this headline">¶</a></h2>
Released: February 2, 2014<section id="change-0.6.3-feature">
<h3>feature<a class="headerlink" href="#change-0.6.3-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.3-0"><span class="target" id="change-551755ae8a5aa7d31976678bf04faf16"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-551755ae8a5aa7d31976678bf04faf16">¶</a></span><p>Added new argument
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.user_module_prefix" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.user_module_prefix</span></code></a>.
This prefix is applied when autogenerate renders a user-defined type,
which here is defined as any type that is from a module outside of the
<code class="docutils literal notranslate"><span class="pre">sqlalchemy.</span></code> hierarchy.   This prefix defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, in
which case the <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.sqlalchemy_module_prefix" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.sqlalchemy_module_prefix</span></code></a>
is used, thus preserving the current behavior.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/171">#171</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.3-1"><span class="target" id="change-f4b9dab7aa1559258ccce0c07b670731"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f4b9dab7aa1559258ccce0c07b670731">¶</a></span><p>The <a class="reference internal" href="api/script.html#alembic.script.ScriptDirectory" title="alembic.script.ScriptDirectory"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScriptDirectory</span></code></a> system that loads migration files
from a  <code class="docutils literal notranslate"><span class="pre">versions/</span></code> directory now supports so-called
“sourceless” operation,  where the <code class="docutils literal notranslate"><span class="pre">.py</span></code> files are not present
and instead <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> or <code class="docutils literal notranslate"><span class="pre">.pyo</span></code> files are directly present where
the <code class="docutils literal notranslate"><span class="pre">.py</span></code> files should be.  Note that while Python 3.3 has a
new system of locating <code class="docutils literal notranslate"><span class="pre">.pyc</span></code>/<code class="docutils literal notranslate"><span class="pre">.pyo</span></code> files within a directory
called <code class="docutils literal notranslate"><span class="pre">__pycache__</span></code> (e.g. PEP-3147), PEP-3147 maintains
support for the “source-less imports” use case, where the
<code class="docutils literal notranslate"><span class="pre">.pyc</span></code>/<code class="docutils literal notranslate"><span class="pre">.pyo</span></code> are in present in the “old” location, e.g. next
to the <code class="docutils literal notranslate"><span class="pre">.py</span></code> file; this is the usage that’s supported even when
running Python3.3.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/163">#163</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.6.3-bug">
<h3>bug<a class="headerlink" href="#change-0.6.3-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.3-2"><span class="target" id="change-8f1d37b9f0a00cf5988d065471a33ef4"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8f1d37b9f0a00cf5988d065471a33ef4">¶</a></span><p>Added a workaround for when we call <code class="docutils literal notranslate"><span class="pre">fcntl.ioctl()</span></code> to get at
<code class="docutils literal notranslate"><span class="pre">TERMWIDTH</span></code>; if the function returns zero, as is reported to occur
in some pseudo-ttys, the message wrapping system is disabled in the
same way as if <code class="docutils literal notranslate"><span class="pre">ioctl()</span></code> failed.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/172">#172</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.3-3"><span class="target" id="change-a4a58822612e56e3bd38e3bbc6ef443f"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a4a58822612e56e3bd38e3bbc6ef443f">¶</a></span><p>Added support for autogenerate covering the use case where <code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code>
objects specified in the metadata have an explicit <code class="docutils literal notranslate"><span class="pre">schema</span></code> attribute
whose name matches that of the connection’s default schema
(e.g. “public” for Postgresql).  Previously, it was assumed that “schema”
was <code class="docutils literal notranslate"><span class="pre">None</span></code> when it matched the “default” schema, now the comparison
adjusts for this.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/170">#170</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.3-4"><span class="target" id="change-5a17153f8a32571400b59ac4b3f62126"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5a17153f8a32571400b59ac4b3f62126">¶</a></span><p>The <a class="reference internal" href="api/autogenerate.html#alembic.autogenerate.compare_metadata" title="alembic.autogenerate.compare_metadata"><code class="xref py py-func docutils literal notranslate"><span class="pre">compare_metadata()</span></code></a> public API function now takes into
account the settings for
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_object" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_object</span></code></a>,
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_symbol" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_symbol</span></code></a>,
and <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_schemas" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">EnvironmentContext.configure.include_schemas</span></code></a>, in the
same way that the <code class="docutils literal notranslate"><span class="pre">--autogenerate</span></code> command does.  Pull
request courtesy Roman Podoliaka.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.3-5"><span class="target" id="change-a5967b3d1fb33cd181893d83eb3431de"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a5967b3d1fb33cd181893d83eb3431de">¶</a></span><p>Calling <code class="xref py py-func docutils literal notranslate"><span class="pre">bulk_insert()</span></code> with an empty list will not emit any
commands on the current connection.  This was already the case with
<code class="docutils literal notranslate"><span class="pre">--sql</span></code> mode, so is now the case with “online” mode.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/168">#168</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.3-6"><span class="target" id="change-9c0aaf2dd246f7ce94469201ff20b04e"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9c0aaf2dd246f7ce94469201ff20b04e">¶</a></span><p>Enabled schema support for index and unique constraint autodetection;
previously these were non-functional and could in some cases lead to
attribute errors.  Pull request courtesy Dimitris Theodorou.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.3-7"><span class="target" id="change-3753611dc2a39d1c40279d9466542710"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3753611dc2a39d1c40279d9466542710">¶</a></span><p>More fixes to index autodetection; indexes created with expressions
like DESC or functional indexes will no longer cause AttributeError
exceptions when attempting to compare the columns.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/164">#164</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.6.2">
<h2 class="release-version">0.6.2<a class="headerlink" href="#change-0.6.2" title="Permalink to this headline">¶</a></h2>
Released: Fri Dec 27 2013<section id="change-0.6.2-feature">
<h3>feature<a class="headerlink" href="#change-0.6.2-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.2-0"><span class="target" id="change-230e5662147d698eb044179aedd758a5"><strong>[feature] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-230e5662147d698eb044179aedd758a5">¶</a></span><p>Added new argument <code class="docutils literal notranslate"><span class="pre">mssql_drop_foreign_key</span></code> to
<a class="reference internal" href="ops.html#alembic.operations.Operations.drop_column" title="alembic.operations.Operations.drop_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_column()</span></code></a>.  Like <code class="docutils literal notranslate"><span class="pre">mssql_drop_default</span></code>
and <code class="docutils literal notranslate"><span class="pre">mssql_drop_check</span></code>, will do an inline lookup for a
single foreign key which applies to this column, and drop it.
For a column with more than one FK, you’d still need to explicitly
use <a class="reference internal" href="ops.html#alembic.operations.Operations.drop_constraint" title="alembic.operations.Operations.drop_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_constraint()</span></code></a> given the name,
even though only MSSQL has this limitation in the first place.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.6.2-bug">
<h3>bug<a class="headerlink" href="#change-0.6.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.2-1"><span class="target" id="change-aee87ad5e26501f6f72178e43c0071f7"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-aee87ad5e26501f6f72178e43c0071f7">¶</a></span><p>Autogenerate for <code class="docutils literal notranslate"><span class="pre">op.create_table()</span></code> will not include a
<code class="docutils literal notranslate"><span class="pre">PrimaryKeyConstraint()</span></code> that has no columns.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.2-2"><span class="target" id="change-e5e89e6d64436d86221ce330786ec931"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e5e89e6d64436d86221ce330786ec931">¶</a></span><p>Fixed bug in the not-internally-used <a class="reference internal" href="api/script.html#alembic.script.ScriptDirectory.get_base" title="alembic.script.ScriptDirectory.get_base"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ScriptDirectory.get_base()</span></code></a>
method which would fail if called on an empty versions directory.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.2-3"><span class="target" id="change-0e713ff458d492df51483d1b5482cdbe"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0e713ff458d492df51483d1b5482cdbe">¶</a></span><p>An almost-rewrite of the new unique constraint/index autogenerate
detection, to accommodate a variety of issues.  The emphasis is on
not generating false positives for those cases where no net change
is present, as these errors are the ones that impact all autogenerate
runs:</p>
<blockquote>
<div><ul>
<li><p>Fixed an issue with unique constraint autogenerate detection where
a named <code class="docutils literal notranslate"><span class="pre">UniqueConstraint</span></code> on both sides with column changes would
render with the “add” operation before the “drop”, requiring the
user to reverse the order manually.</p></li>
<li><p>Corrected for MySQL’s apparent addition of an implicit index
for a foreign key column, so that it doesn’t show up as “removed”.
This required that the index/constraint autogen system query the
dialect-specific implementation for special exceptions.</p></li>
<li><p>reworked the “dedupe” logic to accommodate MySQL’s bi-directional
duplication of unique indexes as unique constraints, and unique
constraints as unique indexes.  Postgresql’s slightly different
logic of duplicating unique constraints into unique indexes
continues to be accommodated as well.  Note that a unique index
or unique constraint removal on a backend that duplicates these may
show up as a distinct “remove_constraint()” / “remove_index()” pair,
which may need to be corrected in the post-autogenerate if multiple
backends are being supported.</p></li>
<li><p>added another dialect-specific exception to the SQLite backend
when dealing with unnamed unique constraints, as the backend can’t
currently report on constraints that were made with this technique,
hence they’d come out as “added” on every run.</p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">op.create_table()</span></code> directive will be auto-generated with
the <code class="docutils literal notranslate"><span class="pre">UniqueConstraint</span></code> objects inline, but will not double them
up with a separate <code class="docutils literal notranslate"><span class="pre">create_unique_constraint()</span></code> call, which may
have been occurring.  Indexes still get rendered as distinct
<code class="docutils literal notranslate"><span class="pre">op.create_index()</span></code> calls even when the corresponding table was
created in the same script.</p></li>
<li><p>the inline <code class="docutils literal notranslate"><span class="pre">UniqueConstraint</span></code> within <code class="docutils literal notranslate"><span class="pre">op.create_table()</span></code> includes
all the options like <code class="docutils literal notranslate"><span class="pre">deferrable</span></code>, <code class="docutils literal notranslate"><span class="pre">initially</span></code>, etc.  Previously
these weren’t rendering.</p></li>
</ul>
</div></blockquote>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/157">#157</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.2-4"><span class="target" id="change-a5728333532adfd1bc5d62b39798ce5c"><strong>[bug] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a5728333532adfd1bc5d62b39798ce5c">¶</a></span><p>The MSSQL backend will add the batch separator (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;GO&quot;</span></code>)
in <code class="docutils literal notranslate"><span class="pre">--sql</span></code> mode after the final <code class="docutils literal notranslate"><span class="pre">COMMIT</span></code> statement, to ensure
that statement is also processed in batch mode.  Courtesy
Derek Harland.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.6.1">
<h2 class="release-version">0.6.1<a class="headerlink" href="#change-0.6.1" title="Permalink to this headline">¶</a></h2>
Released: Wed Nov 27 2013<section id="change-0.6.1-feature">
<h3>feature<a class="headerlink" href="#change-0.6.1-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.1-0"><span class="target" id="change-73af9c713e70dbedca14caa1898b24bb"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-73af9c713e70dbedca14caa1898b24bb">¶</a></span><p>Expanded the size of the “slug” generated by “revision” to 40
characters, which is also configurable by new field
<code class="docutils literal notranslate"><span class="pre">truncate_slug_length</span></code>; and also split on the word rather than the
character; courtesy Frozenball.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.1-1"><span class="target" id="change-6013b903919340a579de5096e6623085"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6013b903919340a579de5096e6623085">¶</a></span><p>Support for autogeneration detection and rendering of indexes and
unique constraints has been added.  The logic goes through some effort
in order to differentiate between true unique constraints and
unique indexes, where there are some quirks on backends like Postgresql.
The effort here in producing the feature and tests is courtesy of IJL.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/107">#107</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.6.1-bug">
<h3>bug<a class="headerlink" href="#change-0.6.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.1-2"><span class="target" id="change-88dc9ccb41233be8b455a9fb51d5e49b"><strong>[bug] [mysql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-88dc9ccb41233be8b455a9fb51d5e49b">¶</a></span><p>Fixed bug where <code class="xref py py-func docutils literal notranslate"><span class="pre">op.alter_column()</span></code> in the MySQL dialect
would fail to apply quotes to column names that had mixed casing
or spaces.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/152">#152</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.1-3"><span class="target" id="change-c2178a0f5084e8fb15d3ee1cd4a15320"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c2178a0f5084e8fb15d3ee1cd4a15320">¶</a></span><p>Fixed the output wrapping for Alembic message output, so that
we either get the terminal width for “pretty printing” with
indentation, or if not we just output the text as is; in any
case the text won’t be wrapped too short.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/135">#135</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.1-4"><span class="target" id="change-d69814c69d36efeffe4c752ce0abaaa3"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d69814c69d36efeffe4c752ce0abaaa3">¶</a></span><p>Fixes to Py3k in-place compatibility regarding output encoding and related;
the use of the new io.* package introduced some incompatibilities on Py2k.
These should be resolved, due to the introduction of new adapter types
for translating from io.* to Py2k file types, StringIO types.
Thanks to Javier Santacruz for help with this.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.1-5"><span class="target" id="change-74efe224d5846b980546895432ed91c0"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-74efe224d5846b980546895432ed91c0">¶</a></span><p>Fixed py3k bug where the wrong form of <code class="docutils literal notranslate"><span class="pre">next()</span></code> was being called
when using the list_templates command.  Courtesy Chris Wilkes.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/145">#145</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.1-6"><span class="target" id="change-949fab900590ca5b0ddbfde83a0c4f09"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-949fab900590ca5b0ddbfde83a0c4f09">¶</a></span><p>Fixed bug introduced by new <code class="docutils literal notranslate"><span class="pre">include_object</span></code> argument where the
inspected column would be misinterpreted when using a user-defined
type comparison function, causing a KeyError or similar expression-related
error.  Fix courtesy Maarten van Schaik.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.1-7"><span class="target" id="change-6d738971da915e4a33c0e8055c4faa6a"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6d738971da915e4a33c0e8055c4faa6a">¶</a></span><p>Added the “deferrable” keyword argument to <code class="xref py py-func docutils literal notranslate"><span class="pre">op.create_foreign_key()</span></code>
so that <code class="docutils literal notranslate"><span class="pre">DEFERRABLE</span></code> constraint generation is supported; courtesy
Pedro Romano.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.1-8"><span class="target" id="change-5442bff8942adce65c56459dabc52133"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5442bff8942adce65c56459dabc52133">¶</a></span><p>Ensured that strings going to stdout go through an encode/decode phase,
so that any non-ASCII characters get to the output stream correctly
in both Py2k and Py3k.   Also added source encoding detection using
Mako’s parse_encoding() routine in Py2k so that the __doc__ of a
non-ascii revision file can be treated as unicode in Py2k.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/137">#137</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.6.0">
<h2 class="release-version">0.6.0<a class="headerlink" href="#change-0.6.0" title="Permalink to this headline">¶</a></h2>
Released: Fri July 19 2013<section id="change-0.6.0-feature">
<h3>feature<a class="headerlink" href="#change-0.6.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.0-0"><span class="target" id="change-e85aac89057d7ecbc7ff64a4b078459b"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e85aac89057d7ecbc7ff64a4b078459b">¶</a></span><p>Added new kw argument to <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnvironmentContext.configure()</span></code></a>
<code class="docutils literal notranslate"><span class="pre">include_object</span></code>.  This is a more flexible version of the
<code class="docutils literal notranslate"><span class="pre">include_symbol</span></code> argument which allows filtering of columns as well as tables
from the autogenerate process,
and in the future will also work for types, constraints and
other constructs.  The fully constructed schema object is passed,
including its name and type as well as a flag indicating if the object
is from the local application metadata or is reflected.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/101">#101</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.0-1"><span class="target" id="change-718040a480981a8de5ed3abaede6b37e"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-718040a480981a8de5ed3abaede6b37e">¶</a></span><p>The output of the <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">history</span></code> command is now
expanded to show information about each change on multiple
lines, including the full top message,
resembling the formatting of git log.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.0-2"><span class="target" id="change-22eb2ef73a6d1d21241dd76696605f47"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-22eb2ef73a6d1d21241dd76696605f47">¶</a></span><p>Added <a class="reference internal" href="api/config.html#alembic.config.Config.cmd_opts" title="alembic.config.Config.cmd_opts"><code class="xref py py-attr docutils literal notranslate"><span class="pre">alembic.config.Config.cmd_opts</span></code></a> attribute,
allows access to the <code class="docutils literal notranslate"><span class="pre">argparse</span></code> options passed to the
<code class="docutils literal notranslate"><span class="pre">alembic</span></code> runner.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.0-3"><span class="target" id="change-354fd496ba36170581ccca493196020a"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-354fd496ba36170581ccca493196020a">¶</a></span><p>Added new command line argument <code class="docutils literal notranslate"><span class="pre">-x</span></code>, allows extra arguments
to be appended to the command line which can be consumed
within an <code class="docutils literal notranslate"><span class="pre">env.py</span></code> script by looking at
<code class="docutils literal notranslate"><span class="pre">context.config.cmd_opts.x</span></code>, or more simply a new
method <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.get_x_argument" title="alembic.runtime.environment.EnvironmentContext.get_x_argument"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnvironmentContext.get_x_argument()</span></code></a>.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/120">#120</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.0-4"><span class="target" id="change-c079c00ed4644a2b1d013c1a56c5758c"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c079c00ed4644a2b1d013c1a56c5758c">¶</a></span><p>Added <code class="docutils literal notranslate"><span class="pre">-r</span></code> argument to <code class="docutils literal notranslate"><span class="pre">alembic</span> <span class="pre">history</span></code> command,
allows specification of <code class="docutils literal notranslate"><span class="pre">[start]:[end]</span></code> to view
a slice of history.  Accepts revision numbers, symbols
“base”, “head”, a new symbol “current” representing the
current migration, as well as relative ranges for one
side at a time (i.e. <code class="docutils literal notranslate"><span class="pre">-r-5:head</span></code>, <code class="docutils literal notranslate"><span class="pre">-rcurrent:+3</span></code>).
Courtesy Atsushi Odagiri for this feature.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.6.0-5"><span class="target" id="change-18f647f894ffa0b6a0932b815d8a3f64"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-18f647f894ffa0b6a0932b815d8a3f64">¶</a></span><p>Source base is now in-place for Python 2.6 through
3.3, without the need for 2to3.   Support for Python 2.5
and below has been dropped.   Huge thanks to
Hong Minhee for all the effort on this!</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/55">#55</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.6.0-bug">
<h3>bug<a class="headerlink" href="#change-0.6.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.0-6"><span class="target" id="change-67121f13cd1633d339ca8d3501a64835"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-67121f13cd1633d339ca8d3501a64835">¶</a></span><p>Added support for options like “name” etc. to be rendered
within CHECK constraints in autogenerate.  Courtesy
Sok Ann Yap.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/125">#125</a></p>
</p>
</li>
<li><p class="caption" id="change-0.6.0-7"><span class="target" id="change-2bd1c9b7a8cd58fda7933b1f8d517924"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-2bd1c9b7a8cd58fda7933b1f8d517924">¶</a></span><p>Repaired autogenerate rendering of ForeignKeyConstraint
to include use_alter argument, if present.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.6.0-misc">
<h3>misc<a class="headerlink" href="#change-0.6.0-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.6.0-8"><span class="target" id="change-8f52fd722bff10d1e76ed9c1e41951d0"><strong>[misc]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8f52fd722bff10d1e76ed9c1e41951d0">¶</a></span><p>Source repository has been moved from Mercurial to Git.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.5.0">
<h2 class="release-version">0.5.0<a class="headerlink" href="#change-0.5.0" title="Permalink to this headline">¶</a></h2>
Released: Thu Apr 4 2013<p><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Alembic 0.5.0 now requires at least
version 0.7.3 of SQLAlchemy to run properly.
Support for 0.6 has been dropped.</p>
</div>
</p>
<section id="change-0.5.0-feature">
<h3>feature<a class="headerlink" href="#change-0.5.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.5.0-0"><span class="target" id="change-7bcc8bee5be4b3648ef4267e30e5ab94"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-7bcc8bee5be4b3648ef4267e30e5ab94">¶</a></span><p>Added <code class="docutils literal notranslate"><span class="pre">version_table_schema</span></code> argument
to <a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnvironmentContext.configure()</span></code></a>,
complements the <code class="docutils literal notranslate"><span class="pre">version_table</span></code> argument to
set an optional remote schema for the version
table.  Courtesy Christian Blume.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/76">#76</a></p>
</p>
</li>
<li><p class="caption" id="change-0.5.0-1"><span class="target" id="change-44c3d7b8009510f527754b06796814ed"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-44c3d7b8009510f527754b06796814ed">¶</a></span><p>Added <code class="docutils literal notranslate"><span class="pre">output_encoding</span></code> option to
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnvironmentContext.configure()</span></code></a>,
used with <code class="docutils literal notranslate"><span class="pre">--sql</span></code> mode to apply an encoding
to the output stream.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/90">#90</a></p>
</p>
</li>
<li><p class="caption" id="change-0.5.0-2"><span class="target" id="change-66f93edf3a52f4a0a2d52b972af2c90f"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-66f93edf3a52f4a0a2d52b972af2c90f">¶</a></span><p>Added <a class="reference internal" href="ops.html#alembic.operations.Operations.create_primary_key" title="alembic.operations.Operations.create_primary_key"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_primary_key()</span></code></a>
operation, will genenerate an ADD CONSTRAINT
for a primary key.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/93">#93</a></p>
</p>
</li>
<li><p class="caption" id="change-0.5.0-3"><span class="target" id="change-06476e4633169136465535ba4cbcdd49"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-06476e4633169136465535ba4cbcdd49">¶</a></span><p>upgrade and downgrade commands will list the
first line of the docstring out next to the
version number.  Courtesy Hong Minhee.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/115">#115</a></p>
</p>
</li>
<li><p class="caption" id="change-0.5.0-4"><span class="target" id="change-d5785fa5012c5b4b900ce403cf69c2c1"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d5785fa5012c5b4b900ce403cf69c2c1">¶</a></span><p>Added –head-only option to “alembic current”,
will print current version plus the symbol
“(head)” if this version is the head or not.
Courtesy Charles-Axel Dein.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.5.0-5"><span class="target" id="change-94df06496a5f7f0e97278b19de40874f"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-94df06496a5f7f0e97278b19de40874f">¶</a></span><p>The rendering of any construct during autogenerate
can be customized, in particular to allow special rendering
for user-defined column, constraint subclasses, using new
<code class="docutils literal notranslate"><span class="pre">render_item</span></code> argument to
<a class="reference internal" href="api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure" title="alembic.runtime.environment.EnvironmentContext.configure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnvironmentContext.configure()</span></code></a>.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/108">#108</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.5.0-bug">
<h3>bug<a class="headerlink" href="#change-0.5.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.5.0-6"><span class="target" id="change-ae05f9f39c819ed9cef1962598186b2f"><strong>[bug] [postgresql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ae05f9f39c819ed9cef1962598186b2f">¶</a></span><p>Fixed format of RENAME for table that includes
schema with Postgresql; the schema name shouldn’t
be in the “TO” field.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/32">#32</a></p>
</p>
</li>
<li><p class="caption" id="change-0.5.0-7"><span class="target" id="change-3ceaed79e3eee38b675683a25b901c63"><strong>[bug] [mssql]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3ceaed79e3eee38b675683a25b901c63">¶</a></span><p>Fixed bug whereby double quoting would be applied
to target column name during an <code class="docutils literal notranslate"><span class="pre">sp_rename</span></code>
operation.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/109">#109</a></p>
</p>
</li>
<li><p class="caption" id="change-0.5.0-8"><span class="target" id="change-77934556af5d1f9af69a879cf7ad2858"><strong>[bug] [mysql] [sqlite]</strong> <a class="changelog-reference headerlink reference internal" href="#change-77934556af5d1f9af69a879cf7ad2858">¶</a></span><p>transactional_ddl flag for SQLite, MySQL dialects
set to False.  MySQL doesn’t support it,
SQLite does but current pysqlite driver does not.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/112">#112</a></p>
</p>
</li>
<li><p class="caption" id="change-0.5.0-9"><span class="target" id="change-aee549930b2cceefac966a434463ac0f"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-aee549930b2cceefac966a434463ac0f">¶</a></span><p>Autogenerate will render additional table keyword
arguments like “mysql_engine” and others within
op.create_table().</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/110">#110</a></p>
</p>
</li>
<li><p class="caption" id="change-0.5.0-10"><span class="target" id="change-f6193b4d3fa49d70a624c774180a67a7"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f6193b4d3fa49d70a624c774180a67a7">¶</a></span><p>Fixed bug whereby create_index()
would include in the constraint columns that
are added to all Table objects using events,
externally to the generation of the constraint.
This is the same issue that was fixed for unique
constraints in version 0.3.2.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.5.0-11"><span class="target" id="change-6e919cc46f4044ed08366ca619516b1d"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6e919cc46f4044ed08366ca619516b1d">¶</a></span><p>Worked around a backwards-incompatible regression in Python3.3
regarding argparse; running “alembic” with no arguments
now yields an informative error in py3.3 as with all previous versions.
Courtesy Andrey Antukh.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.5.0-12"><span class="target" id="change-6084ec2cdaea0d6f32ae9f918a592e90"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6084ec2cdaea0d6f32ae9f918a592e90">¶</a></span><p>A host of argument name changes within migration
operations for consistency.  Keyword arguments
will continue to work on the old name for backwards compatibility,
however required positional arguments will not:</p>
<blockquote>
<div><p><a class="reference internal" href="ops.html#alembic.operations.Operations.alter_column" title="alembic.operations.Operations.alter_column"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.alter_column()</span></code></a> - <code class="docutils literal notranslate"><span class="pre">name</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">new_column_name</span></code> - old
name will work for backwards compatibility.</p>
<p><a class="reference internal" href="ops.html#alembic.operations.Operations.create_index" title="alembic.operations.Operations.create_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.create_index()</span></code></a> - <code class="docutils literal notranslate"><span class="pre">tablename</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">table_name</span></code> -
argument is positional.</p>
<p><a class="reference internal" href="ops.html#alembic.operations.Operations.drop_index" title="alembic.operations.Operations.drop_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_index()</span></code></a> - <code class="docutils literal notranslate"><span class="pre">tablename</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">table_name</span></code> - old
name will work for backwards compatibility.</p>
<p><a class="reference internal" href="ops.html#alembic.operations.Operations.drop_constraint" title="alembic.operations.Operations.drop_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_constraint()</span></code></a> - <code class="docutils literal notranslate"><span class="pre">tablename</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">table_name</span></code> -
argument is positional.</p>
<p><a class="reference internal" href="ops.html#alembic.operations.Operations.drop_constraint" title="alembic.operations.Operations.drop_constraint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Operations.drop_constraint()</span></code></a> - <code class="docutils literal notranslate"><span class="pre">type</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">type_</span></code> - old
name will work for backwards compatibility</p>
</div></blockquote>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/104">#104</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.5.0-misc">
<h3>misc<a class="headerlink" href="#change-0.5.0-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.5.0-13"><span class="target" id="change-ea81e9cbb239d6be28134dc135a745e9"><strong>[change]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ea81e9cbb239d6be28134dc135a745e9">¶</a></span><p>SQLAlchemy 0.6 is no longer supported by Alembic - minimum version is 0.7.3,
full support is as of 0.7.9.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.4.2">
<h2 class="release-version">0.4.2<a class="headerlink" href="#change-0.4.2" title="Permalink to this headline">¶</a></h2>
Released: Fri Jan 11 2013<section id="change-0.4.2-feature">
<h3>feature<a class="headerlink" href="#change-0.4.2-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.4.2-0"><span class="target" id="change-d207f84c16109708f5cddc54f7722467"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d207f84c16109708f5cddc54f7722467">¶</a></span><p>Added a README.unittests with instructions for running the test
suite fully.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/96">#96</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.4.2-bug">
<h3>bug<a class="headerlink" href="#change-0.4.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.4.2-1"><span class="target" id="change-45a44bd6cfb1bc17ccb913636b67e518"><strong>[bug] [autogenerate]</strong> <a class="changelog-reference headerlink reference internal" href="#change-45a44bd6cfb1bc17ccb913636b67e518">¶</a></span><p>Fixed bug where autogenerate would fail if a Column
to be added to a table made use of the “.key” parameter.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/99">#99</a></p>
</p>
</li>
<li><p class="caption" id="change-0.4.2-2"><span class="target" id="change-05aaf6cacc7032ceb71f3582d8108f4d"><strong>[bug] [sqlite]</strong> <a class="changelog-reference headerlink reference internal" href="#change-05aaf6cacc7032ceb71f3582d8108f4d">¶</a></span><p>The “implicit” constraint generated by a
type such as Boolean or Enum will not generate an
ALTER statement when run on SQlite, which does not
support ALTER for the purpose of adding/removing
constraints separate from the column def itself.
While SQLite supports adding a CHECK constraint
at the column level, SQLAlchemy would need modification
to support this.
A warning is emitted indicating this
constraint cannot be added in this scenario.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/98">#98</a></p>
</p>
</li>
<li><p class="caption" id="change-0.4.2-3"><span class="target" id="change-d5f0baad696f586bf04d73400ee39907"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d5f0baad696f586bf04d73400ee39907">¶</a></span><p>Added a workaround to setup.py to prevent
“NoneType” error from occurring when
“setup.py test” is run.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/96">#96</a></p>
</p>
</li>
<li><p class="caption" id="change-0.4.2-4"><span class="target" id="change-2dfa99e708aed4b0abbad1a864bf5fc4"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-2dfa99e708aed4b0abbad1a864bf5fc4">¶</a></span><p>Added an append_constraint() step to each
condition within
test_autogenerate:AutogenRenderTest.test_render_fk_constraint_kwarg
if the SQLAlchemy version is less than 0.8, as ForeignKeyConstraint
does not auto-append prior to 0.8.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/96">#96</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.4.1">
<h2 class="release-version">0.4.1<a class="headerlink" href="#change-0.4.1" title="Permalink to this headline">¶</a></h2>
Released: Sun Dec 9 2012<section id="change-0.4.1-feature">
<h3>feature<a class="headerlink" href="#change-0.4.1-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.4.1-0"><span class="target" id="change-5d1492191e209fdc33b2e2d8e271e585"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5d1492191e209fdc33b2e2d8e271e585">¶</a></span><p>Explicit error message describing the case
when downgrade –sql is used without specifying
specific start/end versions.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/66">#66</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.4.1-bug">
<h3>bug<a class="headerlink" href="#change-0.4.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.4.1-1"><span class="target" id="change-4e3d73095ce733c33d91575ef55f659e"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4e3d73095ce733c33d91575ef55f659e">¶</a></span><p>Added support for autogenerate render of
ForeignKeyConstraint options onupdate,
ondelete, initially, and deferred.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/92">#92</a></p>
</p>
</li>
<li><p class="caption" id="change-0.4.1-2"><span class="target" id="change-b2375af17815f3cc722b670d5184a4cb"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-b2375af17815f3cc722b670d5184a4cb">¶</a></span><p>Autogenerate will include “autoincrement=False”
in the rendered table metadata
if this flag was set to false on the source
<code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code> object.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/94">#94</a></p>
</p>
</li>
<li><p class="caption" id="change-0.4.1-3"><span class="target" id="change-71a4a1da2935282b724147cda3b83236"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-71a4a1da2935282b724147cda3b83236">¶</a></span><p>Removed erroneous “emit_events” attribute
from operations.create_table() documentation.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/81">#81</a></p>
</p>
</li>
<li><p class="caption" id="change-0.4.1-4"><span class="target" id="change-83ea9fdb69e6700c2af5115a14f1e1b5"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-83ea9fdb69e6700c2af5115a14f1e1b5">¶</a></span><p>Fixed the minute component in file_template
which returned the month part of the create date.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.4.0">
<h2 class="release-version">0.4.0<a class="headerlink" href="#change-0.4.0" title="Permalink to this headline">¶</a></h2>
Released: Mon Oct 01 2012<section id="change-0.4.0-feature">
<h3>feature<a class="headerlink" href="#change-0.4.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.4.0-0"><span class="target" id="change-9b1299fcb16787d5a3edd744879d4f81"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9b1299fcb16787d5a3edd744879d4f81">¶</a></span><p>Support for tables in alternate schemas
has been added fully to all operations, as well as to
the autogenerate feature.  When using autogenerate,
specifying the flag include_schemas=True to
Environment.configure() will also cause autogenerate
to scan all schemas located by Inspector.get_schema_names(),
which is supported by <em>some</em> (but not all)
SQLAlchemy dialects including Postgresql.
<em>Enormous</em> thanks to Bruno Binet for a huge effort
in implementing as well as writing tests. .</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/33">#33</a></p>
</p>
</li>
<li><p class="caption" id="change-0.4.0-1"><span class="target" id="change-256bc913e99949e5f61598f615db8c50"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-256bc913e99949e5f61598f615db8c50">¶</a></span><p>The command line runner has been organized
into a reusable CommandLine object, so that other
front-ends can re-use the argument parsing built
in.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/70">#70</a></p>
</p>
</li>
<li><p class="caption" id="change-0.4.0-2"><span class="target" id="change-a2f7d3fc1d4dd8c17688312bbf743b75"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a2f7d3fc1d4dd8c17688312bbf743b75">¶</a></span><p>Added “stdout” option to Config, provides
control over where the “print” output of commands like
“history”, “init”, “current” etc. are sent.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/43">#43</a></p>
</p>
</li>
<li><p class="caption" id="change-0.4.0-3"><span class="target" id="change-4d004eb1dc79a217abe8c4b14b1eb8c1"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4d004eb1dc79a217abe8c4b14b1eb8c1">¶</a></span><p>Added support for alteration of MySQL
columns that have AUTO_INCREMENT, as well as enabling
this flag.  Courtesy Moriyoshi Koizumi.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.4.0-bug">
<h3>bug<a class="headerlink" href="#change-0.4.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.4.0-4"><span class="target" id="change-60fcb783e2619c2d3c7dff34807da8f2"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-60fcb783e2619c2d3c7dff34807da8f2">¶</a></span><p>Fixed the “multidb” template which was badly out
of date.   It now generates revision files using
the configuration to determine the different
upgrade_&lt;xyz&gt;() methods needed as well, instead of
needing to hardcode these.  Huge thanks to
BryceLohr for doing the heavy lifting here.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/71">#71</a></p>
</p>
</li>
<li><p class="caption" id="change-0.4.0-5"><span class="target" id="change-562d7c0c8922e49234572d05b4e8eb7f"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-562d7c0c8922e49234572d05b4e8eb7f">¶</a></span><p>Fixed the regexp that was checking for .py files
in the version directory to allow any .py file through.
Previously it was doing some kind of defensive checking,
probably from some early notions of how this directory
works, that was prohibiting various filename patterns
such as those which begin with numbers.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/72">#72</a></p>
</p>
</li>
<li><p class="caption" id="change-0.4.0-6"><span class="target" id="change-faef85831d9f0866054182696400548e"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-faef85831d9f0866054182696400548e">¶</a></span><p>Fixed MySQL rendering for server_default which
didn’t work if the server_default was a generated
SQL expression.  Courtesy Moriyoshi Koizumi.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.3.6">
<h2 class="release-version">0.3.6<a class="headerlink" href="#change-0.3.6" title="Permalink to this headline">¶</a></h2>
Released: Wed Aug 15 2012<section id="change-0.3.6-feature">
<h3>feature<a class="headerlink" href="#change-0.3.6-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.6-0"><span class="target" id="change-50b5e8b5db1d6da813197a308f978d92"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-50b5e8b5db1d6da813197a308f978d92">¶</a></span><p>Added include_symbol option to
EnvironmentContext.configure(),
specifies a callable which will include/exclude tables
in their entirety from the autogeneration process
based on name.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/27">#27</a></p>
</p>
</li>
<li><p class="caption" id="change-0.3.6-1"><span class="target" id="change-8bf61dc5da45349affc396c2d229ac65"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8bf61dc5da45349affc396c2d229ac65">¶</a></span><p>Added year, month, day, hour, minute, second
variables to file_template.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/59">#59</a></p>
</p>
</li>
<li><p class="caption" id="change-0.3.6-2"><span class="target" id="change-1ab161c769d09a63315ac32834ffacaf"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1ab161c769d09a63315ac32834ffacaf">¶</a></span><p>Added ‘primary’ to the list of constraint types
recognized for MySQL drop_constraint().</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.3.6-3"><span class="target" id="change-5fb90f5f2f96678fc971d3ab5c8a0efa"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5fb90f5f2f96678fc971d3ab5c8a0efa">¶</a></span><p>Added –sql argument to the “revision” command,
for the use case where the “revision_environment”
config option is being used but SQL access isn’t
desired.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.3.6-bug">
<h3>bug<a class="headerlink" href="#change-0.3.6-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.6-4"><span class="target" id="change-a4109feae5103c32fff5c87edd36c87a"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a4109feae5103c32fff5c87edd36c87a">¶</a></span><p>Repaired create_foreign_key() for
self-referential foreign keys, which weren’t working
at all.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.3.6-5"><span class="target" id="change-bfcc03669e1796b7305cff4bd5352cec"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-bfcc03669e1796b7305cff4bd5352cec">¶</a></span><p>’alembic’ command reports an informative
error message when the configuration is missing
the ‘script_directory’ key.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/63">#63</a></p>
</p>
</li>
<li><p class="caption" id="change-0.3.6-6"><span class="target" id="change-e2af8c0f5b9665f4875c0e7a303fd863"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e2af8c0f5b9665f4875c0e7a303fd863">¶</a></span><p>Fixes made to the constraints created/dropped
alongside so-called “schema” types such as
Boolean and Enum.  The create/drop constraint logic
does not kick in when using a dialect that doesn’t
use constraints for these types, such as postgresql,
even when existing_type is specified to
alter_column().  Additionally, the constraints
are not affected if existing_type is passed but
type_ is not, i.e. there’s no net change
in type.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/62">#62</a></p>
</p>
</li>
<li><p class="caption" id="change-0.3.6-7"><span class="target" id="change-93114c0a20ff7be167f63c8c2972dfd5"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-93114c0a20ff7be167f63c8c2972dfd5">¶</a></span><p>Improved error message when specifying
non-ordered revision identifiers to cover
the case when the “higher” rev is None,
improved message overall.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/66">#66</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.3.5">
<h2 class="release-version">0.3.5<a class="headerlink" href="#change-0.3.5" title="Permalink to this headline">¶</a></h2>
Released: Sun Jul 08 2012<section id="change-0.3.5-feature">
<h3>feature<a class="headerlink" href="#change-0.3.5-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.5-0"><span class="target" id="change-702c3ef26a6bbe78644e304cdf6c97dc"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-702c3ef26a6bbe78644e304cdf6c97dc">¶</a></span><p>Implemented SQL rendering for
CheckConstraint() within autogenerate upgrade,
including for literal SQL as well as SQL Expression
Language expressions.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.3.5-bug">
<h3>bug<a class="headerlink" href="#change-0.3.5-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.5-1"><span class="target" id="change-fba487fa7c2eb6a0aac1b479a4f4581b"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-fba487fa7c2eb6a0aac1b479a4f4581b">¶</a></span><p>Fixed issue whereby reflected server defaults
wouldn’t be quoted correctly; uses repr() now.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/31">#31</a></p>
</p>
</li>
<li><p class="caption" id="change-0.3.5-2"><span class="target" id="change-63991eb331c186489985b2961617f94a"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-63991eb331c186489985b2961617f94a">¶</a></span><p>Fixed issue whereby when autogenerate would
render create_table() on the upgrade side for a
table that has a Boolean type, an unnecessary
CheckConstraint() would be generated.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/58">#58</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.3.4">
<h2 class="release-version">0.3.4<a class="headerlink" href="#change-0.3.4" title="Permalink to this headline">¶</a></h2>
Released: Sat Jun 02 2012<section id="change-0.3.4-bug">
<h3>bug<a class="headerlink" href="#change-0.3.4-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.4-0"><span class="target" id="change-dbecb3724f5f321fb61f73677fbb91af"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-dbecb3724f5f321fb61f73677fbb91af">¶</a></span><p>Fixed command-line bug introduced by the
“revision_environment” feature.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.3.3">
<h2 class="release-version">0.3.3<a class="headerlink" href="#change-0.3.3" title="Permalink to this headline">¶</a></h2>
Released: Sat Jun 02 2012<section id="change-0.3.3-feature">
<h3>feature<a class="headerlink" href="#change-0.3.3-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.3-0"><span class="target" id="change-6ad1e20f5d28df802007006218e656f2"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6ad1e20f5d28df802007006218e656f2">¶</a></span><p>New config argument
“revision_environment=true”, causes env.py to
be run unconditionally when the “revision” command
is run, to support script.py.mako templates with
dependencies on custom “template_args”.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.3.3-1"><span class="target" id="change-b844b5824bf2a8994775e9ea199c302f"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-b844b5824bf2a8994775e9ea199c302f">¶</a></span><p>Added “template_args” option to configure()
so that an env.py can add additional arguments
to the template context when running the
“revision” command.  This requires either –autogenerate
or the configuration directive “revision_environment=true”.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.3.3-2"><span class="target" id="change-f86a13e1f5037e1613d8551fdfe3413c"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-f86a13e1f5037e1613d8551fdfe3413c">¶</a></span><p>Added version_table argument to
EnvironmentContext.configure(), allowing for the
configuration of the version table name.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/34">#34</a></p>
</p>
</li>
<li><p class="caption" id="change-0.3.3-3"><span class="target" id="change-4083dba0217c503213f2d5624b2eb68f"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4083dba0217c503213f2d5624b2eb68f">¶</a></span><p>Added support for “relative” migration
identifiers, i.e. “alembic upgrade +2”,
“alembic downgrade -1”.  Courtesy
Atsushi Odagiri for this feature.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.3.3-bug">
<h3>bug<a class="headerlink" href="#change-0.3.3-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.3-4"><span class="target" id="change-9b359b67f8c971c3e297f0e7a43961d6"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9b359b67f8c971c3e297f0e7a43961d6">¶</a></span><p>Added “type” argument to op.drop_constraint(),
and implemented full constraint drop support for
MySQL.  CHECK and undefined raise an error.
MySQL needs the constraint type
in order to emit a DROP CONSTRAINT.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/44">#44</a></p>
</p>
</li>
<li><p class="caption" id="change-0.3.3-5"><span class="target" id="change-6a2380fc3246033a4dc5b92bfbb4a912"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6a2380fc3246033a4dc5b92bfbb4a912">¶</a></span><p>Fixed bug whereby directories inside of
the template directories, such as __pycache__
on Pypy, would mistakenly be interpreted as
files which are part of the template.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/49">#49</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.3.2">
<h2 class="release-version">0.3.2<a class="headerlink" href="#change-0.3.2" title="Permalink to this headline">¶</a></h2>
Released: Mon Apr 30 2012<section id="change-0.3.2-feature">
<h3>feature<a class="headerlink" href="#change-0.3.2-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.2-0"><span class="target" id="change-11f35c8973f5b01ad5fa1a839697b59a"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-11f35c8973f5b01ad5fa1a839697b59a">¶</a></span><p>Basic support for Oracle added,
courtesy shgoh.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/40">#40</a></p>
</p>
</li>
<li><p class="caption" id="change-0.3.2-1"><span class="target" id="change-b354cc9151751dfccba00da896bc7e7f"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-b354cc9151751dfccba00da896bc7e7f">¶</a></span><p>Added support for UniqueConstraint
in autogenerate, courtesy Atsushi Odagiri</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.3.2-bug">
<h3>bug<a class="headerlink" href="#change-0.3.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.2-2"><span class="target" id="change-54479ea31f6f572c1a819096c163104e"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-54479ea31f6f572c1a819096c163104e">¶</a></span><p>Fixed support of schema-qualified
ForeignKey target in column alter operations,
courtesy Alexander Kolov.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.3.2-3"><span class="target" id="change-78b69d3937bf1c24df3ee1b3266dfa9c"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-78b69d3937bf1c24df3ee1b3266dfa9c">¶</a></span><p>Fixed bug whereby create_unique_constraint()
would include in the constraint columns that
are added to all Table objects using events,
externally to the generation of the constraint.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.3.1">
<h2 class="release-version">0.3.1<a class="headerlink" href="#change-0.3.1" title="Permalink to this headline">¶</a></h2>
Released: Sat Apr 07 2012<section id="change-0.3.1-bug">
<h3>bug<a class="headerlink" href="#change-0.3.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.1-0"><span class="target" id="change-e6bddcb7cfc7dd08ce1ebf56c4cd75f7"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e6bddcb7cfc7dd08ce1ebf56c4cd75f7">¶</a></span><p>bulk_insert() fixes:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>bulk_insert() operation was
not working most likely since the 0.2 series
when used with an engine.</p></li>
<li><p>Repaired bulk_insert() to complete when
used against a lower-case-t table and executing
with only one set of parameters, working
around SQLAlchemy bug #2461 in this regard.</p></li>
<li><p>bulk_insert() uses “inline=True” so that phrases
like RETURNING and such don’t get invoked for
single-row bulk inserts.</p></li>
<li><p>bulk_insert() will check that you’re passing
a list of dictionaries in, raises TypeError
if not detected.</p></li>
</ol>
</div></blockquote>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/41">#41</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.3.0">
<h2 class="release-version">0.3.0<a class="headerlink" href="#change-0.3.0" title="Permalink to this headline">¶</a></h2>
Released: Thu Apr 05 2012<section id="change-0.3.0-feature">
<h3>feature<a class="headerlink" href="#change-0.3.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.0-0"><span class="target" id="change-d74b8be921f581f9c8d83a854ac2e058"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d74b8be921f581f9c8d83a854ac2e058">¶</a></span><p>Added a bit of autogenerate to the
public API in the form of the function
alembic.autogenerate.compare_metadata.</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.3.0-misc">
<h3>misc<a class="headerlink" href="#change-0.3.0-misc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.3.0-1"><span class="target" id="change-9bea060194208b5b93a887ec9e9a4ea3"><strong>[general]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9bea060194208b5b93a887ec9e9a4ea3">¶</a></span><p>The focus of 0.3 is to clean up
and more fully document the public API of Alembic,
including better accessors on the MigrationContext
and ScriptDirectory objects.  Methods that are
not considered to be public on these objects have
been underscored, and methods which should be public
have been cleaned up and documented, including:</p>
<blockquote>
<div><p>MigrationContext.get_current_revision()
ScriptDirectory.iterate_revisions()
ScriptDirectory.get_current_head()
ScriptDirectory.get_heads()
ScriptDirectory.get_base()
ScriptDirectory.generate_revision()</p>
</div></blockquote>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.2.2">
<h2 class="release-version">0.2.2<a class="headerlink" href="#change-0.2.2" title="Permalink to this headline">¶</a></h2>
Released: Mon Mar 12 2012<section id="change-0.2.2-feature">
<h3>feature<a class="headerlink" href="#change-0.2.2-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.2.2-0"><span class="target" id="change-31e9ab1ef05dd2127cb4775df81aa2c4"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-31e9ab1ef05dd2127cb4775df81aa2c4">¶</a></span><p>Informative error message when op.XYZ
directives are invoked at module import time.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.2.2-1"><span class="target" id="change-1dff9e522d76403d9af885164fd284e9"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1dff9e522d76403d9af885164fd284e9">¶</a></span><p>Added execution_options parameter
to op.execute(), will call execution_options()
on the Connection before executing.</p>
<p>The immediate use case here is to allow
access to the new no_parameters option
in SQLAlchemy 0.7.6, which allows
some DBAPIs (psycopg2, MySQLdb) to allow
percent signs straight through without
escaping, thus providing cross-compatible
operation with DBAPI execution and
static script generation.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.2.2-2"><span class="target" id="change-6ecf74f311264ea5b943ed81cef59b41"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-6ecf74f311264ea5b943ed81cef59b41">¶</a></span><p>script_location can be interpreted
by pkg_resources.resource_filename(), if
it is a non-absolute URI that contains
colons.   This scheme is the same
one used by Pyramid.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/29">#29</a></p>
</p>
</li>
<li><p class="caption" id="change-0.2.2-3"><span class="target" id="change-eb02c33a6ae7ebdb1d15d6baa6908278"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-eb02c33a6ae7ebdb1d15d6baa6908278">¶</a></span><p>added missing support for
onupdate/ondelete flags for
ForeignKeyConstraint, courtesy Giacomo Bagnoli</p>
<p></p>
</p>
</li>
</ul>
</section>
<section id="change-0.2.2-bug">
<h3>bug<a class="headerlink" href="#change-0.2.2-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.2.2-4"><span class="target" id="change-3ac60363e69dba9d296a183fadb4f425"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3ac60363e69dba9d296a183fadb4f425">¶</a></span><p>Fixed inappropriate direct call to
util.err() and therefore sys.exit()
when Config failed to locate the
config file within library usage.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/35">#35</a></p>
</p>
</li>
<li><p class="caption" id="change-0.2.2-5"><span class="target" id="change-017cdecac20a7dd99654362880189d57"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-017cdecac20a7dd99654362880189d57">¶</a></span><p>Autogenerate will emit CREATE TABLE
and DROP TABLE directives according to
foreign key dependency order.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.2.2-6"><span class="target" id="change-e3e024ffb77c9436e5a43d11c291b072"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e3e024ffb77c9436e5a43d11c291b072">¶</a></span><p>implement ‘tablename’ parameter on
drop_index() as this is needed by some
backends.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.2.2-7"><span class="target" id="change-a57a474f392fc1f7773d8f095795c652"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a57a474f392fc1f7773d8f095795c652">¶</a></span><p>setup.py won’t install argparse if on
Python 2.7/3.2</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.2.2-8"><span class="target" id="change-e61d183980d6b843c73c9c00063e4b99"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-e61d183980d6b843c73c9c00063e4b99">¶</a></span><p>fixed a regression regarding an autogenerate
error message, as well as various glitches
in the Pylons sample template.  The Pylons sample
template requires that you tell it where to
get the Engine from now.  courtesy
Marcin Kuzminski</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/30">#30</a></p>
</p>
</li>
<li><p class="caption" id="change-0.2.2-9"><span class="target" id="change-8a840870ac091491f2f7ce78feb57536"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8a840870ac091491f2f7ce78feb57536">¶</a></span><p>drop_index() ensures a dummy column
is added when it calls “Index”, as SQLAlchemy
0.7.6 will warn on index with no column names.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.2.1">
<h2 class="release-version">0.2.1<a class="headerlink" href="#change-0.2.1" title="Permalink to this headline">¶</a></h2>
Released: Tue Jan 31 2012<section id="change-0.2.1-bug">
<h3>bug<a class="headerlink" href="#change-0.2.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.2.1-0"><span class="target" id="change-ddfa2f020fe4676dbc9ebb826761cedd"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ddfa2f020fe4676dbc9ebb826761cedd">¶</a></span><p>Fixed the generation of CHECK constraint,
regression from 0.2.0</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/26">#26</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.2.0">
<h2 class="release-version">0.2.0<a class="headerlink" href="#change-0.2.0" title="Permalink to this headline">¶</a></h2>
Released: Mon Jan 30 2012<section id="change-0.2.0-feature">
<h3>feature<a class="headerlink" href="#change-0.2.0-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.2.0-0"><span class="target" id="change-227a7aaca2dc2c2529e3f199acdec57a"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-227a7aaca2dc2c2529e3f199acdec57a">¶</a></span><p>API rearrangement allows everything
Alembic does to be represented by contextual
objects, including EnvironmentContext,
MigrationContext, and Operations.   Other
libraries and applications can now use
things like “alembic.op” without relying
upon global configuration variables.
The rearrangement was done such that
existing migrations should be OK,
as long as they use the pattern
of “from alembic import context” and
“from alembic import op”, as these
are now contextual objects, not modules.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/19">#19</a></p>
</p>
</li>
<li><p class="caption" id="change-0.2.0-1"><span class="target" id="change-5969574fd983fb44688382a6b7e4ade0"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5969574fd983fb44688382a6b7e4ade0">¶</a></span><p>The naming of revision files can
now be customized to be some combination
of “rev id” and “slug”, the latter of which
is based on the revision message.
By default, the pattern “&lt;rev&gt;_&lt;slug&gt;”
is used for new files.   New script files
should include the “revision” variable
for this to work, which is part of
the newer script.py.mako scripts.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/24">#24</a></p>
</p>
</li>
<li><p class="caption" id="change-0.2.0-2"><span class="target" id="change-11b37049b12c1fa41dd89a7576f4a02d"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-11b37049b12c1fa41dd89a7576f4a02d">¶</a></span><p>Can create alembic.config.Config
with no filename, use set_main_option()
to add values.  Also added set_section_option()
which will add sections.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/23">#23</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.2.0-bug">
<h3>bug<a class="headerlink" href="#change-0.2.0-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.2.0-3"><span class="target" id="change-4da1339450ed512b388fd6f98927beb5"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4da1339450ed512b388fd6f98927beb5">¶</a></span><p>env.py templates call
connection.close() to better support
programmatic usage of commands; use
NullPool in conjunction with create_engine()
as well so that no connection resources
remain afterwards.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/25">#25</a></p>
</p>
</li>
<li><p class="caption" id="change-0.2.0-4"><span class="target" id="change-a0b966d35927872805e4ab8873cc1ca2"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a0b966d35927872805e4ab8873cc1ca2">¶</a></span><p>fix the config.main() function to honor
the arguments passed, remove no longer used
“scripts/alembic” as setuptools creates this
for us.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/22">#22</a></p>
</p>
</li>
<li><p class="caption" id="change-0.2.0-5"><span class="target" id="change-463a9dae4494b0adcb3d210e3cbd9fd0"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-463a9dae4494b0adcb3d210e3cbd9fd0">¶</a></span><p>Fixed alteration of column type on
MSSQL to not include the keyword “TYPE”.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.1.1">
<h2 class="release-version">0.1.1<a class="headerlink" href="#change-0.1.1" title="Permalink to this headline">¶</a></h2>
Released: Wed Jan 04 2012<section id="change-0.1.1-feature">
<h3>feature<a class="headerlink" href="#change-0.1.1-feature" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.1.1-0"><span class="target" id="change-5e0ab0b4bb77cc02b03e4a045b207fbb"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5e0ab0b4bb77cc02b03e4a045b207fbb">¶</a></span><p>PyPy is supported.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.1-1"><span class="target" id="change-ec385420eb00e18aee59f0023a1d367a"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ec385420eb00e18aee59f0023a1d367a">¶</a></span><p>Python 2.5 is supported, needs
__future__.with_statement</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.1-2"><span class="target" id="change-1317d390fab9cd845fa5832e074e3be7"><strong>[feature]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1317d390fab9cd845fa5832e074e3be7">¶</a></span><p>Add alembic_module_prefix argument
to configure() to complement
sqlalchemy_module_prefix.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/18">#18</a></p>
</p>
</li>
</ul>
</section>
<section id="change-0.1.1-bug">
<h3>bug<a class="headerlink" href="#change-0.1.1-bug" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p class="caption" id="change-0.1.1-3"><span class="target" id="change-ace63702014ec05799d1d78c8b16791f"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-ace63702014ec05799d1d78c8b16791f">¶</a></span><p>Clean up file write operations so that
file handles are closed.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.1-4"><span class="target" id="change-01d57df3a5d28309b1f22c08ec7bb31e"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-01d57df3a5d28309b1f22c08ec7bb31e">¶</a></span><p>Fix autogenerate so that “pass” is
generated between the two comments
if no net migrations were present.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.1-5"><span class="target" id="change-7b771e8f748941c4fdbb6d56ed03a1db"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-7b771e8f748941c4fdbb6d56ed03a1db">¶</a></span><p>Fix autogenerate bug that prevented
correct reflection of a foreign-key
referenced table in the list of “to remove”.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/16">#16</a></p>
</p>
</li>
<li><p class="caption" id="change-0.1.1-6"><span class="target" id="change-fcf03a3cc5cb4c5192ef2b071199e5ff"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-fcf03a3cc5cb4c5192ef2b071199e5ff">¶</a></span><p>Fix bug where create_table() didn’t
handle self-referential foreign key
correctly</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/17">#17</a></p>
</p>
</li>
<li><p class="caption" id="change-0.1.1-7"><span class="target" id="change-c91501ec04034b80454cce278b392074"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-c91501ec04034b80454cce278b392074">¶</a></span><p>Default prefix for autogenerate
directives is “op.”, matching the
mako templates.</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/18">#18</a></p>
</p>
</li>
<li><p class="caption" id="change-0.1.1-8"><span class="target" id="change-3b9ff7bf53c5f2888f6c0d508866f95f"><strong>[bug]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3b9ff7bf53c5f2888f6c0d508866f95f">¶</a></span><p>fix quotes not being rendered in
ForeignKeConstraint during
autogenerate</p>
<p>References: <a class="reference external" href="https://github.com/sqlalchemy/alembic/issues/14">#14</a></p>
</p>
</li>
</ul>
</section>
</section>
<section id="change-0.1.0">
<h2 class="release-version">0.1.0<a class="headerlink" href="#change-0.1.0" title="Permalink to this headline">¶</a></h2>
Released: Wed Nov 30 2011<ul class="simple">
<li><p class="caption" id="change-0.1.0-0"><span class="target" id="change-d90468ce526135f320bc9756e9dec309"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d90468ce526135f320bc9756e9dec309">¶</a></span><p>Initial release.  Status of features:</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-1"><span class="target" id="change-827df2ddfd68bd78a423065c02a5603f"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-827df2ddfd68bd78a423065c02a5603f">¶</a></span><p>Alembic is used in at least one production
environment, but should still be considered
ALPHA LEVEL SOFTWARE as of this release,
particularly in that many features are expected
to be missing / unimplemented.   Major API
changes are not anticipated but for the moment
nothing should be assumed.</p>
<p>The author asks that you <em>please</em> report all
issues, missing features, workarounds etc.
to the bugtracker.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-2"><span class="target" id="change-19e53c2382ef1a7b5f9616a0eda0e90d"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-19e53c2382ef1a7b5f9616a0eda0e90d">¶</a></span><p>Python 3 is supported and has been tested.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-3"><span class="target" id="change-1f25deca2b5d7bb9554f35e025239f7d"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1f25deca2b5d7bb9554f35e025239f7d">¶</a></span><p>The “Pylons” and “MultiDB” environment templates
have not been directly tested - these should be
considered to be samples to be modified as
needed.   Multiple database support itself
is well tested, however.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-4"><span class="target" id="change-8a35e494319a1955f606683d245f947d"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-8a35e494319a1955f606683d245f947d">¶</a></span><p>Postgresql and MS SQL Server environments
have been tested for several weeks in a production
environment.  In particular, some involved workarounds
were implemented to allow fully-automated dropping
of default- or constraint-holding columns with
SQL Server.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-5"><span class="target" id="change-d99858c9238ff25eb1c74e8f7fe23e45"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-d99858c9238ff25eb1c74e8f7fe23e45">¶</a></span><p>MySQL support has also been implemented to a
basic degree, including MySQL’s awkward style
of modifying columns being accommodated.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-6"><span class="target" id="change-0bcc5a9c66f70cda5fdaaf31b0ce0c3e"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-0bcc5a9c66f70cda5fdaaf31b0ce0c3e">¶</a></span><p>Other database environments not included among
those three have <em>not</em> been tested, <em>at all</em>.  This
includes Firebird, Oracle, Sybase.   Adding
support for these backends should be
straightforward.  Please report all missing/
incorrect behaviors to the bugtracker! Patches
are welcome here but are optional - please just
indicate the exact format expected by the target
database.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-7"><span class="target" id="change-4b55e4d42ba8fdcf3050cecac36107ed"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4b55e4d42ba8fdcf3050cecac36107ed">¶</a></span><p>SQLite, as a backend, has almost no support for
schema alterations to existing databases.  The author
would strongly recommend that SQLite not be used in
a migration context - just dump your SQLite database
into an intermediary format, then dump it back
into a new schema.  For dev environments, the
dev installer should be building the whole DB from
scratch.  Or just use Postgresql, which is a much
better database for non-trivial schemas.
Requests for full ALTER support on SQLite should be
reported to SQLite’s bug tracker at
<a class="reference external" href="http://www.sqlite.org/src/wiki?name=Bug+Reports">http://www.sqlite.org/src/wiki?name=Bug+Reports</a>,
as Alembic will not be implementing the
“rename the table to a temptable then copy the
data into a new table” workaround.
Note that Alembic will at some point offer an
extensible API so that you can implement commands
like this yourself.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-8"><span class="target" id="change-4a49127db40546e806c53443450ced50"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-4a49127db40546e806c53443450ced50">¶</a></span><p>Well-tested directives include add/drop table, add/drop
column, including support for SQLAlchemy “schema”
types which generate additional CHECK
constraints, i.e. Boolean, Enum.  Other directives not
included here have <em>not</em> been strongly tested
in production, i.e. rename table, etc.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-9"><span class="target" id="change-9ae153c6234cbed85deed93244b725ca"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-9ae153c6234cbed85deed93244b725ca">¶</a></span><p>Both “online” and “offline” migrations, the latter
being generated SQL scripts to hand off to a DBA,
have been strongly production tested against
Postgresql and SQL Server.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-10"><span class="target" id="change-1f1b97118b6fcbbd345f7ae5f1aee08e"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-1f1b97118b6fcbbd345f7ae5f1aee08e">¶</a></span><p>Modify column type, default status, nullable, is
functional and tested across PG, MSSQL, MySQL,
but not yet widely tested in production usage.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-11"><span class="target" id="change-5d178aa6493a1b141e953b284c26f3e4"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-5d178aa6493a1b141e953b284c26f3e4">¶</a></span><p>Many migrations are still outright missing, i.e.
create/add sequences, etc.  As a workaround,
execute() can be used for those which are missing,
though posting of tickets for new features/missing
behaviors is strongly encouraged.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-12"><span class="target" id="change-3d42011fdfe5fc3fab6550e1d567d1b8"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-3d42011fdfe5fc3fab6550e1d567d1b8">¶</a></span><p>Autogenerate feature is implemented and has been
tested, though only a little bit in a production setting.
In particular, detection of type and server
default changes are optional and are off by default;
they can also be customized by a callable.
Both features work but can have surprises particularly
the disparity between BIT/TINYINT and boolean,
which hasn’t yet been worked around, as well as
format changes performed by the database on defaults
when it reports back.  When enabled, the PG dialect
will execute the two defaults to be compared to
see if they are equivalent.  Other backends may
need to do the same thing.</p>
<p>The autogenerate feature only generates
“candidate” commands which must be hand-tailored
in any case, so is still a useful feature and
is safe to use.  Please report missing/broken features
of autogenerate!  This will be a great feature and
will also improve SQLAlchemy’s reflection services.</p>
<p></p>
</p>
</li>
<li><p class="caption" id="change-0.1.0-13"><span class="target" id="change-a1553a278d22086c7e4b26a0e5195cd5"><strong>[no_tags]</strong> <a class="changelog-reference headerlink reference internal" href="#change-a1553a278d22086c7e4b26a0e5195cd5">¶</a></span><p>Support for non-ASCII table, column and constraint
names is mostly nonexistent.   This is also a
straightforward feature add as SQLAlchemy itself
supports unicode identifiers; Alembic itself will
likely need fixes to logging, column identification
by key, etc. for full support here.</p>
<p></p>
</p>
</li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CKYIL23W&placement=alembiczzzcomputingcom" id="_carbonads_js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28532944-2', 'auto');
  ga('send', 'pageview');

</script>


<p>
<a href="alembic_latest.zip">Download documentation as ZIP file</a>
</p>


  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Changelog</a><ul>
<li><a class="reference internal" href="#change-1.7.6">1.7.6</a><ul>
<li><a class="reference internal" href="#change-1.7.6-usecase">usecase</a></li>
<li><a class="reference internal" href="#change-1.7.6-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.7.5">1.7.5</a><ul>
<li><a class="reference internal" href="#change-1.7.5-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.7.4">1.7.4</a><ul>
<li><a class="reference internal" href="#change-1.7.4-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.7.3">1.7.3</a><ul>
<li><a class="reference internal" href="#change-1.7.3-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.7.2">1.7.2</a><ul>
<li><a class="reference internal" href="#change-1.7.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.7.1">1.7.1</a><ul>
<li><a class="reference internal" href="#change-1.7.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.7.0">1.7.0</a><ul>
<li><a class="reference internal" href="#change-1.7.0-changed">changed</a></li>
<li><a class="reference internal" href="#change-1.7.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-1.7.0-usecase">usecase</a></li>
<li><a class="reference internal" href="#change-1.7.0-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.6.5">1.6.5</a><ul>
<li><a class="reference internal" href="#change-1.6.5-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.6.4">1.6.4</a><ul>
<li><a class="reference internal" href="#change-1.6.4-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.6.3">1.6.3</a><ul>
<li><a class="reference internal" href="#change-1.6.3-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.6.2">1.6.2</a><ul>
<li><a class="reference internal" href="#change-1.6.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.6.1">1.6.1</a><ul>
<li><a class="reference internal" href="#change-1.6.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.6.0">1.6.0</a><ul>
<li><a class="reference internal" href="#change-1.6.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-1.6.0-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.5.8">1.5.8</a><ul>
<li><a class="reference internal" href="#change-1.5.8-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.5.7">1.5.7</a><ul>
<li><a class="reference internal" href="#change-1.5.7-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.5.6">1.5.6</a><ul>
<li><a class="reference internal" href="#change-1.5.6-bug">bug</a></li>
<li><a class="reference internal" href="#change-1.5.6-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.5.5">1.5.5</a><ul>
<li><a class="reference internal" href="#change-1.5.5-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.5.4">1.5.4</a><ul>
<li><a class="reference internal" href="#change-1.5.4-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.5.3">1.5.3</a><ul>
<li><a class="reference internal" href="#change-1.5.3-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.5.2">1.5.2</a><ul>
<li><a class="reference internal" href="#change-1.5.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.5.1">1.5.1</a><ul>
<li><a class="reference internal" href="#change-1.5.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.5.0">1.5.0</a><ul>
<li><a class="reference internal" href="#change-1.5.0-changed">changed</a></li>
<li><a class="reference internal" href="#change-1.5.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-1.5.0-usecase">usecase</a></li>
<li><a class="reference internal" href="#change-1.5.0-bug">bug</a></li>
<li><a class="reference internal" href="#change-1.5.0-removed">removed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.4.3">1.4.3</a><ul>
<li><a class="reference internal" href="#change-1.4.3-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.4.2">1.4.2</a><ul>
<li><a class="reference internal" href="#change-1.4.2-usecase">usecase</a></li>
<li><a class="reference internal" href="#change-1.4.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.4.1">1.4.1</a><ul>
<li><a class="reference internal" href="#change-1.4.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.4.0">1.4.0</a><ul>
<li><a class="reference internal" href="#change-1.4.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-1.4.0-usecase">usecase</a></li>
<li><a class="reference internal" href="#change-1.4.0-bug">bug</a></li>
<li><a class="reference internal" href="#change-1.4.0-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.3.3">1.3.3</a><ul>
<li><a class="reference internal" href="#change-1.3.3-usecase">usecase</a></li>
<li><a class="reference internal" href="#change-1.3.3-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.3.2">1.3.2</a><ul>
<li><a class="reference internal" href="#change-1.3.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.3.1">1.3.1</a><ul>
<li><a class="reference internal" href="#change-1.3.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.3.0">1.3.0</a><ul>
<li><a class="reference internal" href="#change-1.3.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-1.3.0-bug">bug</a></li>
<li><a class="reference internal" href="#change-1.3.0-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.2.1">1.2.1</a><ul>
<li><a class="reference internal" href="#change-1.2.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.2.0">1.2.0</a><ul>
<li><a class="reference internal" href="#change-1.2.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-1.2.0-usecase">usecase</a></li>
<li><a class="reference internal" href="#change-1.2.0-bug">bug</a></li>
<li><a class="reference internal" href="#change-1.2.0-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.1.0">1.1.0</a><ul>
<li><a class="reference internal" href="#change-1.1.0-usecase">usecase</a></li>
<li><a class="reference internal" href="#change-1.1.0-bug">bug</a></li>
<li><a class="reference internal" href="#change-1.1.0-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.0.11">1.0.11</a><ul>
<li><a class="reference internal" href="#change-1.0.11-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.0.10">1.0.10</a><ul>
<li><a class="reference internal" href="#change-1.0.10-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.0.9">1.0.9</a><ul>
<li><a class="reference internal" href="#change-1.0.9-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.0.8">1.0.8</a><ul>
<li><a class="reference internal" href="#change-1.0.8-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.0.7">1.0.7</a><ul>
<li><a class="reference internal" href="#change-1.0.7-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.0.6">1.0.6</a><ul>
<li><a class="reference internal" href="#change-1.0.6-feature">feature</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.0.5">1.0.5</a><ul>
<li><a class="reference internal" href="#change-1.0.5-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.0.4">1.0.4</a></li>
<li><a class="reference internal" href="#change-1.0.3">1.0.3</a><ul>
<li><a class="reference internal" href="#change-1.0.3-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.0.2">1.0.2</a><ul>
<li><a class="reference internal" href="#change-1.0.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.0.1">1.0.1</a><ul>
<li><a class="reference internal" href="#change-1.0.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-1.0.0">1.0.0</a><ul>
<li><a class="reference internal" href="#change-1.0.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-1.0.0-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.10">0.9.10</a><ul>
<li><a class="reference internal" href="#change-0.9.10-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.9">0.9.9</a><ul>
<li><a class="reference internal" href="#change-0.9.9-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.9.9-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.8">0.9.8</a><ul>
<li><a class="reference internal" href="#change-0.9.8-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.7">0.9.7</a><ul>
<li><a class="reference internal" href="#change-0.9.7-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.6">0.9.6</a><ul>
<li><a class="reference internal" href="#change-0.9.6-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.9.6-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.5">0.9.5</a><ul>
<li><a class="reference internal" href="#change-0.9.5-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.4">0.9.4</a><ul>
<li><a class="reference internal" href="#change-0.9.4-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.3">0.9.3</a><ul>
<li><a class="reference internal" href="#change-0.9.3-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.9.3-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.2">0.9.2</a><ul>
<li><a class="reference internal" href="#change-0.9.2-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.9.2-bug">bug</a></li>
<li><a class="reference internal" href="#change-0.9.2-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.1">0.9.1</a><ul>
<li><a class="reference internal" href="#change-0.9.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.9.0">0.9.0</a><ul>
<li><a class="reference internal" href="#change-0.9.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.9.0-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.8.10">0.8.10</a><ul>
<li><a class="reference internal" href="#change-0.8.10-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.8.9">0.8.9</a><ul>
<li><a class="reference internal" href="#change-0.8.9-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.8.8">0.8.8</a><ul>
<li><a class="reference internal" href="#change-0.8.8-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.8.8-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.8.7">0.8.7</a><ul>
<li><a class="reference internal" href="#change-0.8.7-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.8.6">0.8.6</a><ul>
<li><a class="reference internal" href="#change-0.8.6-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.8.5">0.8.5</a><ul>
<li><a class="reference internal" href="#change-0.8.5-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.8.4">0.8.4</a><ul>
<li><a class="reference internal" href="#change-0.8.4-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.8.4-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.8.3">0.8.3</a><ul>
<li><a class="reference internal" href="#change-0.8.3-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.8.2">0.8.2</a><ul>
<li><a class="reference internal" href="#change-0.8.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.8.1">0.8.1</a><ul>
<li><a class="reference internal" href="#change-0.8.1-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.8.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.8.0">0.8.0</a><ul>
<li><a class="reference internal" href="#change-0.8.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.8.0-bug">bug</a></li>
<li><a class="reference internal" href="#change-0.8.0-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.7.7">0.7.7</a><ul>
<li><a class="reference internal" href="#change-0.7.7-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.7.7-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.7.6">0.7.6</a><ul>
<li><a class="reference internal" href="#change-0.7.6-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.7.6-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.7.5">0.7.5</a><ul>
<li><a class="reference internal" href="#change-0.7.5-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.7.5-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.7.4">0.7.4</a><ul>
<li><a class="reference internal" href="#change-0.7.4-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.7.3">0.7.3</a><ul>
<li><a class="reference internal" href="#change-0.7.3-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.7.2">0.7.2</a><ul>
<li><a class="reference internal" href="#change-0.7.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.7.1">0.7.1</a><ul>
<li><a class="reference internal" href="#change-0.7.1-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.7.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.7.0">0.7.0</a><ul>
<li><a class="reference internal" href="#change-0.7.0-changed">changed</a></li>
<li><a class="reference internal" href="#change-0.7.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.7.0-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.6.7">0.6.7</a><ul>
<li><a class="reference internal" href="#change-0.6.7-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.6.7-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.6.6">0.6.6</a><ul>
<li><a class="reference internal" href="#change-0.6.6-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.6.6-bug">bug</a></li>
<li><a class="reference internal" href="#change-0.6.6-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.6.5">0.6.5</a><ul>
<li><a class="reference internal" href="#change-0.6.5-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.6.5-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.6.4">0.6.4</a><ul>
<li><a class="reference internal" href="#change-0.6.4-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.6.4-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.6.3">0.6.3</a><ul>
<li><a class="reference internal" href="#change-0.6.3-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.6.3-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.6.2">0.6.2</a><ul>
<li><a class="reference internal" href="#change-0.6.2-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.6.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.6.1">0.6.1</a><ul>
<li><a class="reference internal" href="#change-0.6.1-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.6.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.6.0">0.6.0</a><ul>
<li><a class="reference internal" href="#change-0.6.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.6.0-bug">bug</a></li>
<li><a class="reference internal" href="#change-0.6.0-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.5.0">0.5.0</a><ul>
<li><a class="reference internal" href="#change-0.5.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.5.0-bug">bug</a></li>
<li><a class="reference internal" href="#change-0.5.0-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.4.2">0.4.2</a><ul>
<li><a class="reference internal" href="#change-0.4.2-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.4.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.4.1">0.4.1</a><ul>
<li><a class="reference internal" href="#change-0.4.1-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.4.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.4.0">0.4.0</a><ul>
<li><a class="reference internal" href="#change-0.4.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.4.0-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.3.6">0.3.6</a><ul>
<li><a class="reference internal" href="#change-0.3.6-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.3.6-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.3.5">0.3.5</a><ul>
<li><a class="reference internal" href="#change-0.3.5-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.3.5-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.3.4">0.3.4</a><ul>
<li><a class="reference internal" href="#change-0.3.4-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.3.3">0.3.3</a><ul>
<li><a class="reference internal" href="#change-0.3.3-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.3.3-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.3.2">0.3.2</a><ul>
<li><a class="reference internal" href="#change-0.3.2-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.3.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.3.1">0.3.1</a><ul>
<li><a class="reference internal" href="#change-0.3.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.3.0">0.3.0</a><ul>
<li><a class="reference internal" href="#change-0.3.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.3.0-misc">misc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.2.2">0.2.2</a><ul>
<li><a class="reference internal" href="#change-0.2.2-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.2.2-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.2.1">0.2.1</a><ul>
<li><a class="reference internal" href="#change-0.2.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.2.0">0.2.0</a><ul>
<li><a class="reference internal" href="#change-0.2.0-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.2.0-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.1.1">0.1.1</a><ul>
<li><a class="reference internal" href="#change-0.1.1-feature">feature</a></li>
<li><a class="reference internal" href="#change-0.1.1-bug">bug</a></li>
</ul>
</li>
<li><a class="reference internal" href="#change-0.1.0">0.1.0</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h4>Previous topic</h4>
  <p class="topless"><a href="api/ddl.html"
                        title="previous chapter">DDL Internals</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api/ddl.html" title="DDL Internals"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Alembic 1.7.5 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Changelog</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010-2021, Mike Bayer.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>