<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>åŸºæœ¬æ ¼å¼åŒ–ç¨‹åºé…ç½® - alembic ä¸­æ–‡æ–‡æ¡£</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../zh/_front_matter.html">å‰è¨€</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="../zh/00_tutorial.html"><strong aria-hidden="true">1.</strong> æŒ‡å—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/00_01_the_migration_enviroment.html"><strong aria-hidden="true">1.1.</strong> è¿ç§»ç¯å¢ƒ</a></li><li class="chapter-item "><a href="../zh/00_02_creating_an_enviroment.html"><strong aria-hidden="true">1.2.</strong> åˆ›å»ºç¯å¢ƒ</a></li><li class="chapter-item "><a href="../zh/00_03_Editing_the_ini_file.html"><strong aria-hidden="true">1.3.</strong> ç¼–è¾‘.iniæ–‡ä»¶</a></li><li class="chapter-item "><a href="../zh/00_04_create_a_migration_script.html"><strong aria-hidden="true">1.4.</strong> åˆ›å»ºè¿ç§»è„šæœ¬</a></li><li class="chapter-item "><a href="../zh/00_05_Running_our_first_migration.html"><strong aria-hidden="true">1.5.</strong> åˆæ¬¡è¿è¡Œè¿ç§»</a></li><li class="chapter-item "><a href="../zh/00_06_Running_our_second_migration.html"><strong aria-hidden="true">1.6.</strong> å†æ¬¡è¿è¡Œè¿ç§»</a></li><li class="chapter-item "><a href="../zh/00_07_partial_revision_identifiers.html"><strong aria-hidden="true">1.7.</strong> éƒ¨åˆ†ä¿®è®¢æ ‡è¯†ç¬¦</a></li><li class="chapter-item "><a href="../zh/00_08_relative_migration_identifiers.html"><strong aria-hidden="true">1.8.</strong> ç›¸å¯¹è¿ç§»æ ‡è¯†ç¬¦</a></li><li class="chapter-item "><a href="../zh/00_09_getting_information.html"><strong aria-hidden="true">1.9.</strong> è·å–ä¿¡æ¯</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/00_09_01_viewing_history_ranges.html"><strong aria-hidden="true">1.9.1.</strong> æŸ¥çœ‹å†å²èŒƒå›´</a></li></ol></li><li class="chapter-item "><a href="../zh/00_10_downgrading.html"><strong aria-hidden="true">1.10.</strong> é™çº§</a></li><li class="chapter-item "><a href="../zh/00_11_next_steps.html"><strong aria-hidden="true">1.11.</strong> ä¸‹ä¸€æ­¥</a></li></ol></li><li class="chapter-item expanded "><a href="../zh/01_auto_generating_migrations.html"><strong aria-hidden="true">2.</strong> åŸºäºè‡ªåŠ¨ç”Ÿæˆçš„è¿ç§»</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/01_01_what_does_autogenerate_detect.html"><strong aria-hidden="true">2.1.</strong> Autogenerate æ£€æµ‹ä»€ä¹ˆ</a></li><li class="chapter-item "><a href="../zh/01_02_autogenerating_multiple_metadata_collections.html"><strong aria-hidden="true">2.2.</strong> è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªå…ƒæ•°æ®é›†åˆ</a></li><li class="chapter-item "><a href="../zh/01_03_controlling_what_to_be_autogenerated.html"><strong aria-hidden="true">2.3.</strong> æ§åˆ¶è¦è‡ªåŠ¨ç”Ÿæˆçš„å†…å®¹</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/01_03_01_omitting_schema_names_from_the_autogenerate_process.html"><strong aria-hidden="true">2.3.1.</strong> ä»è‡ªåŠ¨ç”Ÿæˆè¿‡ç¨‹ä¸­è¿‡æ»¤æ¨¡å¼åç§°</a></li><li class="chapter-item "><a href="../zh/01_03_02_omitting_table_names_from_the_autogenerate_process.html"><strong aria-hidden="true">2.3.2.</strong> ä»è‡ªåŠ¨ç”Ÿæˆè¿‡ç¨‹ä¸­è¿‡æ»¤è¡¨å</a></li><li class="chapter-item "><a href="../zh/01_03_03_omitting_based_on_object.html"><strong aria-hidden="true">2.3.3.</strong> åŸºäºå¯¹è±¡çš„è¿‡æ»¤</a></li></ol></li><li class="chapter-item "><a href="../zh/01_04_comparing_and_rendering_types.html"><strong aria-hidden="true">2.4.</strong> æ¯”è¾ƒå’Œæ¸²æŸ“ç±»å‹</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/01_04_01_controlling_the_module_prefix.html"><strong aria-hidden="true">2.4.1.</strong> æ§åˆ¶æ¨¡å—å‰ç¼€</a></li><li class="chapter-item "><a href="../zh/01_04_02_affecting_the_rendering_of_types_themselves.html"><strong aria-hidden="true">2.4.2.</strong> å½±å“ç±»å‹æœ¬èº«çš„æ¸²æŸ“</a></li><li class="chapter-item "><a href="../zh/01_04_03_comparing_types.html"><strong aria-hidden="true">2.4.3.</strong> æ¯”è¾ƒç±»å‹</a></li></ol></li><li class="chapter-item expanded "><a href="../zh/01_05_applying_post_processing.html"><strong aria-hidden="true">2.5.</strong> å°†æäº¤å¤„ç†è¿‡ç¨‹å’Œ Python ä»£ç æ ¼å¼åŒ–ç¨‹åºåº”ç”¨äºç”Ÿæˆçš„ä¿®è®¢</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../zh/01_05_01_basic_formatter_configuration.html" class="active"><strong aria-hidden="true">2.5.1.</strong> åŸºæœ¬æ ¼å¼åŒ–ç¨‹åºé…ç½®</a></li><li class="chapter-item "><a href="../zh/01_05_02_writing_custom_hooks_as_python_functions.html"><strong aria-hidden="true">2.5.2.</strong> è‡ªå®šä¹‰Pythonå‡½æ•°é’©å­</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../zh/02_generating_sql_scripts.html"><strong aria-hidden="true">3.</strong> ç”ŸæˆSQLè„šæœ¬(åˆç§°ç¦»çº¿æ¨¡å¼)</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/02_01_getting_the_start_version.html"><strong aria-hidden="true">3.1.</strong> è·å–èµ·å§‹ç‰ˆæœ¬</a></li><li class="chapter-item "><a href="../zh/02_02_writing_migration_scripts_to_support_script_generation.html"><strong aria-hidden="true">3.2.</strong> ç¼–å†™æ”¯æŒç”Ÿæˆè„šæœ¬çš„è¿ç§»è„šæœ¬</a></li><li class="chapter-item "><a href="../zh/02_03_customizing_the_environment.html"><strong aria-hidden="true">3.3.</strong> è‡ªå®šä¹‰ç¯å¢ƒ</a></li></ol></li><li class="chapter-item expanded "><a href="../zh/03_the_importance_of_naming_constraints.html"><strong aria-hidden="true">4.</strong> å‘½åçº¦æŸçš„é‡è¦æ€§</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/03_01_integration_of_naming_conventions_into_operations_autogenerate.html"><strong aria-hidden="true">4.1.</strong> å°†å‘½åçº¦å®šé›†æˆåˆ°æ“ä½œä¸­ä»¥åŠè‡ªåŠ¨ç”Ÿæˆä¸­</a></li></ol></li><li class="chapter-item expanded "><a href="../zh/04_running_batch_migrations_for_sqlite_and_other_databases.html"><strong aria-hidden="true">5.</strong> åœ¨SQLiteå’Œå…¶ä»–æ•°æ®ä¸­è¿è¡Œ&quot;æ‰¹å¤„ç†&quot;è¿ç§»è„šæœ¬</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/04_01_controlling_table_reflection.html"><strong aria-hidden="true">5.1.</strong> æ§åˆ¶è¡¨åå°„</a></li><li class="chapter-item "><a href="../zh/04_02_dealing_with_constraints.html"><strong aria-hidden="true">5.2.</strong> å¤„ç†çº¦æŸ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/04_02_01_dropping_unnamed_or_named_foreign_key_constraints.html"><strong aria-hidden="true">5.2.1.</strong> åˆ é™¤æœªå‘½åæˆ–å‘½åçš„å¤–é”®çº¦æŸ</a></li><li class="chapter-item "><a href="../zh/04_02_02_including_unnamed_unique_constraints.html"><strong aria-hidden="true">5.2.2.</strong> åŒ…å«æœªå‘½åçš„ UNIQUE çº¦æŸ</a></li><li class="chapter-item "><a href="../zh/04_02_03_changing_the_type_of_boolean.html"><strong aria-hidden="true">5.2.3.</strong> æ›´æ”¹å¸ƒå°”ã€æšä¸¾å’Œå…¶ä»–éšå¼ CHECK æ•°æ®ç±»å‹çš„ç±»å‹</a></li><li class="chapter-item "><a href="../zh/04_02_04_including_check_constraints.html"><strong aria-hidden="true">5.2.4.</strong> åŒ…æ‹¬ CHECK çº¦æŸ</a></li><li class="chapter-item "><a href="../zh/04_02_05_dealing_with_referencing_foreign_keys.html"><strong aria-hidden="true">5.2.5.</strong> å¤„ç†å¼•ç”¨å¤–é”®</a></li></ol></li><li class="chapter-item "><a href="../zh/04_03_working_in_offline_mode.html"><strong aria-hidden="true">5.3.</strong> åœ¨ç¦»çº¿æ¨¡å¼ä¸‹å·¥ä½œ</a></li><li class="chapter-item "><a href="../zh/04_04_batch_mode_with_autogenerate.html"><strong aria-hidden="true">5.4.</strong> å¸¦è‡ªåŠ¨ç”Ÿæˆçš„æ‰¹å¤„ç†æ¨¡å¼</a></li><li class="chapter-item "><a href="../zh/04_05_batch_mode_with_databases_other_than_sqlite.html"><strong aria-hidden="true">5.5.</strong> SQLite ä»¥å¤–çš„æ•°æ®åº“çš„æ‰¹å¤„ç†æ¨¡å¼</a></li></ol></li><li class="chapter-item expanded "><a href="../zh/05_working_with_branches.html"><strong aria-hidden="true">6.</strong> å·¥ä½œåˆ†æ”¯</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/05_01_merging_branches.html"><strong aria-hidden="true">6.1.</strong> åˆå¹¶åˆ†æ”¯</a></li><li class="chapter-item "><a href="../zh/05_02_working_with_explicit_branches.html"><strong aria-hidden="true">6.2.</strong> ä½¿ç”¨æ˜¾å¼åˆ†æ”¯</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/05_02_01_referring_to_all_heads_at_once.html"><strong aria-hidden="true">6.2.1.</strong> ä¸€æ¬¡å¼•ç”¨åˆ°æ‰€æœ‰çš„head</a></li><li class="chapter-item "><a href="../zh/05_02_02_referring_to_a_specific_version.html"><strong aria-hidden="true">6.2.2.</strong> å¼•ç”¨ç‰¹å®šç‰ˆæœ¬</a></li><li class="chapter-item "><a href="../zh/05_02_03_working_with_branch_labels.html"><strong aria-hidden="true">6.2.3.</strong> ä½¿ç”¨åˆ†æ”¯æ ‡æ³¨</a></li><li class="chapter-item "><a href="../zh/05_02_04_more_label_syntaxes.html"><strong aria-hidden="true">6.2.4.</strong> æ›´å¤šæ ‡æ³¨è¯­æ³•</a></li></ol></li><li class="chapter-item "><a href="../zh/05_03_working_with_multiple_bases.html"><strong aria-hidden="true">6.3.</strong> åŸºäºå¤šä¸ªbaseå·¥ä½œ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/05_03_01_setting_up_multiple_version_directories.html"><strong aria-hidden="true">6.3.1.</strong> è®¾ç½®å¤šç‰ˆæœ¬ç›®å½•</a></li><li class="chapter-item "><a href="../zh/05_03_01_creating_a_labeled_base_revision.html"><strong aria-hidden="true">6.3.2.</strong> åˆ›å»ºå¸¦æ ‡æ³¨çš„åŸºæœ¬ä¿®è®¢</a></li><li class="chapter-item "><a href="../zh/05_03_02_running_with_multiple_bases.html"><strong aria-hidden="true">6.3.3.</strong> åŸºäºå¤šä¸ªbaseè¿è¡Œ</a></li></ol></li><li class="chapter-item "><a href="../zh/05_04_branch_dependencies.html"><strong aria-hidden="true">6.4.</strong> åˆ†æ”¯ä¾èµ–</a></li></ol></li><li class="chapter-item expanded "><a href="../zh/06_operation_reference.html"><strong aria-hidden="true">7.</strong> æ“ä½œå‚è€ƒ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/06_01_operations.html"><strong aria-hidden="true">7.1.</strong> alembic.operations.Operations</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/06_01_01_add_column.html"><strong aria-hidden="true">7.1.1.</strong> add_column</a></li><li class="chapter-item "><a href="../zh/06_01_02_alter_column.html"><strong aria-hidden="true">7.1.2.</strong> alter_column</a></li><li class="chapter-item "><a href="../zh/06_01_03_batch_alter_table.html"><strong aria-hidden="true">7.1.3.</strong> batch_alter_table</a></li><li class="chapter-item "><a href="../zh/06_01_04_bulk_insert.html"><strong aria-hidden="true">7.1.4.</strong> bulk_insert</a></li><li class="chapter-item "><a href="../zh/06_01_05_create_check_constraint.html"><strong aria-hidden="true">7.1.5.</strong> create_check_constraint</a></li><li class="chapter-item "><a href="../zh/06_01_06_create_exclude_constraint.html"><strong aria-hidden="true">7.1.6.</strong> create_exclude_constraint</a></li><li class="chapter-item "><a href="../zh/06_01_07_create_foreign_key.html"><strong aria-hidden="true">7.1.7.</strong> create_foreign_key</a></li><li class="chapter-item "><a href="../zh/06_01_08_create_index.html"><strong aria-hidden="true">7.1.8.</strong> create_index</a></li><li class="chapter-item "><a href="../zh/06_01_09_create_primary_key.html"><strong aria-hidden="true">7.1.9.</strong> create_primary_key</a></li><li class="chapter-item "><a href="../zh/06_01_10_create_table.html"><strong aria-hidden="true">7.1.10.</strong> create_table</a></li><li class="chapter-item "><a href="../zh/06_01_11_create_table_comment.html"><strong aria-hidden="true">7.1.11.</strong> create_table_comment</a></li><li class="chapter-item "><a href="../zh/06_01_12_create_unique_constraint.html"><strong aria-hidden="true">7.1.12.</strong> create_unique_constraint</a></li><li class="chapter-item "><a href="../zh/06_01_13_drop_column.html"><strong aria-hidden="true">7.1.13.</strong> drop_column</a></li><li class="chapter-item "><a href="../zh/06_01_14_drop_constraint.html"><strong aria-hidden="true">7.1.14.</strong> drop_constraint</a></li><li class="chapter-item "><a href="../zh/06_01_15_drop_index.html"><strong aria-hidden="true">7.1.15.</strong> drop_index</a></li><li class="chapter-item "><a href="../zh/06_01_16_drop_table.html"><strong aria-hidden="true">7.1.16.</strong> drop_table</a></li><li class="chapter-item "><a href="../zh/06_01_17_drop_table_comment.html"><strong aria-hidden="true">7.1.17.</strong> drop_table_comment</a></li><li class="chapter-item "><a href="../zh/06_01_18_execute.html"><strong aria-hidden="true">7.1.18.</strong> execute</a></li><li class="chapter-item "><a href="../zh/06_01_19_f.html"><strong aria-hidden="true">7.1.19.</strong> f</a></li><li class="chapter-item "><a href="../zh/06_01_20_get_bind.html"><strong aria-hidden="true">7.1.20.</strong> get_bind</a></li><li class="chapter-item "><a href="../zh/06_01_21_get_context.html"><strong aria-hidden="true">7.1.21.</strong> get_context</a></li><li class="chapter-item "><a href="../zh/06_01_22_implementation_for.html"><strong aria-hidden="true">7.1.22.</strong> implementation_for</a></li><li class="chapter-item "><a href="../zh/06_01_23_inline_literal.html"><strong aria-hidden="true">7.1.23.</strong> inline_literal</a></li><li class="chapter-item "><a href="../zh/06_01_24_invoke.html"><strong aria-hidden="true">7.1.24.</strong> invoke</a></li><li class="chapter-item "><a href="../zh/06_01_25_register_operation.html"><strong aria-hidden="true">7.1.25.</strong> register_operation</a></li><li class="chapter-item "><a href="../zh/06_01_26_rename_table.html"><strong aria-hidden="true">7.1.26.</strong> rename_table</a></li></ol></li><li class="chapter-item "><a href="../zh/06_02_batch_operations.html"><strong aria-hidden="true">7.2.</strong> alembic.operations.BatchOperations</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/06_02_01_add_column.html"><strong aria-hidden="true">7.2.1.</strong> add_column</a></li><li class="chapter-item "><a href="../zh/06_02_02_alter_column.html"><strong aria-hidden="true">7.2.2.</strong> alter_column</a></li><li class="chapter-item "><a href="../zh/06_02_03_create_check_constraint.html"><strong aria-hidden="true">7.2.3.</strong> create_check_constraint</a></li><li class="chapter-item "><a href="../zh/06_02_04_create_exclude_constraint.html"><strong aria-hidden="true">7.2.4.</strong> create_exclude_constraint</a></li><li class="chapter-item "><a href="../zh/06_02_05_create_foreign_key.html"><strong aria-hidden="true">7.2.5.</strong> create_foreign_key</a></li><li class="chapter-item "><a href="../zh/06_02_06_create_index.html"><strong aria-hidden="true">7.2.6.</strong> create_index</a></li><li class="chapter-item "><a href="../zh/06_02_07_create_primary_key.html"><strong aria-hidden="true">7.2.7.</strong> create_primary_key</a></li><li class="chapter-item "><a href="../zh/06_02_08_create_table_comment.html"><strong aria-hidden="true">7.2.8.</strong> create_table_comment</a></li><li class="chapter-item "><a href="../zh/06_02_09_create_unique_constraint.html"><strong aria-hidden="true">7.2.9.</strong> create_unique_constraint</a></li><li class="chapter-item "><a href="../zh/06_02_10_drop_column.html"><strong aria-hidden="true">7.2.10.</strong> drop_column</a></li><li class="chapter-item "><a href="../zh/06_02_11_drop_constraint.html"><strong aria-hidden="true">7.2.11.</strong> drop_constraint</a></li><li class="chapter-item "><a href="../zh/06_02_12_drop_index.html"><strong aria-hidden="true">7.2.12.</strong> drop_index</a></li><li class="chapter-item "><a href="../zh/06_02_13_drop_table_comment.html"><strong aria-hidden="true">7.2.13.</strong> drop_table_comment</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../zh/07_cook_book.html"><strong aria-hidden="true">8.</strong> cookbook</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/07_01_building_an_up_to_date_database_from_scratch.html"><strong aria-hidden="true">8.1.</strong> ä»å¤´å¼€å§‹æ„å»ºæœ€æ–°çš„æ•°æ®åº“</a></li><li class="chapter-item "><a href="../zh/07_02_conditional_migration_elements.html"><strong aria-hidden="true">8.2.</strong> æ¡ä»¶è¿ç§»å…ƒç´ </a></li><li class="chapter-item "><a href="../zh/07_03_sharing_a_connection_with_a_series_of_migration_commands_and_environments.html"><strong aria-hidden="true">8.3.</strong> ä¸ä¸€ç³»åˆ—è¿ç§»å‘½ä»¤å’Œç¯å¢ƒå…±äº«è¿æ¥</a></li><li class="chapter-item "><a href="../zh/07_04_replaceable_objects.html"><strong aria-hidden="true">8.4.</strong> å¯æ›¿æ¢å¯¹è±¡</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/07_04_01_the_replaceable_object_structure.html"><strong aria-hidden="true">8.4.1.</strong> å¯æ›¿æ¢å¯¹è±¡ç»“æ„</a></li><li class="chapter-item "><a href="../zh/07_04_02_create_operations_for_the_target_objects.html"><strong aria-hidden="true">8.4.2.</strong> ä¸ºç›®æ ‡å¯¹è±¡åˆ›å»ºæ“ä½œ</a></li><li class="chapter-item "><a href="../zh/07_04_03_create_initial_migrations.html"><strong aria-hidden="true">8.4.3.</strong> åˆ›å»ºåˆå§‹è¿ç§»</a></li><li class="chapter-item "><a href="../zh/07_04_04_create_revision_migrations.html"><strong aria-hidden="true">8.4.4.</strong> åˆ›å»ºä¿®è®¢è¿ç§»</a></li></ol></li><li class="chapter-item "><a href="../zh/07_05_rudimental_schema_level_multi_tenancy_for_postgresql_databases.html"><strong aria-hidden="true">8.5.</strong> PostgreSQL æ•°æ®åº“çš„åŸºç¡€æ¶æ„çº§å¤šç§Ÿæˆ·</a></li><li class="chapter-item "><a href="../zh/07_06_dont_generate_empty_migrations_with_autogenerate.html"><strong aria-hidden="true">8.6.</strong> ä¸è¦ä½¿ç”¨ Autogenerate ç”Ÿæˆç©ºè¿ç§»</a></li><li class="chapter-item "><a href="../zh/07_07_dont_emit_drop_index_when_the_table_is_to_be_dropped_as_well.html"><strong aria-hidden="true">8.7.</strong> å½“è¡¨ä¹Ÿå°†è¢«åˆ é™¤æ—¶ä¸è¦å‘å‡º DROP INDEX</a></li><li class="chapter-item "><a href="../zh/07_08_dont_generate_any_drop_table_directives_with_autogenerate.html"><strong aria-hidden="true">8.8.</strong> ä¸è¦ä½¿ç”¨autogenerateç”Ÿæˆä»»ä½• DROP TABLE æŒ‡ä»¤</a></li><li class="chapter-item "><a href="../zh/07_09_apply_custom_sorting_to_table_columns_within_create_table.html"><strong aria-hidden="true">8.9.</strong> å°†è‡ªå®šä¹‰æ’åºåº”ç”¨äº CREATE TABLE ä¸­çš„è¡¨åˆ—</a></li><li class="chapter-item "><a href="../zh/07_10_dont_emit_create_table_statements_for_views.html"><strong aria-hidden="true">8.10.</strong> ä¸è¦ä¸ºè§†å›¾å‘å‡º CREATE TABLE è¯­å¥</a></li><li class="chapter-item "><a href="../zh/07_11_run_multiple_alembic_environments_from_one_ini_file.html"><strong aria-hidden="true">8.11.</strong> ä»ä¸€ä¸ª .ini æ–‡ä»¶è¿è¡Œå¤šä¸ª Alembic ç¯å¢ƒ</a></li><li class="chapter-item "><a href="../zh/07_12_print_python_code_to_generate_particular_database_tables.html"><strong aria-hidden="true">8.12.</strong> æ‰“å° Python ä»£ç ä»¥ç”Ÿæˆç‰¹å®šçš„æ•°æ®åº“è¡¨</a></li><li class="chapter-item "><a href="../zh/07_13_run_alembic_operation_objects_directly_as_in_from_autogenerate.html"><strong aria-hidden="true">8.13.</strong> ç›´æ¥è¿è¡Œ Alembic æ“ä½œå¯¹è±¡ï¼ˆå¦‚æ¥è‡ªautogenerateï¼‰</a></li><li class="chapter-item "><a href="../zh/07_14_test_current_database_revision_is_at_heads.html"><strong aria-hidden="true">8.14.</strong> æµ‹è¯•å½“å‰çš„æ•°æ®åº“ä¿®è®¢ç‰ˆæœ¬å¤„äºhead</a></li><li class="chapter-item "><a href="../zh/07_15_using_asyncio_with_alembic.html"><strong aria-hidden="true">8.15.</strong> å°† Asyncio ä¸ Alembic ç»“åˆä½¿ç”¨</a></li></ol></li><li class="chapter-item expanded "><a href="../zh/08_api_details.html"><strong aria-hidden="true">9.</strong> APIè¯¦ç»†</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/08_01_overview.html"><strong aria-hidden="true">9.1.</strong> æ¦‚è§ˆ</a></li><li class="chapter-item "><a href="../zh/08_02_runtime_objects.html"><strong aria-hidden="true">9.2.</strong> è¿è¡Œæ—¶å¯¹è±¡</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/08_02_01_the_environment_context.html"><strong aria-hidden="true">9.2.1.</strong> Environment Context</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/08_02_01_01_begin_transaction.html"><strong aria-hidden="true">9.2.1.1.</strong> begin_transaction</a></li><li class="chapter-item "><a href="../zh/08_02_01_16_config.html"><strong aria-hidden="true">9.2.1.2.</strong> config</a></li><li class="chapter-item "><a href="../zh/08_02_01_02_configure.html"><strong aria-hidden="true">9.2.1.3.</strong> configure</a></li><li class="chapter-item "><a href="../zh/08_02_01_03_execute.html"><strong aria-hidden="true">9.2.1.4.</strong> execute</a></li><li class="chapter-item "><a href="../zh/08_02_01_04_get_bind.html"><strong aria-hidden="true">9.2.1.5.</strong> get_bind</a></li><li class="chapter-item "><a href="../zh/08_02_01_05_get_context.html"><strong aria-hidden="true">9.2.1.6.</strong> get_context</a></li><li class="chapter-item "><a href="../zh/08_02_01_06_get_head_revision.html"><strong aria-hidden="true">9.2.1.7.</strong> get_head_revision</a></li><li class="chapter-item "><a href="../zh/08_02_01_07_get_head_revisions.html"><strong aria-hidden="true">9.2.1.8.</strong> get_head_revisions</a></li><li class="chapter-item "><a href="../zh/08_02_01_08_get_revision_argument.html"><strong aria-hidden="true">9.2.1.9.</strong> get_revision_argument</a></li><li class="chapter-item "><a href="../zh/08_02_01_09_get_starting_revision_argument.html"><strong aria-hidden="true">9.2.1.10.</strong> get_starting_revision_argument</a></li><li class="chapter-item "><a href="../zh/08_02_01_10_get_tag_argument.html"><strong aria-hidden="true">9.2.1.11.</strong> get_tag_argument</a></li><li class="chapter-item "><a href="../zh/08_02_01_11_get_x_argument.html"><strong aria-hidden="true">9.2.1.12.</strong> get_x_argument</a></li><li class="chapter-item "><a href="../zh/08_02_01_12_is_offline_mode.html"><strong aria-hidden="true">9.2.1.13.</strong> is_offline_mode</a></li><li class="chapter-item "><a href="../zh/08_02_01_13_is_transactional_ddl.html"><strong aria-hidden="true">9.2.1.14.</strong> is_transactional_ddl</a></li><li class="chapter-item "><a href="../zh/08_02_01_14_run_migrations.html"><strong aria-hidden="true">9.2.1.15.</strong> run_migrations</a></li><li class="chapter-item "><a href="../zh/08_02_01_17_script.html"><strong aria-hidden="true">9.2.1.16.</strong> script</a></li><li class="chapter-item "><a href="../zh/08_02_01_15_static_output.html"><strong aria-hidden="true">9.2.1.17.</strong> static_output</a></li></ol></li><li class="chapter-item "><a href="../zh/08_02_02_the_migration_context.html"><strong aria-hidden="true">9.2.2.</strong> Migration Context</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/08_02_02_01_autocommit_block.html"><strong aria-hidden="true">9.2.2.1.</strong> autocommit_block</a></li><li class="chapter-item "><a href="../zh/08_02_02_02_begin_transaction.html"><strong aria-hidden="true">9.2.2.2.</strong> begin_transaction</a></li><li class="chapter-item "><a href="../zh/08_02_02_09_bind.html"><strong aria-hidden="true">9.2.2.3.</strong> bind</a></li><li class="chapter-item "><a href="../zh/08_02_02_10_config.html"><strong aria-hidden="true">9.2.2.4.</strong> config</a></li><li class="chapter-item "><a href="../zh/08_02_02_03_configure.html"><strong aria-hidden="true">9.2.2.5.</strong> configure</a></li><li class="chapter-item "><a href="../zh/08_02_02_04_execute.html"><strong aria-hidden="true">9.2.2.6.</strong> execute</a></li><li class="chapter-item "><a href="../zh/08_02_02_05_get_current_heads.html"><strong aria-hidden="true">9.2.2.7.</strong> get_current_heads</a></li><li class="chapter-item "><a href="../zh/08_02_02_06_get_current_revision.html"><strong aria-hidden="true">9.2.2.8.</strong> get_current_revision</a></li><li class="chapter-item "><a href="../zh/08_02_02_07_run_migrations.html"><strong aria-hidden="true">9.2.2.9.</strong> run_migrations</a></li><li class="chapter-item "><a href="../zh/08_02_02_08_stamp.html"><strong aria-hidden="true">9.2.2.10.</strong> stamp</a></li></ol></li></ol></li><li class="chapter-item "><a href="../zh/08_03_configuration.html"><strong aria-hidden="true">9.3.</strong> é…ç½®</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/08_03_01_attributes.html"><strong aria-hidden="true">9.3.1.</strong> attributes</a></li><li class="chapter-item "><a href="../zh/08_03_02_cmd_opts.html"><strong aria-hidden="true">9.3.2.</strong> cmd_opts</a></li><li class="chapter-item "><a href="../zh/08_03_03_config_file_name.html"><strong aria-hidden="true">9.3.3.</strong> config_file_name</a></li><li class="chapter-item "><a href="../zh/08_03_04_config_ini_section.html"><strong aria-hidden="true">9.3.4.</strong> config_ini_section</a></li><li class="chapter-item "><a href="../zh/08_03_05_file_config.html"><strong aria-hidden="true">9.3.5.</strong> file_config</a></li><li class="chapter-item "><a href="../zh/08_03_06_get_main_option.html"><strong aria-hidden="true">9.3.6.</strong> get_main_option</a></li><li class="chapter-item "><a href="../zh/08_03_07_get_section.html"><strong aria-hidden="true">9.3.7.</strong> get_section</a></li><li class="chapter-item "><a href="../zh/08_03_08_get_section_option.html"><strong aria-hidden="true">9.3.8.</strong> get_section_option</a></li><li class="chapter-item "><a href="../zh/08_03_09_get_template_directory.html"><strong aria-hidden="true">9.3.9.</strong> get_template_directory</a></li><li class="chapter-item "><a href="../zh/08_03_10_print_stdout.html"><strong aria-hidden="true">9.3.10.</strong> print_stdout</a></li><li class="chapter-item "><a href="../zh/08_03_11_set_main_option.html"><strong aria-hidden="true">9.3.11.</strong> set_main_option</a></li><li class="chapter-item "><a href="../zh/08_03_12_set_section_option.html"><strong aria-hidden="true">9.3.12.</strong> set_section_option</a></li><li class="chapter-item "><a href="../zh/08_03_13_main.html"><strong aria-hidden="true">9.3.13.</strong> main</a></li></ol></li><li class="chapter-item "><a href="../zh/08_04_commands.html"><strong aria-hidden="true">9.4.</strong> å‘½ä»¤</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/08_04_01_branches.html"><strong aria-hidden="true">9.4.1.</strong> branches</a></li><li class="chapter-item "><a href="../zh/08_04_02_current.html"><strong aria-hidden="true">9.4.2.</strong> current</a></li><li class="chapter-item "><a href="../zh/08_04_03_downgrade.html"><strong aria-hidden="true">9.4.3.</strong> downgrade</a></li><li class="chapter-item "><a href="../zh/08_04_04_edit.html"><strong aria-hidden="true">9.4.4.</strong> edit</a></li><li class="chapter-item "><a href="../zh/08_04_05_ensure_version.html"><strong aria-hidden="true">9.4.5.</strong> ensure_version</a></li><li class="chapter-item "><a href="../zh/08_04_06_heads.html"><strong aria-hidden="true">9.4.6.</strong> heads</a></li><li class="chapter-item "><a href="../zh/08_04_07_history.html"><strong aria-hidden="true">9.4.7.</strong> history</a></li><li class="chapter-item "><a href="../zh/08_04_08_init.html"><strong aria-hidden="true">9.4.8.</strong> init</a></li><li class="chapter-item "><a href="../zh/08_04_09_list_templates.html"><strong aria-hidden="true">9.4.9.</strong> list_templates</a></li><li class="chapter-item "><a href="../zh/08_04_10_merge.html"><strong aria-hidden="true">9.4.10.</strong> merge</a></li><li class="chapter-item "><a href="../zh/08_04_11_revision.html"><strong aria-hidden="true">9.4.11.</strong> revision</a></li><li class="chapter-item "><a href="../zh/08_04_12_show.html"><strong aria-hidden="true">9.4.12.</strong> show</a></li><li class="chapter-item "><a href="../zh/08_04_13_stamp.html"><strong aria-hidden="true">9.4.13.</strong> stamp</a></li><li class="chapter-item "><a href="../zh/08_04_14_upgrade.html"><strong aria-hidden="true">9.4.14.</strong> upgrade</a></li></ol></li><li class="chapter-item "><a href="../zh/08_05_operation_directives.html"><strong aria-hidden="true">9.5.</strong> æ“ä½œæŒ‡ä»¤</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/08_05_01_operation_plugins.html"><strong aria-hidden="true">9.5.1.</strong> æ“ä½œæ’ä»¶</a></li><li class="chapter-item "><a href="../zh/08_05_02_built_in_operation_objects.html"><strong aria-hidden="true">9.5.2.</strong> å†…ç½®æ“ä½œå¯¹è±¡</a></li></ol></li><li class="chapter-item "><a href="../zh/08_06_autogeneration.html"><strong aria-hidden="true">9.6.</strong> è‡ªåŠ¨ç”Ÿæˆ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/08_06_01_getting_diffs.html"><strong aria-hidden="true">9.6.1.</strong> è·å–å·®å¼‚</a></li><li class="chapter-item "><a href="../zh/08_06_02_customizing_revision_generation.html"><strong aria-hidden="true">9.6.2.</strong> ç”Ÿæˆè‡ªå®šä¹‰ä¿®è®¢</a></li><li class="chapter-item "><a href="../zh/08_06_03_autogenerating_custom_operation_directives.html"><strong aria-hidden="true">9.6.3.</strong> Autogenerateè‡ªå®šä¹‰æ“ä½œæŒ‡ä»¤</a></li></ol></li><li class="chapter-item "><a href="../zh/08_07_script_directory.html"><strong aria-hidden="true">9.7.</strong> è„šæœ¬ç›®å½•</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/08_07_01_revision.html"><strong aria-hidden="true">9.7.1.</strong> ä¿®è®¢</a></li><li class="chapter-item "><a href="../zh/08_07_02_write_hooks.html"><strong aria-hidden="true">9.7.2.</strong> å†™é’©å­</a></li></ol></li><li class="chapter-item "><a href="../zh/08_08_ddl_internals.html"><strong aria-hidden="true">9.8.</strong> DDL å†…éƒ¨ç»“æ„</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../zh/08_08_01_mysql.html"><strong aria-hidden="true">9.8.1.</strong> MySQL</a></li><li class="chapter-item "><a href="../zh/08_08_02_ms_sql.html"><strong aria-hidden="true">9.8.2.</strong> MS-SQL</a></li><li class="chapter-item "><a href="../zh/08_08_03_postgresql.html"><strong aria-hidden="true">9.8.3.</strong> Postgresql</a></li><li class="chapter-item "><a href="../zh/08_08_04_sqlite.html"><strong aria-hidden="true">9.8.4.</strong> SQLite</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../zh/09_change_log.html"><strong aria-hidden="true">10.</strong> æ›´æ–°å†å²</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="../en/genindex.html">index</a></li><li class="chapter-item expanded affix "><a href="../en/py-modindex.html">module-index</a></li><li class="chapter-item expanded affix "><a href="../en/index.html">Document-English</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">alembic ä¸­æ–‡æ–‡æ¡£</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="basic-formatter-configuration"><a class="header" href="#basic-formatter-configuration">Basic Formatter Configuration</a></h1>
<p>The <code>alembic.ini</code> samples now include commented-out configuration illustrating how to configure code-formatting tools to run against the newly generated file path. Example:</p>
<blockquote>
<p><code>alembic.ini</code> ç¤ºä¾‹ç°åœ¨åŒ…å«æ³¨é‡Šæ‰çš„é…ç½®ï¼Œè¯´æ˜å¦‚ä½•é…ç½®ä»£ç æ ¼å¼åŒ–å·¥å…·ä»¥é’ˆå¯¹æ–°ç”Ÿæˆçš„æ–‡ä»¶è·¯å¾„è¿è¡Œã€‚ ä¾‹å­ï¼š</p>
</blockquote>
<pre><code class="language-ini">[post_write_hooks]

# format using &quot;black&quot;
hooks=black

black.type = console_scripts
black.entrypoint = black
black.options = -l 79
</code></pre>
<p>Above, we configure <code>hooks</code> to be a single post write hook labeled <code>&quot;black&quot;</code>. Note that this label is arbitrary. We then define the configuration for the <code>&quot;black&quot;</code> post write hook, which includes:</p>
<blockquote>
<p>ä¸Šé¢ï¼Œæˆ‘ä»¬å°† <code>hooks</code> é…ç½®ä¸ºæ ‡è®°ä¸º <code>&quot;black&quot;</code> çš„å•ä¸ª post write hookã€‚ è¯·æ³¨æ„ï¼Œæ­¤æ ‡ç­¾æ˜¯ä»»æ„çš„ã€‚ ç„¶åæˆ‘ä»¬å®šä¹‰äº†<code>&quot;black&quot;</code> post write hookçš„é…ç½®ï¼ŒåŒ…æ‹¬ï¼š</p>
</blockquote>
<ul>
<li><code>type</code> - this is the type of hook we are running. Alembic includes a hook runner called <code>&quot;console_scripts&quot;</code>, which is specifically a Python function that uses <code>subprocess.run()</code> to invoke a separate Python script against the revision file. For a custom-written hook function, this configuration variable would refer to the name under which the custom hook was registered; see the next section for an example.</li>
</ul>
<blockquote>
<ul>
<li><code>type</code> - è¿™æ˜¯æˆ‘ä»¬æ­£åœ¨è¿è¡Œçš„é’©å­ç±»å‹ã€‚ Alembic åŒ…å«ä¸€ä¸ªåä¸º <code>&quot;console_scripts&quot;</code> çš„é’©å­è¿è¡Œå™¨ï¼Œå®ƒä¸“é—¨æ˜¯ä¸€ä¸ª Python å‡½æ•°ï¼Œå®ƒä½¿ç”¨ <code>subprocess.run()</code> é’ˆå¯¹ä¿®è®¢æ–‡ä»¶è°ƒç”¨å•ç‹¬çš„ Python è„šæœ¬ã€‚ å¯¹äºè‡ªå®šä¹‰ç¼–å†™çš„é’©å­å‡½æ•°ï¼Œæ­¤é…ç½®å˜é‡å°†å¼•ç”¨æ³¨å†Œè‡ªå®šä¹‰é’©å­çš„åç§°ï¼› æœ‰å…³ç¤ºä¾‹ï¼Œè¯·å‚è§ä¸‹ä¸€èŠ‚ã€‚</li>
</ul>
</blockquote>
<p>The following configuration options are specific to the <code>&quot;console_scripts&quot;</code> hook runner:</p>
<blockquote>
<p>ä»¥ä¸‹é…ç½®é€‰é¡¹ç‰¹å®šäº <code>&quot;console_scripts&quot;</code> é’©å­è¿è¡Œï¼š</p>
</blockquote>
<ul>
<li>
<p><code>entrypoint</code> - the name of the <a href="https://setuptools.readthedocs.io/en/latest/pkg_resources.html#entry-points">setuptools entrypoint</a> that is used to define the console script. Within the scope of standard Python console scripts, this name will match the name of the shell command that is usually run for the code formatting tool, in this case <code>black</code>.</p>
</li>
<li>
<p><code>options</code> - a line of command-line options that will be passed to the code formatting tool. In this case, we want to run the command <code>black /path/to/revision.py -l 79</code>. By default, the revision path is positioned as the first argument. In order specify a different position, we can use the <code>REVISION_SCRIPT_FILENAME</code> token as illustrated by the subsequent examples.</p>
<p><strong>Note</strong>: Make sure options for the script are provided such that it will rewrite the input file <strong>in place</strong>. For example, when running autopep8, the <code>--in-place</code> option should be provided:</p>
<pre><code class="language-ini">[post_write_hooks]
hooks = autopep8
autopep8.type = console_scripts
autopep8.entrypoint = autopep8
autopep8.options = --in-place REVISION_SCRIPT_FILENAME
</code></pre>
</li>
<li>
<p><code>cwd</code> - optional working directory from which the console script is run.</p>
</li>
</ul>
<blockquote>
<ul>
<li>
<p><code>entrypoint</code> - ç”¨äºå®šä¹‰æ§åˆ¶å°è„šæœ¬çš„ <a href="https://setuptools.readthedocs.io/en/latest/pkg_resources.html#entry-points">setuptools entrypoint</a> çš„åç§°ã€‚ åœ¨æ ‡å‡† Python æ§åˆ¶å°è„šæœ¬çš„èŒƒå›´å†…ï¼Œæ­¤åç§°å°†åŒ¹é…é€šå¸¸ä¸ºä»£ç æ ¼å¼åŒ–å·¥å…·è¿è¡Œçš„ shell å‘½ä»¤çš„åç§°ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º<code>â€œblackâ€</code>ã€‚</p>
</li>
<li>
<p><code>options</code> - å°†ä¼ é€’ç»™ä»£ç æ ¼å¼åŒ–å·¥å…·çš„å‘½ä»¤è¡Œé€‰é¡¹ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¦è¿è¡Œå‘½ä»¤â€œblack /path/to/revision.py -l 79â€ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä¿®è®¢è·¯å¾„å®šä½ä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚ ä¸ºäº†æŒ‡å®šä¸åŒçš„ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>REVISION_SCRIPT_FILENAME</code> æ ‡è®°ï¼Œå¦‚åç»­ç¤ºä¾‹æ‰€ç¤ºã€‚</p>
<p><strong>æ³¨æ„:</strong> ç¡®ä¿æä¾›äº†è„šæœ¬é€‰é¡¹ï¼Œä»¥ä¾¿å®ƒä¼šåœ¨ <strong>åŸåœ°</strong> é‡å†™è¾“å…¥æ–‡ä»¶ã€‚ ä¾‹å¦‚ï¼Œåœ¨è¿è¡Œ <code>autopep8</code> æ—¶ï¼Œåº”æä¾› <code>--in-place</code> é€‰é¡¹ï¼š</p>
<pre><code class="language-ini">[post_write_hooks]
hooks = autopep8
autopep8.type = console_scripts
autopep8.entrypoint = autopep8
autopep8.options = --in-place REVISION_SCRIPT_FILENAME
</code></pre>
</li>
<li>
<p><code>cwd</code> - è¿è¡Œæ§åˆ¶å°è„šæœ¬çš„å¯é€‰å·¥ä½œç›®å½•ã€‚</p>
</li>
</ul>
</blockquote>
<p>When running <code>alembic revision -m &quot;rev1&quot;</code>, we will now see the <code>black</code> toolâ€™s output as well:</p>
<blockquote>
<p>å½“è¿è¡Œ <code>alembic revision -m &quot;rev1&quot;</code> æ—¶ï¼Œæˆ‘ä»¬ç°åœ¨ä¹Ÿä¼šçœ‹åˆ° <code>black</code> å·¥å…·çš„è¾“å‡ºï¼š</p>
</blockquote>
<pre><code class="language-bash">$ alembic revision -m &quot;rev1&quot;
  Generating /path/to/project/versions/481b13bc369a_rev1.py ... done
  Running post write hook &quot;black&quot; ...
reformatted /path/to/project/versions/481b13bc369a_rev1.py
All done! âœ¨ ğŸ° âœ¨
1 file reformatted.
  done
</code></pre>
<p>Hooks may also be specified as a list of names, which correspond to hook runners that will run sequentially. As an example, we can also run the <a href="https://pypi.org/project/zimports/">zimports</a> import rewriting tool (written by Alembicâ€™s author) subsequent to running the <code>black</code> tool, using a configuration as follows:</p>
<blockquote>
<p>é’©å­ä¹Ÿå¯ä»¥æŒ‡å®šä¸ºåç§°åˆ—è¡¨ï¼Œè¿™äº›åç§°å¯¹åº”äºå°†æŒ‰é¡ºåºè¿è¡Œçš„æŒ‚é’©è¿è¡Œå™¨ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è¿è¡Œ <code>black</code> å·¥å…·ä¹‹åè¿è¡Œ <a href="https://pypi.org/project/zimports/">zimports</a> å¯¼å…¥é‡å†™å·¥å…·ï¼ˆç”± Alembic çš„ä½œè€…ç¼–å†™ï¼‰ï¼Œä½¿ç”¨å¦‚ä¸‹é…ç½®ï¼š</p>
</blockquote>
<pre><code class="language-ini">[post_write_hooks]

# format using &quot;black&quot;, then &quot;zimports&quot;
hooks=black, zimports

black.type = console_scripts
black.entrypoint = black
black.options = -l 79 REVISION_SCRIPT_FILENAME

zimports.type = console_scripts
zimports.entrypoint = zimports
zimports.options = --style google REVISION_SCRIPT_FILENAME
</code></pre>
<p>When using the above configuration, a newly generated revision file will be processed first by the â€œblackâ€ tool, then by the â€œzimportsâ€ tool.</p>
<blockquote>
<p>ä½¿ç”¨ä¸Šè¿°é…ç½®æ—¶ï¼Œæ–°ç”Ÿæˆçš„ä¿®è®¢æ–‡ä»¶å°†é¦–å…ˆç”±â€œblackâ€å·¥å…·å¤„ç†ï¼Œç„¶åç”±â€œzimportsâ€å·¥å…·å¤„ç†ã€‚</p>
</blockquote>
<p>Alternatively, one can run pre-commit itself as follows:</p>
<blockquote>
<p>æˆ–è€…ï¼Œå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼è¿è¡Œé¢„æäº¤æœ¬èº«ï¼š</p>
</blockquote>
<pre><code class="language-ini">[post_write_hooks]

hooks = pre-commit

pre-commit.type = console_scripts
pre-commit.entrypoint = pre-commit
pre-commit.options = run --files REVISION_SCRIPT_FILENAME
pre-commit.cwd = %(here)s
</code></pre>
<p>(The last line helps to ensure that the <code>.pre-commit-config.yaml</code> file will always be found, regardless of from where the hook was called.)</p>
<blockquote>
<p>(æœ€åä¸€è¡Œæœ‰åŠ©äºç¡®ä¿å§‹ç»ˆå¯ä»¥æ‰¾åˆ° <code>.pre-commit-config.yaml</code> æ–‡ä»¶ï¼Œæ— è®ºä»ä½•å¤„è°ƒç”¨é’©å­ã€‚)</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../zh/01_05_applying_post_processing.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../zh/01_05_02_writing_custom_hooks_as_python_functions.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../zh/01_05_applying_post_processing.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../zh/01_05_02_writing_custom_hooks_as_python_functions.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
