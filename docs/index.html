<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>前言 - alembic 中文文档</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="zh/_front_matter.html">前言</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="zh/00_tutorial.html"><strong aria-hidden="true">1.</strong> 指南</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/00_01_the_migration_enviroment.html"><strong aria-hidden="true">1.1.</strong> 迁移环境</a></li><li class="chapter-item "><a href="zh/00_02_creating_an_enviroment.html"><strong aria-hidden="true">1.2.</strong> 创建环境</a></li><li class="chapter-item "><a href="zh/00_03_Editing_the_ini_file.html"><strong aria-hidden="true">1.3.</strong> 编辑.ini文件</a></li><li class="chapter-item "><a href="zh/00_04_create_a_migration_script.html"><strong aria-hidden="true">1.4.</strong> 创建迁移脚本</a></li><li class="chapter-item "><a href="zh/00_05_Running_our_first_migration.html"><strong aria-hidden="true">1.5.</strong> 初次运行迁移</a></li><li class="chapter-item "><a href="zh/00_06_Running_our_second_migration.html"><strong aria-hidden="true">1.6.</strong> 再次运行迁移</a></li><li class="chapter-item "><a href="zh/00_07_partial_revision_identifiers.html"><strong aria-hidden="true">1.7.</strong> 部分修订标识符</a></li><li class="chapter-item "><a href="zh/00_08_relative_migration_identifiers.html"><strong aria-hidden="true">1.8.</strong> 相对迁移标识符</a></li><li class="chapter-item "><a href="zh/00_09_getting_information.html"><strong aria-hidden="true">1.9.</strong> 获取信息</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/00_09_01_viewing_history_ranges.html"><strong aria-hidden="true">1.9.1.</strong> 查看历史范围</a></li></ol></li><li class="chapter-item "><a href="zh/00_10_downgrading.html"><strong aria-hidden="true">1.10.</strong> 降级</a></li><li class="chapter-item "><a href="zh/00_11_next_steps.html"><strong aria-hidden="true">1.11.</strong> 下一步</a></li></ol></li><li class="chapter-item expanded "><a href="zh/01_auto_generating_migrations.html"><strong aria-hidden="true">2.</strong> 自动生成迁移</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/01_01_what_does_autogenerate_detect.html"><strong aria-hidden="true">2.1.</strong> Autogenerate 检测什么</a></li><li class="chapter-item "><a href="zh/01_02_autogenerating_multiple_metadata_collections.html"><strong aria-hidden="true">2.2.</strong> 自动生成多个元数据集合</a></li><li class="chapter-item "><a href="zh/01_03_controlling_what_to_be_autogenerated.html"><strong aria-hidden="true">2.3.</strong> 控制要自动生成的内容</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/01_03_01_omitting_schema_names_from_the_autogenerate_process.html"><strong aria-hidden="true">2.3.1.</strong> 从自动生成过程中省略模式名称</a></li><li class="chapter-item "><a href="zh/01_03_02_omitting_table_names_from_the_autogenerate_process.html"><strong aria-hidden="true">2.3.2.</strong> 从自动生成过程中省略表名</a></li><li class="chapter-item "><a href="zh/01_03_03_omitting_based_on_object.html"><strong aria-hidden="true">2.3.3.</strong> 基于对象的省略</a></li></ol></li><li class="chapter-item "><a href="zh/01_04_comparing_and_rendering_types.html"><strong aria-hidden="true">2.4.</strong> 比较和渲染类型</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/01_04_01_controlling_the_module_prefix.html"><strong aria-hidden="true">2.4.1.</strong> 控制模块前缀</a></li><li class="chapter-item "><a href="zh/01_04_02_affecting_the_rendering_of_types_themselves.html"><strong aria-hidden="true">2.4.2.</strong> 影响类型本身的渲染</a></li><li class="chapter-item "><a href="zh/01_04_03_comparing_types.html"><strong aria-hidden="true">2.4.3.</strong> 比较类型</a></li></ol></li><li class="chapter-item "><a href="zh/01_05_applying_post_processing.html"><strong aria-hidden="true">2.5.</strong> 将提交处理过程和 Python 代码格式化程序应用于生成的修订</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/01_05_01_basic_formatter_configuration.html"><strong aria-hidden="true">2.5.1.</strong> 基本格式化程序配置</a></li><li class="chapter-item "><a href="zh/01_05_02_writing_custom_hooks_as_python_functions.html"><strong aria-hidden="true">2.5.2.</strong> 自定义Python函数钩子</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="zh/02_generating_sql_scripts.html"><strong aria-hidden="true">3.</strong> 生成SQL脚本(又称离线模式)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/02_01_getting_the_start_version.html"><strong aria-hidden="true">3.1.</strong> Getting the Start Version</a></li><li class="chapter-item "><a href="zh/02_02_writing_migration_scripts_to_support_script_generation.html"><strong aria-hidden="true">3.2.</strong> Writing Migration Scripts to Support Script Generation</a></li><li class="chapter-item "><a href="zh/02_03_customizing_the_environment.html"><strong aria-hidden="true">3.3.</strong> Customizing the Environment</a></li></ol></li><li class="chapter-item expanded "><a href="zh/03_the_importance_of_naming_constraints.html"><strong aria-hidden="true">4.</strong> 命名约束的重要性</a></li><li class="chapter-item expanded "><a href="zh/04_running_batch_migrations_for_sqlite_and_other_databases.html"><strong aria-hidden="true">5.</strong> 在SQLite和其他数据中运行&quot;Batch&quot;迁移脚本</a></li><li class="chapter-item expanded "><a href="zh/05_working_with_branches.html"><strong aria-hidden="true">6.</strong> 工作分支</a></li><li class="chapter-item expanded "><a href="zh/06_operation_reference.html"><strong aria-hidden="true">7.</strong> 操作参考</a></li><li class="chapter-item expanded "><a href="zh/07_cook_book.html"><strong aria-hidden="true">8.</strong> cookbook</a></li><li class="chapter-item expanded "><a href="zh/08_api_details.html"><strong aria-hidden="true">9.</strong> API详细</a></li><li class="chapter-item expanded "><a href="zh/09_change_log.html"><strong aria-hidden="true">10.</strong> 更新历史</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="en/index.html">原文 - 英文</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">alembic 中文文档</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="前言"><a class="header" href="#前言">前言</a></h1>
<p><a href="https://alembic.sqlalchemy.org/">Alembic</a> is a lightweight database migration tool for usage with the SQLAlchemy Database Toolkit for Python.</p>
<blockquote>
<p><a href="https://alembic.sqlalchemy.org/">Alembic</a> 是一种轻量级数据库迁移工具，可与<a href="https://www.python.org/">Python</a>的 <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a> 数据库库工具包一起使用。</p>
</blockquote>
<h1 id="front-matter-指南"><a class="header" href="#front-matter-指南">Front Matter (指南)</a></h1>
<p>Information about the Alembic project.</p>
<blockquote>
<p>有关 Alembic 项目的信息。</p>
</blockquote>
<h2 id="project-homepage-项目主页"><a class="header" href="#project-homepage-项目主页">Project Homepage (项目主页)</a></h2>
<p>Alembic is hosted on GitHub at <a href="https://github.com/sqlalchemy/alembic">https://github.com/sqlalchemy/alembic</a> under the SQLAlchemy organization.</p>
<blockquote>
<p>Alembic 托管在 GitHub 上，网址为 <a href="https://github.com/sqlalchemy/alembic">https://github.com/sqlalchemy/alembic</a>，隶属于 SQLAlchemy 组织。</p>
</blockquote>
<p>Releases and project status are available on Pypi at <a href="https://pypi.python.org/pypi/alembic">https://pypi.python.org/pypi/alembic</a>.</p>
<blockquote>
<p>发布和项目状态可在 Pypi 上获取，网址为 <a href="https://pypi.python.org/pypi/alembic">https://pypi.python.org/pypi/alembic</a>。</p>
</blockquote>
<p>The most recent published version of this documentation should be at <a href="https://alembic.sqlalchemy.org">https://alembic.sqlalchemy.org</a>.</p>
<blockquote>
<p>本文档的最新发布版本位于 <a href="https://alembic.sqlalchemy.org">https://alembic.sqlalchemy.org</a>。</p>
</blockquote>
<h2 id="installation-安装"><a class="header" href="#installation-安装">Installation （安装）</a></h2>
<p>While Alembic can be installed system wide, it’s more common that it’s installed local to a <a href="https://docs.python.org/3/tutorial/venv.html">virtual environment</a> , as it also uses libraries such as SQLAlchemy and database drivers that are more appropriate for local installations.</p>
<blockquote>
<p>虽然 Alembic 可以在系统范围内安装，但更常见的是将其安装在本地<a href="https://docs.python.org/3/tutorial/venv.html">虚拟环境</a>中，因为它还使用更适合本地安装的 SQLAlchemy 和数据库驱动程序等库。</p>
</blockquote>
<p>The documentation below is only one kind of approach to installing Alembic for a project; there are many such approaches. The documentation below is provided only for those users who otherwise have no specific project setup chosen.</p>
<blockquote>
<p>下面的文档只是为项目安装 Alembic 的一种方法； 有很多这样的方法。 下面的文档仅提供给那些没有选择特定项目设置的用户。</p>
</blockquote>
<p>To build a virtual environment for a specific project, first we assume that <a href="https://pypi.org/project/virtualenv/">Python virtualenv</a> is installed systemwide. Then:</p>
<blockquote>
<p>要为特定项目构建虚拟环境，首先我们假设 <a href="https://pypi.org/project/virtualenv/">Python virtualenv</a> 已安装在系统范围内。 然后：</p>
</blockquote>
<pre><code class="language-bash">cd /path/to/your/project
virtualenv .venv
</code></pre>
<p>There is now a Python interpreter that you can access in <code>/path/to/your/project/.venv/bin/python</code>, as well as the pip installer tool in <code>/path/to/your/project/.venv/bin/pip</code>.</p>
<blockquote>
<p>现在有一个 Python 解释器，您可以在 <code>/path/to/your/project/.venv/bin/python</code> 中访问，以及 <code>/path/to/your/project/.venv/bin/pip</code> 中的 pip 安装程序工具.</p>
</blockquote>
<p>We now install Alembic as follows:</p>
<blockquote>
<p>我们现在按如下方式安装 Alembic：</p>
</blockquote>
<pre><code class="language-bash">/path/to/your/project/.venv/bin/pip install alembic
</code></pre>
<p>The install will add the alembic command to the virtual environment. All operations with Alembic in terms of this specific virtual environment will then proceed through the usage of this command, as in:</p>
<blockquote>
<p>安装会将 alembic 命令添加到虚拟环境中。 然后，在此特定虚拟环境中使用 Alembic 的所有操作都将通过使用此命令进行，如下所示：</p>
</blockquote>
<pre><code class="language-bash">/path/to/your/project/.venv/bin/alembic init .
</code></pre>
<p>The next step is optional. If our project itself has a setup.py file, we can also install it in the local virtual environment in <a href="https://pip.pypa.io/en/stable/reference/pip_install/#editable-installs">editable mode</a>:</p>
<blockquote>
<p>下一步是可选的。 如果我们的项目本身有setup.py文件，我们也可以在本地虚拟环境中以<a href="https://pip.pypa.io/en/stable/reference/pip_install/#editable-installs">可编辑的模式</a>安装：</p>
</blockquote>
<pre><code class="language-bash">/path/to/your/project/.venv/bin/pip install -e .
</code></pre>
<p>If we don’t “install” the project locally, that’s fine as well; the default alembic.ini file includes a directive <code>prepend_sys_path = .</code> so that the local path is also in sys.path. This allows us to run the alembic command line tool from this directory without our project being “installed” in that environment.</p>
<blockquote>
<p>如果我们不在本地“安装”项目，那也没关系； 默认的 alembic.ini 文件包含一个指令 <code>prepend_sys_path = .</code> 这样本地路径也在 <code>sys.path</code> 中。 这允许我们从该目录运行 alembic 命令行工具，而无需在该环境中“安装”我们的项目。</p>
</blockquote>
<blockquote>
<p><em>Changed in version 1.5.5: Fixed a long-standing issue where the <code>alembic</code> command-line tool would not preserve the default <code>sys.path</code> of <code>.</code> by implementing <code>prepend_sys_path</code> option.</em></p>
</blockquote>
<blockquote>
<p>1.5.5版本更新: 修复了一个长期存在的问题，即 alembic 命令行工具不会通过实现 <code>prepend_sys_path</code> 选项来保留当前目录(<code>.</code>)在<code>sys.path</code>中。</p>
</blockquote>
<p>As a final step, the <a href="https://virtualenv.pypa.io/en/latest/userguide/#activate-script">virtualenv activate</a> tool can be used so that the <code>alembic</code> command is available without any path information, within the context of the current shell:</p>
<blockquote>
<p>作为最后一步，可以使用 <a href="https://virtualenv.pypa.io/en/latest/userguide/#activate-script">virtualenv activate</a> 工具，以便在当前 shell 的上下文中无需任何路径信息即可使用 <code>alembic</code> 命令：</p>
</blockquote>
<pre><code class="language-bash">source /path/to/your/project/.venv/bin/activate
</code></pre>
<h3 id="dependencies-依赖"><a class="header" href="#dependencies-依赖">Dependencies (依赖)</a></h3>
<p>Alembic’s install process will ensure that <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a> is installed, in addition to other dependencies. Alembic will work with SQLAlchemy as of version 1.3.0.</p>
<blockquote>
<p>除了其他依赖项外，<a href="https://alembic.sqlalchemy.org/">Alembic</a> 安装过程将确保安装 <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a>。 从 1.3.0 版本开始，<a href="https://alembic.sqlalchemy.org/">Alembic</a> 将与 <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a> 一起使用。</p>
</blockquote>
<blockquote>
<p>Changed in version 1.5.0: Support for SQLAlchemy older than 1.3.0 was dropped.</p>
</blockquote>
<blockquote>
<p>版本1.5.0更新: 不再支持 1.3.0 版本之前的 SQLAlchemy。</p>
</blockquote>
<p>Alembic supports Python versions 3.6 and above</p>
<blockquote>
<p>Alembic 支持 Python 3.6 及以上版本</p>
</blockquote>
<blockquote>
<p>Changed in version 1.7: Alembic now supports Python 3.6 and newer; support for Python 2.7 has been dropped.</p>
</blockquote>
<blockquote>
<p>版本1.7更新: Alembic 现在支持 Python 3.6 及更新的版本； 已取消对 Python 2.7 的支持。</p>
</blockquote>
<h2 id="community-社区"><a class="header" href="#community-社区">Community (社区)</a></h2>
<p>Alembic is developed by <a href="http://techspot.zzzeek.org/">Mike Bayer</a>, and is loosely associated with the <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a>, <a href="http://www.pylonsproject.org/">Pylons</a>, and <a href="http://www.openstack.org/">Openstack</a> projects.</p>
<blockquote>
<p>Alembic 由 <a href="http://techspot.zzzeek.org/">Mike Bayer</a> 开发，与 <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a>、<a href="http://www.pylonsproject.org/">Pylons</a> 和 <a href="http://www.openstack.org/">Openstack</a> 项目松散关联。</p>
</blockquote>
<p>User issues, discussion of potential bugs and features should be posted to the Alembic Google Group at <a href="https://groups.google.com/group/sqlalchemy-alembic">sqlalchemy-alembic</a>.</p>
<blockquote>
<p>用户问题、潜在错误和功能的讨论应发布到 Alembic 在 Google Group群组上的 <a href="https://groups.google.com/group/sqlalchemy-alembic">sqlalchemy-alembic</a>。</p>
</blockquote>
<h2 id="bugs-问题"><a class="header" href="#bugs-问题">Bugs (问题)</a></h2>
<p>Bugs and feature enhancements to Alembic should be reported on the <a href="https://github.com/sqlalchemy/alembic/issues/">GitHub issue tracker</a>.</p>
<blockquote>
<p>应在 <a href="https://github.com/sqlalchemy/alembic/issues/">GitHub issue tracker</a> 上报告 Alembic 的错误和功能加强。</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                                                    <a rel="next" href="zh/00_tutorial.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                                    <a rel="next" href="zh/00_tutorial.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
