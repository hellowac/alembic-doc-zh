<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>alembic 中文文档</title>
                <meta name="robots" content="noindex" />
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="zh/_front_matter.html">前言</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="zh/00_tutorial.html"><strong aria-hidden="true">1.</strong> 指南</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/00_01_the_migration_enviroment.html"><strong aria-hidden="true">1.1.</strong> 迁移环境</a></li><li class="chapter-item "><a href="zh/00_02_creating_an_enviroment.html"><strong aria-hidden="true">1.2.</strong> 创建环境</a></li><li class="chapter-item "><a href="zh/00_03_Editing_the_ini_file.html"><strong aria-hidden="true">1.3.</strong> 编辑.ini文件</a></li><li class="chapter-item "><a href="zh/00_04_create_a_migration_script.html"><strong aria-hidden="true">1.4.</strong> 创建迁移脚本</a></li><li class="chapter-item "><a href="zh/00_05_Running_our_first_migration.html"><strong aria-hidden="true">1.5.</strong> 初次运行迁移</a></li><li class="chapter-item "><a href="zh/00_06_Running_our_second_migration.html"><strong aria-hidden="true">1.6.</strong> 再次运行迁移</a></li><li class="chapter-item "><a href="zh/00_07_partial_revision_identifiers.html"><strong aria-hidden="true">1.7.</strong> 部分修订标识符</a></li><li class="chapter-item "><a href="zh/00_08_relative_migration_identifiers.html"><strong aria-hidden="true">1.8.</strong> 相对迁移标识符</a></li><li class="chapter-item "><a href="zh/00_09_getting_information.html"><strong aria-hidden="true">1.9.</strong> 获取信息</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/00_09_01_viewing_history_ranges.html"><strong aria-hidden="true">1.9.1.</strong> 查看历史范围</a></li></ol></li><li class="chapter-item "><a href="zh/00_10_downgrading.html"><strong aria-hidden="true">1.10.</strong> 降级</a></li><li class="chapter-item "><a href="zh/00_11_next_steps.html"><strong aria-hidden="true">1.11.</strong> 下一步</a></li></ol></li><li class="chapter-item expanded "><a href="zh/01_auto_generating_migrations.html"><strong aria-hidden="true">2.</strong> 自动生成迁移</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/01_01_what_does_autogenerate_detect.html"><strong aria-hidden="true">2.1.</strong> Autogenerate 检测什么</a></li><li class="chapter-item "><a href="zh/01_02_autogenerating_multiple_metadata_collections.html"><strong aria-hidden="true">2.2.</strong> 自动生成多个元数据集合</a></li><li class="chapter-item "><a href="zh/01_03_controlling_what_to_be_autogenerated.html"><strong aria-hidden="true">2.3.</strong> 控制要自动生成的内容</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/01_03_01_omitting_schema_names_from_the_autogenerate_process.html"><strong aria-hidden="true">2.3.1.</strong> 从自动生成过程中省略模式名称</a></li><li class="chapter-item "><a href="zh/01_03_02_omitting_table_names_from_the_autogenerate_process.html"><strong aria-hidden="true">2.3.2.</strong> 从自动生成过程中省略表名</a></li><li class="chapter-item "><a href="zh/01_03_03_omitting_based_on_object.html"><strong aria-hidden="true">2.3.3.</strong> 基于对象的省略</a></li></ol></li><li class="chapter-item "><a href="zh/01_04_comparing_and_rendering_types.html"><strong aria-hidden="true">2.4.</strong> 比较和渲染类型</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/01_04_01_controlling_the_module_prefix.html"><strong aria-hidden="true">2.4.1.</strong> 控制模块前缀</a></li><li class="chapter-item "><a href="zh/01_04_02_affecting_the_rendering_of_types_themselves.html"><strong aria-hidden="true">2.4.2.</strong> 影响类型本身的渲染</a></li><li class="chapter-item "><a href="zh/01_04_03_comparing_types.html"><strong aria-hidden="true">2.4.3.</strong> 比较类型</a></li></ol></li><li class="chapter-item "><a href="zh/01_05_applying_post_processing.html"><strong aria-hidden="true">2.5.</strong> 将提交处理过程和 Python 代码格式化程序应用于生成的修订</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/01_05_01_basic_formatter_configuration.html"><strong aria-hidden="true">2.5.1.</strong> 基本格式化程序配置</a></li><li class="chapter-item "><a href="zh/01_05_02_writing_custom_hooks_as_python_functions.html"><strong aria-hidden="true">2.5.2.</strong> 自定义Python函数钩子</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="zh/02_generating_sql_scripts.html"><strong aria-hidden="true">3.</strong> 生成SQL脚本(又称离线模式)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="zh/02_01_getting_the_start_version.html"><strong aria-hidden="true">3.1.</strong> Getting the Start Version</a></li><li class="chapter-item "><a href="zh/02_02_writing_migration_scripts_to_support_script_generation.html"><strong aria-hidden="true">3.2.</strong> Writing Migration Scripts to Support Script Generation</a></li><li class="chapter-item "><a href="zh/02_03_customizing_the_environment.html"><strong aria-hidden="true">3.3.</strong> Customizing the Environment</a></li></ol></li><li class="chapter-item expanded "><a href="zh/03_the_importance_of_naming_constraints.html"><strong aria-hidden="true">4.</strong> 命名约束的重要性</a></li><li class="chapter-item expanded "><a href="zh/04_running_batch_migrations_for_sqlite_and_other_databases.html"><strong aria-hidden="true">5.</strong> 在SQLite和其他数据中运行&quot;Batch&quot;迁移脚本</a></li><li class="chapter-item expanded "><a href="zh/05_working_with_branches.html"><strong aria-hidden="true">6.</strong> 工作分支</a></li><li class="chapter-item expanded "><a href="zh/06_operation_reference.html"><strong aria-hidden="true">7.</strong> 操作参考</a></li><li class="chapter-item expanded "><a href="zh/07_cook_book.html"><strong aria-hidden="true">8.</strong> cookbook</a></li><li class="chapter-item expanded "><a href="zh/08_api_details.html"><strong aria-hidden="true">9.</strong> API详细</a></li><li class="chapter-item expanded "><a href="zh/09_change_log.html"><strong aria-hidden="true">10.</strong> 更新历史</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="en/index.html">原文 - 英文</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">alembic 中文文档</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="前言"><a class="header" href="#前言">前言</a></h1>
<p><a href="https://alembic.sqlalchemy.org/">Alembic</a> is a lightweight database migration tool for usage with the SQLAlchemy Database Toolkit for Python.</p>
<blockquote>
<p><a href="https://alembic.sqlalchemy.org/">Alembic</a> 是一种轻量级数据库迁移工具，可与<a href="https://www.python.org/">Python</a>的 <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a> 数据库库工具包一起使用。</p>
</blockquote>
<h1 id="front-matter-指南"><a class="header" href="#front-matter-指南">Front Matter (指南)</a></h1>
<p>Information about the Alembic project.</p>
<blockquote>
<p>有关 Alembic 项目的信息。</p>
</blockquote>
<h2 id="project-homepage-项目主页"><a class="header" href="#project-homepage-项目主页">Project Homepage (项目主页)</a></h2>
<p>Alembic is hosted on GitHub at <a href="https://github.com/sqlalchemy/alembic">https://github.com/sqlalchemy/alembic</a> under the SQLAlchemy organization.</p>
<blockquote>
<p>Alembic 托管在 GitHub 上，网址为 <a href="https://github.com/sqlalchemy/alembic">https://github.com/sqlalchemy/alembic</a>，隶属于 SQLAlchemy 组织。</p>
</blockquote>
<p>Releases and project status are available on Pypi at <a href="https://pypi.python.org/pypi/alembic">https://pypi.python.org/pypi/alembic</a>.</p>
<blockquote>
<p>发布和项目状态可在 Pypi 上获取，网址为 <a href="https://pypi.python.org/pypi/alembic">https://pypi.python.org/pypi/alembic</a>。</p>
</blockquote>
<p>The most recent published version of this documentation should be at <a href="https://alembic.sqlalchemy.org">https://alembic.sqlalchemy.org</a>.</p>
<blockquote>
<p>本文档的最新发布版本位于 <a href="https://alembic.sqlalchemy.org">https://alembic.sqlalchemy.org</a>。</p>
</blockquote>
<h2 id="installation-安装"><a class="header" href="#installation-安装">Installation （安装）</a></h2>
<p>While Alembic can be installed system wide, it’s more common that it’s installed local to a <a href="https://docs.python.org/3/tutorial/venv.html">virtual environment</a> , as it also uses libraries such as SQLAlchemy and database drivers that are more appropriate for local installations.</p>
<blockquote>
<p>虽然 Alembic 可以在系统范围内安装，但更常见的是将其安装在本地<a href="https://docs.python.org/3/tutorial/venv.html">虚拟环境</a>中，因为它还使用更适合本地安装的 SQLAlchemy 和数据库驱动程序等库。</p>
</blockquote>
<p>The documentation below is only one kind of approach to installing Alembic for a project; there are many such approaches. The documentation below is provided only for those users who otherwise have no specific project setup chosen.</p>
<blockquote>
<p>下面的文档只是为项目安装 Alembic 的一种方法； 有很多这样的方法。 下面的文档仅提供给那些没有选择特定项目设置的用户。</p>
</blockquote>
<p>To build a virtual environment for a specific project, first we assume that <a href="https://pypi.org/project/virtualenv/">Python virtualenv</a> is installed systemwide. Then:</p>
<blockquote>
<p>要为特定项目构建虚拟环境，首先我们假设 <a href="https://pypi.org/project/virtualenv/">Python virtualenv</a> 已安装在系统范围内。 然后：</p>
</blockquote>
<pre><code class="language-bash">cd /path/to/your/project
virtualenv .venv
</code></pre>
<p>There is now a Python interpreter that you can access in <code>/path/to/your/project/.venv/bin/python</code>, as well as the pip installer tool in <code>/path/to/your/project/.venv/bin/pip</code>.</p>
<blockquote>
<p>现在有一个 Python 解释器，您可以在 <code>/path/to/your/project/.venv/bin/python</code> 中访问，以及 <code>/path/to/your/project/.venv/bin/pip</code> 中的 pip 安装程序工具.</p>
</blockquote>
<p>We now install Alembic as follows:</p>
<blockquote>
<p>我们现在按如下方式安装 Alembic：</p>
</blockquote>
<pre><code class="language-bash">/path/to/your/project/.venv/bin/pip install alembic
</code></pre>
<p>The install will add the alembic command to the virtual environment. All operations with Alembic in terms of this specific virtual environment will then proceed through the usage of this command, as in:</p>
<blockquote>
<p>安装会将 alembic 命令添加到虚拟环境中。 然后，在此特定虚拟环境中使用 Alembic 的所有操作都将通过使用此命令进行，如下所示：</p>
</blockquote>
<pre><code class="language-bash">/path/to/your/project/.venv/bin/alembic init .
</code></pre>
<p>The next step is optional. If our project itself has a setup.py file, we can also install it in the local virtual environment in <a href="https://pip.pypa.io/en/stable/reference/pip_install/#editable-installs">editable mode</a>:</p>
<blockquote>
<p>下一步是可选的。 如果我们的项目本身有setup.py文件，我们也可以在本地虚拟环境中以<a href="https://pip.pypa.io/en/stable/reference/pip_install/#editable-installs">可编辑的模式</a>安装：</p>
</blockquote>
<pre><code class="language-bash">/path/to/your/project/.venv/bin/pip install -e .
</code></pre>
<p>If we don’t “install” the project locally, that’s fine as well; the default alembic.ini file includes a directive <code>prepend_sys_path = .</code> so that the local path is also in sys.path. This allows us to run the alembic command line tool from this directory without our project being “installed” in that environment.</p>
<blockquote>
<p>如果我们不在本地“安装”项目，那也没关系； 默认的 alembic.ini 文件包含一个指令 <code>prepend_sys_path = .</code> 这样本地路径也在 <code>sys.path</code> 中。 这允许我们从该目录运行 alembic 命令行工具，而无需在该环境中“安装”我们的项目。</p>
</blockquote>
<blockquote>
<p><em>Changed in version 1.5.5: Fixed a long-standing issue where the <code>alembic</code> command-line tool would not preserve the default <code>sys.path</code> of <code>.</code> by implementing <code>prepend_sys_path</code> option.</em></p>
</blockquote>
<blockquote>
<p>1.5.5版本更新: 修复了一个长期存在的问题，即 alembic 命令行工具不会通过实现 <code>prepend_sys_path</code> 选项来保留当前目录(<code>.</code>)在<code>sys.path</code>中。</p>
</blockquote>
<p>As a final step, the <a href="https://virtualenv.pypa.io/en/latest/userguide/#activate-script">virtualenv activate</a> tool can be used so that the <code>alembic</code> command is available without any path information, within the context of the current shell:</p>
<blockquote>
<p>作为最后一步，可以使用 <a href="https://virtualenv.pypa.io/en/latest/userguide/#activate-script">virtualenv activate</a> 工具，以便在当前 shell 的上下文中无需任何路径信息即可使用 <code>alembic</code> 命令：</p>
</blockquote>
<pre><code class="language-bash">source /path/to/your/project/.venv/bin/activate
</code></pre>
<h3 id="dependencies-依赖"><a class="header" href="#dependencies-依赖">Dependencies (依赖)</a></h3>
<p>Alembic’s install process will ensure that <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a> is installed, in addition to other dependencies. Alembic will work with SQLAlchemy as of version 1.3.0.</p>
<blockquote>
<p>除了其他依赖项外，<a href="https://alembic.sqlalchemy.org/">Alembic</a> 安装过程将确保安装 <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a>。 从 1.3.0 版本开始，<a href="https://alembic.sqlalchemy.org/">Alembic</a> 将与 <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a> 一起使用。</p>
</blockquote>
<blockquote>
<p>Changed in version 1.5.0: Support for SQLAlchemy older than 1.3.0 was dropped.</p>
</blockquote>
<blockquote>
<p>版本1.5.0更新: 不再支持 1.3.0 版本之前的 SQLAlchemy。</p>
</blockquote>
<p>Alembic supports Python versions 3.6 and above</p>
<blockquote>
<p>Alembic 支持 Python 3.6 及以上版本</p>
</blockquote>
<blockquote>
<p>Changed in version 1.7: Alembic now supports Python 3.6 and newer; support for Python 2.7 has been dropped.</p>
</blockquote>
<blockquote>
<p>版本1.7更新: Alembic 现在支持 Python 3.6 及更新的版本； 已取消对 Python 2.7 的支持。</p>
</blockquote>
<h2 id="community-社区"><a class="header" href="#community-社区">Community (社区)</a></h2>
<p>Alembic is developed by <a href="http://techspot.zzzeek.org/">Mike Bayer</a>, and is loosely associated with the <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a>, <a href="http://www.pylonsproject.org/">Pylons</a>, and <a href="http://www.openstack.org/">Openstack</a> projects.</p>
<blockquote>
<p>Alembic 由 <a href="http://techspot.zzzeek.org/">Mike Bayer</a> 开发，与 <a href="https://docs.sqlalchemy.org/">SQLAlchemy</a>、<a href="http://www.pylonsproject.org/">Pylons</a> 和 <a href="http://www.openstack.org/">Openstack</a> 项目松散关联。</p>
</blockquote>
<p>User issues, discussion of potential bugs and features should be posted to the Alembic Google Group at <a href="https://groups.google.com/group/sqlalchemy-alembic">sqlalchemy-alembic</a>.</p>
<blockquote>
<p>用户问题、潜在错误和功能的讨论应发布到 Alembic 在 Google Group群组上的 <a href="https://groups.google.com/group/sqlalchemy-alembic">sqlalchemy-alembic</a>。</p>
</blockquote>
<h2 id="bugs-问题"><a class="header" href="#bugs-问题">Bugs (问题)</a></h2>
<p>Bugs and feature enhancements to Alembic should be reported on the <a href="https://github.com/sqlalchemy/alembic/issues/">GitHub issue tracker</a>.</p>
<blockquote>
<p>应在 <a href="https://github.com/sqlalchemy/alembic/issues/">GitHub issue tracker</a> 上报告 Alembic 的错误和功能加强。</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tutorial"><a class="header" href="#tutorial">Tutorial</a></h1>
<p><strong>指南</strong></p>
<p>Alembic provides for the creation, management, and invocation of change management scripts for a relational database, using SQLAlchemy as the underlying engine. This tutorial will provide a full introduction to the theory and usage of this tool.</p>
<blockquote>
<p>Alembic 使用 SQLAlchemy 作为底层引擎，为关系数据库提供变更管理脚本的创建、管理和调用。 本教程将全面介绍该工具的理论和用法。</p>
</blockquote>
<p>To begin, make sure Alembic is installed as described at <a href="zh//zh/_front_matter.html#installation-%E5%AE%89%E8%A3%85">Installation</a>. As stated in the linked document, it is usually preferable that Alembic is installed in the <strong>same module / Python path as that of the target project</strong>, usually using a <a href="https://docs.python.org/3/tutorial/venv.html">Python virtual environment</a>, so that when the <code>alembic</code> command is run, the Python script which is invoked by <code>alembic</code>, namely your project’s <code>env.py</code> script, will have access to your application’s models. This is not strictly necessary in all cases, however in the vast majority of cases is usually preferred.</p>
<blockquote>
<p>首先，请确保按照 <a href="zh//zh/_front_matter.html#installation-%E5%AE%89%E8%A3%85">安装</a> 中的说明安装 <code>Alembic</code> 。 如文档中所述，通常最好将 <code>Alembic</code> 安装在与目标项目相同的 / Python 路径的模块中，通常使用<a href="https://docs.python.org/3/tutorial/venv.html">Python 虚拟环境</a>，以便在运行 alembic 命令时，Python 脚本 由 alembic 调用，即你项目的 <code>env.py</code> 脚本，将可以访问您的应用程序模型。 这并非在所有情况下都严格必要，但在绝大多数情况下通常是首选。</p>
</blockquote>
<p>The tutorial below assumes the <code>alembic</code> command line utility is present in the local path and when invoked, will have access to the same Python module environment as that of the target project.</p>
<blockquote>
<p>下面的教程假设 <code>alembic</code> 命令行实用程序存在于本地路径中，并且在调用时，将可以访问与目标项目相同的 Python 模块环境。</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="迁移环境"><a class="header" href="#迁移环境">迁移环境</a></h1>
<p>Usage of Alembic starts with creation of the <em>Migration Environment</em>. This is a directory of scripts that is specific to a particular application. The migration environment is created just once, and is then maintained along with the application’s source code itself. The environment is created using the <em>init</em> command of Alembic, and is then customizable to suit the specific needs of the application.</p>
<blockquote>
<p>使用 Alembic 从创建<em><strong>迁移环境</strong></em>开始。这是独立于应用程序的特别脚本目录。迁移环境只创建一次，然后与应用程序的源代码本身一起维护。该环境是使用 Alembic 的 <code>init</code> 命令创建的，然后可以自定义以满足应用程序的特别需求。</p>
</blockquote>
<p>The structure of this environment, including some generated migration scripts, looks like:</p>
<blockquote>
<p>这个环境的结构，包括一些生成的迁移脚本，看起来像：</p>
</blockquote>
<pre><code class="language-text">yourproject/
    alembic/
        env.py
        README
        script.py.mako
        versions/
            3512b954651e_add_account.py
            2b1ae634e5cd_add_order_id.py
            3adcc9a56557_rename_username_field.py
</code></pre>
<p>The directory includes these directories/files:</p>
<blockquote>
<p>该目录包括以下目录/文件：</p>
</blockquote>
<ul>
<li>
<p><strong>yourproject</strong> - this is the root of your application’s source code, or some directory within it.</p>
</li>
<li>
<blockquote>
<p><strong>yourproject</strong> - 这是应用程序源代码的根目录，或其中的某个目录。</p>
</blockquote>
</li>
<li>
<p><strong>alembic</strong> - this directory lives within your application’s source tree and is the home of the migration environment. It can be named anything, and a project that uses multiple databases may even have more than one.</p>
</li>
<li>
<blockquote>
<p><strong>alembic</strong> - 该目录位于应用程序的源代码树中，是迁移环境的主目录。 它可以命名为任何名称，一个使用多个数据库的项目甚至可能有多个。</p>
</blockquote>
</li>
<li>
<p><strong>env.py</strong> - This is a Python script that is run whenever the alembic migration tool is invoked. At the very least, it contains instructions to configure and generate a SQLAlchemy engine, procure a connection from that engine along with a transaction, and then invoke the migration engine, using the connection as a source of database connectivity.</p>
</li>
<li>
<blockquote>
<p><strong>env.py</strong> - 这是一个 Python 脚本，只要调用 alembic 迁移工具就会运行。至少，它包含配置和生成 SQLAlchemy 引擎的指令，从该引擎获取连接以及事务，然后调用迁移引擎，使用该连接作为数据库连接的来源。</p>
</blockquote>
<p>The <code>env.py</code> script is part of the generated environment so that the way migrations run is entirely customizable. The exact specifics of how to connect are here, as well as the specifics of how the migration environment are invoked. The script can be modified so that multiple engines can be operated upon, custom arguments can be passed into the migration environment, application-specific libraries and models can be loaded in and made available.</p>
<blockquote>
<p><code>env.py</code> 脚本是生成环境的一部分，因此迁移运行的方式是完全可定制的。 如何连接的确切细节在这里，以及如何调用迁移环境的细节。 可以修改脚本以便可以操作多个引擎，可以将自定义参数传递到迁移环境中，可以加载特定于应用程序的库和模型并使其可用。</p>
</blockquote>
<p>Alembic includes a set of initialization templates which feature different varieties of <code>env.py</code> for different use cases.</p>
<blockquote>
<p>Alembic 包含一组初始化模板，其中包含针对不同用例的不同类型的 <code>env.py</code>。</p>
</blockquote>
</li>
<li>
<p><strong>README</strong> - included with the various environment templates, should have something informative.</p>
</li>
<li>
<blockquote>
<p><strong>README</strong> - 包含在各种环境模板中，应该有的一些说明信息。</p>
</blockquote>
</li>
<li>
<p><strong>script.py.mako</strong> - This is a <a href="http://www.makotemplates.org/">Mako</a> template file which is used to generate new migration scripts. Whatever is here is used to generate new files within <code>versions/</code>. This is scriptable so that the structure of each migration file can be controlled, including standard imports to be within each, as well as changes to the structure of the <code>upgrade()</code> and <code>downgrade()</code> functions. For example, the <code>multidb</code> environment allows for multiple functions to be generated using a naming scheme <code>upgrade_engine1()</code>, <code>upgrade_engine2()</code>.</p>
</li>
<li>
<blockquote>
<p><strong>script.py.mako</strong> - 这是一个 <a href="http://www.makotemplates.org/">Mako</a> 模板文件，用于生成新的迁移脚本。 这里的任何内容都用于在 <code>versions/</code> 中生成新文件。 这是可编的写脚本，因此可以控制每个迁移文件的结构，包括每个迁移文件中的标准导入，以及对 <code>upgrade()</code> 和 <code>downgrade()</code> 函数结构的更改。 例如，多数据库(multidb)环境允许使用命名方案<code>upgrade_engine1()</code>、<code>upgrade_engine2()</code>生成多个函数。</p>
</blockquote>
</li>
<li>
<p><strong>versions/</strong> - This directory holds the individual version scripts. Users of other migration tools may notice that the files here don’t use ascending integers, and instead use a partial GUID approach. In Alembic, the ordering of version scripts is relative to directives within the scripts themselves, and it is theoretically possible to “splice” version files in between others, allowing migration sequences from different branches to be merged, albeit carefully by hand.</p>
</li>
<li>
<blockquote>
<p><strong>versions/</strong> 该目录包含各个版本的脚本。 其他迁移工具的用户可能会注意到这里的文件不使用升序整数，而是使用部分 GUID 方法。 在 Alembic 中，版本脚本的排序与脚本本身内的指令相关，理论上可以在其他版本文件之间“拼接”版本文件，允许合并来自不同分支的迁移序列，尽管需要小心的手动合并。</p>
</blockquote>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="creating-an-environment"><a class="header" href="#creating-an-environment">Creating an Environment</a></h1>
<p><strong>创建环境</strong></p>
<p>With a basic understanding of what the environment is, we can create one using <code>alembic init</code>. This will create an environment using the “generic” template:</p>
<p>对环境是什么有了基本的了解后，我们可以使用 <code>alembic init</code> 创建一个。 这将使用“通用（generic）”模板创建一个环境：</p>
<pre><code class="language-bash">cd /path/to/yourproject
source /path/to/yourproject/.venv/bin/activate   # assuming a local virtualenv (激活一个本地环境)
alembic init alembic
</code></pre>
<p>Where above, the init command was called to generate a migrations directory called alembic:</p>
<p>在上面的地方，调用了 <code>init</code> 命令来生成一个名为 alembic 的迁移目录：</p>
<pre><code class="language-bash">Creating directory /path/to/yourproject/alembic...done
Creating directory /path/to/yourproject/alembic/versions...done
Generating /path/to/yourproject/alembic.ini...done
Generating /path/to/yourproject/alembic/env.py...done
Generating /path/to/yourproject/alembic/README...done
Generating /path/to/yourproject/alembic/script.py.mako...done
Please edit configuration/connection/logging settings in '/path/to/yourproject/alembic.ini' before proceeding.
</code></pre>
<p>Alembic also includes other environment templates. These can be listed out using the <code>list_templates</code> command:</p>
<p>Alembic 还包括其他环境模板。 这些可以使用 <code>list_templates</code> 命令列出：</p>
<pre><code class="language-bash">$ alembic list_templates
Available templates:

generic - Generic single-database configuration.
async - Generic single-database configuration with an async dbapi.
multidb - Rudimentary multi-database configuration.
pylons - Configuration that reads from a Pylons project environment.

Templates are used via the 'init' command, e.g.:

  alembic init --template pylons ./scripts
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="editing-the-ini-file"><a class="header" href="#editing-the-ini-file">Editing the .ini File</a></h1>
<p><strong>编辑.ini文件</strong></p>
<p>Alembic placed a file <code>alembic.ini</code> into the current directory. This is a file that the <code>alembic</code> script looks for when invoked. This file can exist in a different directory, with the location to it specified by either the <code>--config</code> option for the <code>alembic</code> runner or the <code>ALEMBIC_CONFIG</code> environment variable (the former takes precedence).</p>
<blockquote>
<p>Alembic 将文件 <code>alembic.ini</code> 放入当前目录。 这是 <code>alembic</code> 脚本在调用时查找的文件。 该文件可以存在于不同的目录中，其位置由 alembic runner 的 <code>--config</code> 选项或 <code>ALEMBIC_CONFIG</code> 环境变量（前者优先）指定。</p>
</blockquote>
<p>The file generated with the “generic” configuration looks like:</p>
<blockquote>
<p>使用“通用(generic)”配置生成的文件如下所示：</p>
</blockquote>
<pre><code class="language-ini"># A generic, single database configuration.
# 通用的单一数据库配置。

[alembic]
# path to migration scripts
# 迁移脚本的路径
script_location = alembic

# template used to generate migration files
# 用于生成迁移文件的模板
# file_template = %%(rev)s_%%(slug)s

# sys.path path, will be prepended to sys.path if present.
# defaults to the current working directory.
# (new in 1.5.5)

# sys.path 路径，如果存在，将被添加到 sys.path 之前。
# 默认为当前工作目录。
# 版本1.5.5中新增
prepend_sys_path = .

# timezone to use when rendering the date within the migration file
# as well as the filename.
# If specified, requires the python-dateutil library that can be
# installed by adding `alembic[tz]` to the pip requirements
# string value is passed to dateutil.tz.gettz()
# leave blank for localtime

# 在迁移文件中呈现日期以及文件名时要使用的时区。
# 如果指定，则需要可以通过将 `alembic[tz]` 添加到 pip 要求来安装的 python-dateutil 库
# 字符串值将传递给 dateutil.tz.gettz() 
# 本地时间留空
# timezone =

# max length of characters to apply to the
# &quot;slug&quot; field

# 应用于“slug”字段的最大字符长度
# truncate_slug_length = 40

# set to 'true' to run the environment during
# the 'revision' command, regardless of autogenerate

# 设置为 'true' 以在 'revision' 命令期间运行环境，而无论是否自动生成
# revision_environment = false

# set to 'true' to allow .pyc and .pyo files without
# a source .py file to be detected as revisions in the
# versions/ directory

# 设置为“true”以允许将没有源 .py 文件的 .pyc 和 .pyo 文件检测为 `versions/` 目录中的版本文件
# sourceless = false

# version location specification; This defaults
# to ${script_location}/versions.  When using multiple version
# directories, initial revisions must be specified with --version-path.
# The path separator used here should be the separator specified by &quot;version_path_separator&quot; below.

# 版本位置规范； 这默认为`${script_location}/versions`。 使用多个版本目录时，必须使用 --version-path 指定初始版本。
# 这里使用的路径分隔符应该是下面“version_path_separator”指定的分隔符。
# version_locations = %(here)s/bar:%(here)s/bat:${script_location}/versions

# version path separator; As mentioned above, this is the character used to split
# version_locations. The default within new alembic.ini files is &quot;os&quot;, which uses os.pathsep.
# If this key is omitted entirely, it falls back to the legacy behavior of splitting on spaces and/or commas.
# Valid values for version_path_separator are:
#
# 版本路径分隔符； 如上所述，这是用于拆分 version_locations 的字符。 新 alembic.ini 文件中的默认值是“os”，它使用 os.pathsep。
# 如果这个键被完全省略，它会退回到在空格和/或逗号上分割的传统行为。
# version_path_separator 的有效值为：
# 
# version_path_separator = :
# version_path_separator = ;
# version_path_separator = space
version_path_separator = os  # Use os.pathsep. Default configuration used for new projects. (使用 os.pathsep。 用于新项目的默认配置。)

# the output encoding used when revision files
# are written from script.py.mako
# 从 script.py.mako 写入修订文件时使用的输出编码
# output_encoding = utf-8

sqlalchemy.url = driver://user:pass@localhost/dbname

# [post_write_hooks]
# This section defines scripts or Python functions that are run
# on newly generated revision scripts.  See the documentation for further
# detail and examples
# 本节定义在新生成的修订脚本上运行的脚本或 Python 函数。 有关更多详细信息和示例，请参阅文档

# format using &quot;black&quot; - use the console_scripts runner,
# against the &quot;black&quot; entrypoint
# 使用“black”格式 - 使用 console_scripts runner，针对“black”入口点
# hooks = black
# black.type = console_scripts
# black.entrypoint = black
# black.options = -l 79 REVISION_SCRIPT_FILENAME

# Logging configuration
# 日志记录配置
[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console
qualname =

[logger_sqlalchemy]
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S
</code></pre>
<p>The file is read using <strong>Python’s ConfigParser.SafeConfigParser</strong> object. The <code>%(here)s</code> variable is provided as a substitution variable, which can be used to produce absolute pathnames to directories and files, as we do above with the path to the Alembic script location.</p>
<blockquote>
<p>该文件是使用 Python 的 <strong>ConfigParser.SafeConfigParser</strong> 对象读取的。 <strong>%(here)s</strong> 变量作为替代变量提供，可用于生成目录和文件的绝对路径名，就像我们上面对 Alembic 脚本位置的路径所做的那样。</p>
</blockquote>
<p>This file contains the following features:</p>
<blockquote>
<p>该文件包含以下功能：</p>
</blockquote>
<ul>
<li>
<p>[alembic] - this is the section read by Alembic to determine configuration. Alembic itself does not directly read any other areas of the file. The name “alembic” can be customized using the <strong>--name</strong> commandline flag; see <a href="zh//zh/07_cook_book.html">Run Multiple Alembic Environments from one .ini</a> file for a basic example of this.</p>
</li>
<li>
<blockquote>
<p>[alembic] - 这是 Alembic 读取的用于确定配置的部分。 Alembic 本身不直接读取文件的任何其他区域。 可以使用 <strong>--name</strong> 命令行标志自定义名称“alembic”； 有关此操作的基本示例，请参阅<a href="zh//zh/07_cook_book.html">从一个 .ini 文件运行多个 Alembic 环境</a>。</p>
</blockquote>
</li>
<li>
<p><strong>script_location</strong> - this is the location of the Alembic environment. It is normally specified as a filesystem location, either relative or absolute. If the location is a relative path, it’s interpreted as relative to the current directory.</p>
</li>
<li>
<blockquote>
<p><strong>script_location</strong> - 这是 Alembic 环境的位置。 它通常被指定为相对或绝对的文件系统位置。 如果位置是相对路径，则将其解释为相对于当前目录。</p>
</blockquote>
<p>This is the only key required by Alembic in all cases. The generation of the .ini file by the command <code>alembic init alembic</code> automatically placed the directory name <code>alembic</code> here. The special variable <code>%(here)s</code> can also be used, as in <code>%(here)s/alembic</code>.</p>
<blockquote>
<p>这是 Alembic 在所有情况下都需要的唯一密钥。 通过命令 <code>alembic init alembic</code> 生成的 <code>.ini</code> 文件会自动将目录名 <code>alembic</code> 放置在这里。 也可以使用特殊变量 <code>%(here)s</code>，如 <code>%(here)s/alembic</code>。</p>
</blockquote>
<p>For support of applications that package themselves into .egg files, the value can also be specified as a <a href="https://setuptools.readthedocs.io/en/latest/pkg_resources.html">package resource</a>, in which case <strong>resource_filename()</strong> is used to find the file (new in 0.2.2). Any non-absolute URI which contains colons is interpreted here as a resource name, rather than a straight filename.</p>
<blockquote>
<p>为了支持将自身打包成 .egg 文件的应用程序，该值也可以指定为<a href="https://setuptools.readthedocs.io/en/latest/pkg_resources.html">包资源</a>，在这种情况下，<strong>resource_filename()</strong> 用于查找文件（版本0.2.2 中的新功能）。 任何包含冒号的非绝对 URI 在这里都被解释为资源名称，而不是直接的文件名。</p>
</blockquote>
</li>
<li>
<p><strong>file_template</strong> - this is the naming scheme used to generate new migration files. The value present is the default, so is commented out. Tokens available include:</p>
</li>
<li>
<blockquote>
<p><strong>file_template</strong> - 这是用于生成新迁移文件的命名方案。 存在的值是默认值，因此被注释掉。 可用的token包括：</p>
</blockquote>
<ul>
<li><strong>%%(rev)s</strong> - revision id (修订号)</li>
<li><strong>%%(slug)s</strong> - a truncated string derived from the revision message (从修订消息派生的截断字符串)</li>
<li><strong>%%(year)d</strong>, <strong>%%(month).2d</strong>, <strong>%%(day).2d</strong>, <strong>%%(hour).2d</strong>, <strong>%%(minute).2d</strong>, <strong>%%(second).2d</strong> - components of the create date, by default <strong>datetime.datetime.now()</strong> unless the <strong>timezone</strong> configuration option is also used. （创建日期的组成部分，默认为 <strong>datetime.datetime.now()</strong> 除非还使用了 <strong>timezone</strong> 配置选项。）</li>
</ul>
</li>
<li>
<p><strong>timezone</strong> - an optional timezone name (e.g. UTC, EST5EDT, etc.) that will be applied to the timestamp which renders inside the migration file’s comment as well as within the filename. This option requires installing the <strong>python-dateutil</strong> library. If <strong>timezone</strong> is specified, the create date object is no longer derived from <strong>datetime.datetime.now()</strong> and is instead generated as:</p>
</li>
<li>
<blockquote>
<p><strong>timezone</strong> - 一个可选的时区名称（例如 UTC、EST5EDT 等），它将应用于在迁移文件的注释以及文件名中呈现的时间戳。 此选项需要安装 <strong>python-dateutil</strong> 库。 如果指定了时区，则创建日期对象不再从 <strong>datetime.datetime.now()</strong> 派生，而是生成为：</p>
</blockquote>
<pre><code class="language-python">datetime.datetime.utcnow().replace(
    tzinfo=dateutil.tz.tzutc()
).astimezone(
    dateutil.tz.gettz(&lt;timezone&gt;)
)
</code></pre>
</li>
<li>
<p><strong>truncate_slug_length</strong> - defaults to 40, the max number of characters to include in the “slug” field.</p>
</li>
<li>
<blockquote>
<p><strong>truncate_slug_length</strong> - 默认为 40，即“slug”字段中包含的最大字符数。</p>
</blockquote>
</li>
<li>
<p><strong>sqlalchemy.url</strong> - A URL to connect to the database via SQLAlchemy. This configuration value is only used if the <strong>env.py</strong> file calls upon them; in the “generic” template, the call to <strong>config.get_main_option(&quot;sqlalchemy.url&quot;)</strong> in the <strong>run_migrations_offline()</strong> function and the call to <strong>engine_from_config(prefix=&quot;sqlalchemy.&quot;)</strong> in the <strong>run_migrations_online()</strong> function are where this key is referenced. If the SQLAlchemy URL should come from some other source, such as from environment variables or a global registry, or if the migration environment makes use of multiple database URLs, the developer is encouraged to alter the <strong>env.py</strong> file to use whatever methods are appropriate in order to acquire the database URL or URLs.</p>
</li>
<li>
<blockquote>
<p><strong>sqlalchemy.url</strong> - 通过 SQLAlchemy 连接到数据库的 URL。 此配置值仅在 <strong>env.py</strong> 文件调用它们时使用； 在“通用”模板中，<strong>run_migrations_offline()</strong> 函数中对 <strong>config.get_main_option(&quot;sqlalchemy.url&quot;)</strong> 的调用和 <strong>run_migrations_online()</strong> 函数中对 <strong>engine_from_config(prefix=&quot;sqlalchemy.&quot;)</strong> 的调用是该键所在的位置参考。 如果 SQLAlchemy URL 应该来自某些其他源，例如来自环境变量或全局注册表，或者如果迁移环境使用多个数据库 URL，则鼓励开发人员更改 <strong>env.py</strong> 文件以使用任何合适的方法以获取数据库 URL 或 其他URL。</p>
</blockquote>
</li>
<li>
<p><strong>revision_environment</strong> - this is a flag which when set to the value ‘true’, will indicate that the migration environment script <strong>env.py</strong> should be run unconditionally when generating new revision files, as well as when running the <strong>alembic history</strong> command.</p>
</li>
<li>
<blockquote>
<p><strong>revision_environment</strong> - 这是一个标志，当设置为值“true”时，将指示在生成新修订文件以及运行 alembic 历史命令时应无条件运行迁移环境脚本 <strong>env.py</strong>。</p>
</blockquote>
</li>
<li>
<p><strong>sourceless</strong> - when set to ‘true’, revision files that only exist as .pyc or .pyo files in the versions directory will be used as versions, allowing “sourceless” versioning folders. When left at the default of ‘false’, only .py files are consumed as version files.</p>
</li>
<li>
<blockquote>
<p><strong>sourceless</strong> - 当设置为“true”时，版本目录中仅作为 .pyc 或 .pyo 文件存在的修订文件将用作版本，允许“无源”版本控制文件夹。 当保留默认值“false”时，只有 .py 文件被用作版本文件。</p>
</blockquote>
</li>
<li>
<p><strong>version_locations</strong> - an optional list of revision file locations, to allow revisions to exist in multiple directories simultaneously. See <a href="zh//zh/07_cook_book.html">Working with Multiple Bases</a> for examples.</p>
</li>
<li>
<blockquote>
<p><strong>version_locations</strong> - 一个可选的修订文件位置列表，允许修订同时存在于多个目录中。 有关示例，请参阅 <a href="zh//zh/07_cook_book.html">Working with Multiple Bases</a>。</p>
</blockquote>
</li>
<li>
<p><strong>version_path_separator</strong> - a separator of <strong>version_locations</strong> paths. It should be defined if multiple version_locations is used. See <a href="zh//zh/07_cook_book.html">Working with Multiple Bases</a> for examples.</p>
</li>
<li>
<blockquote>
<p><strong>version_path_separator</strong> - version_locations 路径的分隔符。 如果使用多个 <strong>version_locations</strong>，则应定义它。 有关示例，请参阅<a href="zh//zh/07_cook_book.html">Working with Multiple Bases</a>。</p>
</blockquote>
</li>
<li>
<p><strong>output_encoding</strong> - the encoding to use when Alembic writes the <strong>script.py.mako</strong> file into a new migration file. Defaults to <code>'utf-8'</code>.</p>
</li>
<li>
<blockquote>
<p><strong>output_encoding</strong> - 当 Alembic 将 <strong>script.py.mako</strong> 文件写入新的迁移文件时使用的编码。 默认为“utf-8”。</p>
</blockquote>
</li>
<li>
<p>[loggers], [handlers], [formatters], [logger_<em>], [handler_</em>], [formatter_*] - these sections are all part of Python’s standard logging configuration, the mechanics of which are documented at <a href="http://docs.python.org/library/logging.config.html#configuration-file-format">Configuration File Format</a>. As is the case with the database connection, these directives are used directly as the result of the <strong>logging.config.fileConfig()</strong> call present in the <strong>env.py</strong> script, which you’re free to modify.</p>
</li>
<li>
<blockquote>
<p>[loggers], [handlers], [formatters], [logger_<em>], [handler_</em>], [formatter_*] - 这些部分都是 Python 标准日志配置的一部分，其机制记录在配置文件格式中。 与数据库连接的情况一样，这些指令直接作为 <strong>env.py</strong> 脚本中存在的 <strong>logging.config.fileConfig()</strong> 调用的结果使用，您可以自由修改。</p>
</blockquote>
</li>
</ul>
<p>For starting up with just a single database and the generic configuration, setting up the SQLAlchemy URL is all that’s needed:</p>
<blockquote>
<p>对于只使用单个数据库和通用配置的启动，只需要设置 SQLAlchemy URL：</p>
</blockquote>
<pre><code class="language-python">sqlalchemy.url = postgresql://scott:tiger@localhost/test
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="create-a-migration-script"><a class="header" href="#create-a-migration-script">Create a Migration Script</a></h1>
<p><strong>创建迁移脚本</strong></p>
<p>With the environment in place we can create a new revision, using <code>alembic revision</code>:</p>
<blockquote>
<p>环境准备好后，我们可以使用 <code>alembic revision</code> 创建一个新修订：</p>
</blockquote>
<pre><code class="language-bash">$ alembic revision -m &quot;create account table&quot;
Generating /path/to/yourproject/alembic/versions/1975ea83b712_create_accoun
t_table.py...done
</code></pre>
<p>A new file <code>1975ea83b712_create_account_table.py</code> is generated. Looking inside the file:</p>
<blockquote>
<p>生成了一个新文件<code>1975ea83b712_create_account_table.py</code>。 文件内容如下:</p>
</blockquote>
<pre><code class="language-python">&quot;&quot;&quot;create account table

Revision ID: 1975ea83b712
Revises:
Create Date: 2011-11-08 11:40:27.089406

&quot;&quot;&quot;

# revision identifiers, used by Alembic.
revision = '1975ea83b712'
down_revision = None
branch_labels = None

from alembic import op
import sqlalchemy as sa

def upgrade():
    pass

def downgrade():
    pass
</code></pre>
<p>The file contains some header information, identifiers for the current revision and a “downgrade” revision, an import of basic Alembic directives, and empty <code>upgrade()</code> and <code>downgrade()</code> functions. Our job here is to populate the <code>upgrade()</code> and <code>downgrade()</code> functions with directives that will apply a set of changes to our database. Typically, <code>upgrade()</code> is required while <code>downgrade()</code> is only needed if down-revision capability is desired, though it’s probably a good idea.</p>
<blockquote>
<p>该文件包含一些标题信息、当前修订和“downgrade”修订的标识符、Alembic 基本的导入指令以及空的 <code>upgrade()</code> 和 <code>downgrade()</code> 函数。我们在这里的工作是使用指令填充 <code>upgrade()</code> 和 <code>downgrade()</code> 函数，这些指令将对我们的数据库应用一组更改。通常，<code>upgrade()</code> 是必需的，而 <code>downgrade()</code> 仅在向下修订功能需要时才使用，尽管这可能是一个好主意。</p>
</blockquote>
<p>Another thing to notice is the <code>down_revision</code> variable. This is how Alembic knows the correct order in which to apply migrations. When we create the next revision, the new file’s <code>down_revision</code> identifier would point to this one:</p>
<blockquote>
<p>另一件需要注意的是 <code>down_revision</code> 变量。 这就是 Alembic 知道应用迁移的正确顺序的方式。 当我们创建下一个修订版时，新文件的 <code>down_revision</code> 标识符将指向这个：</p>
</blockquote>
<pre><code class="language-python"># revision identifiers, used by Alembic.
revision = 'ae1027a6acf'
down_revision = '1975ea83b712'
</code></pre>
<p>Every time Alembic runs an operation against the <code>versions/</code> directory, it reads all the files in, and composes a list based on how the <code>down_revision</code> identifiers link together, with the <code>down_revision</code> of <code>None</code> representing the first file. In theory, if a migration environment had thousands of migrations, this could begin to add some latency to startup, but in practice a project should probably prune old migrations anyway (see the section <a href="zh//en/cookbook.html#building-uptodate">Building an Up to Date Database from Scratch</a> for a description on how to do this, while maintaining the ability to build the current database fully).</p>
<blockquote>
<p>每次 Alembic 对 <code>versions/</code> 目录运行操作时，它都会读取所有文件，并根据 <code>down_revision</code> 标识符链接在一起的方式组成一个列表，其中<code>down_revision</code> 变量为 <code>None</code> 的文件代表第一个迁移文件。 理论上，如果迁移环境有数千次迁移，这在开始迁移时增加一些延迟，但在项目实践中，无论如何都应该精简旧的迁移(有关如何执行此操作的说明，请参阅<a href="zh//en/cookbook.html#building-uptodate">从头开始构建最新数据库部分</a>，同时保持完全构建当前数据库的能力).</p>
</blockquote>
<p>We can then add some directives to our script, suppose adding a new table <code>account</code>:</p>
<blockquote>
<p>然后我们可以向我们的脚本添加一些指令，假设添加一个新表 <code>account</code>：</p>
</blockquote>
<pre><code class="language-python">def upgrade():
    op.create_table(
        'account',
        sa.Column('id', sa.Integer, primary_key=True),
        sa.Column('name', sa.String(50), nullable=False),
        sa.Column('description', sa.Unicode(200)),
    )

def downgrade():
    op.drop_table('account')
</code></pre>
<p><a href="zh//en/ops.html#alembic.operations.Operations.create_table">create_table()</a> and <a href="zh//en/ops.html#alembic.operations.Operations.drop_table">drop_table()</a> are Alembic directives. Alembic provides all the basic database migration operations via these directives, which are designed to be as simple and minimalistic as possible; there’s no reliance upon existing table metadata for most of these directives. They draw upon a global “context” that indicates how to get at a database connection (if any; migrations can dump SQL/DDL directives to files as well) in order to invoke the command. This global context is set up, like everything else, in the <code>env.py</code> script.</p>
<blockquote>
<p><a href="zh//en/ops.html#alembic.operations.Operations.create_table">create_table()</a> 和 <a href="zh//en/ops.html#alembic.operations.Operations.drop_table">drop_table()</a> 是 Alembic 指令。 Alembic 通过这些指令提供了所有基本的数据库迁移操作，这些指令设计得尽可能简单和简约； 大多数这些指令不依赖现有的表元数据。 它们利用一个全局“上下文”来指示如何获得数据库连接（如果有的话；迁移也可以将 SQL/DDL 指令转储到文件）以调用命令。 与其他所有内容一样，此全局上下文在 <code>env.py</code> 脚本中设置。</p>
</blockquote>
<p>An overview of all Alembic directives is at <a href="zh//en/ops.html#ops">Operation Reference</a>.</p>
<blockquote>
<p>所有 Alembic 指令的概述位于 <a href="zh//en/ops.html#ops">操作参考</a>。</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="running-our-first-migration"><a class="header" href="#running-our-first-migration">Running our First Migration</a></h1>
<p><strong>运行我们的第一次迁移</strong></p>
<p>We now want to run our migration. Assuming our database is totally clean, it’s as yet unversioned. The <code>alembic upgrade</code> command will run upgrade operations, proceeding from the current database revision, in this example <code>None</code>, to the given target revision. We can specify <code>1975ea83b712</code> as the revision we’d like to upgrade to, but it’s easier in most cases just to tell it “the most recent”, in this case <code>head</code>:</p>
<blockquote>
<p>我们现在想要运行我们的迁移。 假设我们的数据库完全干净，它还没有版本化。 <code>alembic upgrade</code> 命令将运行升级操作，从当前数据库修订版（在本例中为“<strong>None</strong>”）到给定的目标修订版。 我们可以指定 <code>1975ea83b712</code> 作为我们想要升级到的修订版，但在大多数情况下，告诉它“<strong>最新的</strong>”更容易，在这种情况下是 <code>head</code>：</p>
</blockquote>
<pre><code class="language-bash">$ alembic upgrade head
INFO  [alembic.context] Context class PostgresqlContext.
INFO  [alembic.context] Will assume transactional DDL.
INFO  [alembic.context] Running upgrade None -&gt; 1975ea83b712
</code></pre>
<p>Wow that rocked! Note that the information we see on the screen is the result of the logging configuration set up in <code>alembic.ini</code> - logging the <code>alembic</code> stream to the console (standard error, specifically).</p>
<blockquote>
<p>哇，震撼！ 请注意，我们在屏幕上看到的信息是在 <code>alembic.ini</code> 中设置的日志配置的结果 - 将 <code>alembic</code> 流记录到控制台（特别是标准错误）。</p>
</blockquote>
<p>The process which occurred here included that Alembic first checked if the database had a table called <code>alembic_version</code>, and if not, created it. It looks in this table for the current version, if any, and then calculates the path from this version to the version requested, in this case <code>head</code>, which is known to be <code>1975ea83b712</code>. It then invokes the <code>upgrade()</code> method in each file to get to the target revision.</p>
<blockquote>
<p>此处发生的过程包括 Alembic 首先检查数据库是否有名为“<strong>alembic_version</strong>”的表，如果没有，则创建它。 它在此表中查找当前版本（如果有），然后计算从该版本到请求版本的路径，在本例中为 <code>head</code>，已知为 <code>1975ea83b712</code>。 然后它调用每个文件中的 <code>upgrade()</code> 方法以获取目标修订版。</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id=""><a class="header" href="#"></a></h1>
<p><strong>再次运行迁移</strong></p>
<p>Let’s do another one so we have some things to play with. We again create a revision file:</p>
<blockquote>
<p>让我们再做一个，这样我们就有一些东西可以玩了。 我们再次创建一个修订文件：</p>
</blockquote>
<pre><code class="language-bash">$ alembic revision -m &quot;Add a column&quot;
Generating /path/to/yourapp/alembic/versions/ae1027a6acf_add_a_column.py...
done
</code></pre>
<p>Let’s edit this file and add a new column to the <code>account</code> table:</p>
<blockquote>
<p>让我们编辑这个文件并向 <code>account</code> 表中添加一个新列：</p>
</blockquote>
<pre><code class="language-python">&quot;&quot;&quot;Add a column

Revision ID: ae1027a6acf
Revises: 1975ea83b712
Create Date: 2011-11-08 12:37:36.714947

&quot;&quot;&quot;

# revision identifiers, used by Alembic.
revision = 'ae1027a6acf'
down_revision = '1975ea83b712'

from alembic import op
import sqlalchemy as sa

def upgrade():
    op.add_column('account', sa.Column('last_transaction_date', sa.DateTime))

def downgrade():
    op.drop_column('account', 'last_transaction_date')
</code></pre>
<p>Running again to <code>head</code>:</p>
<blockquote>
<p>再次运行到<code>head</code>：</p>
</blockquote>
<pre><code class="language-bash">$ alembic upgrade head
INFO  [alembic.context] Context class PostgresqlContext.
INFO  [alembic.context] Will assume transactional DDL.
INFO  [alembic.context] Running upgrade 1975ea83b712 -&gt; ae1027a6acf
</code></pre>
<p>We’ve now added the <code>last_transaction_date</code> column to the database.</p>
<blockquote>
<p>我们现在已将 <code>last_transaction_date</code> 列添加到数据库中。</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="partial-revision-identifiers"><a class="header" href="#partial-revision-identifiers">Partial Revision Identifiers</a></h1>
<p><strong>部分修订标识符</strong></p>
<p>Any time we need to refer to a revision number explicitly, we have the option to use a partial number. As long as this number uniquely identifies the version, it may be used in any command in any place that version numbers are accepted:</p>
<blockquote>
<p>任何时候我们需要明确引用修订号，我们都可以选择使用部分编号。 只要这个数字唯一标识版本，它就可以在任何接受版本号的地方用在任何命令中：</p>
</blockquote>
<pre><code class="language-bash">alembic upgrade ae1
</code></pre>
<p>Above, we use <code>ae1</code> to refer to revision <code>ae1027a6acf</code>. Alembic will stop and let you know if more than one version starts with that prefix.</p>
<blockquote>
<p>上面，我们使用 <code>ae1</code> 来指代修订版 <code>ae1027a6acf</code>。 如果有多个版本以该前缀开头，Alembic 将停止并通知您。</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="relative-migration-identifiers"><a class="header" href="#relative-migration-identifiers">Relative Migration Identifiers</a></h1>
<p><strong>相对迁移标识符</strong></p>
<p>Relative upgrades/downgrades are also supported. To move two versions from the current, a decimal value “+N” can be supplied:</p>
<blockquote>
<p>还支持相对升级/降级。 要从当前移动两个版本，可以提供十进制值“+N”：</p>
</blockquote>
<pre><code class="language-bash">alembic upgrade +2
</code></pre>
<p>Negative values are accepted for downgrades:</p>
<blockquote>
<p>降级接受负值：</p>
</blockquote>
<pre><code class="language-bash">alembic downgrade -1
</code></pre>
<p>Relative identifiers may also be in terms of a specific revision. For example, to upgrade to revision <code>ae1027a6acf</code> plus two additional steps:</p>
<blockquote>
<p>相对标识符也可以是特定版本。 例如，要升级到修订版 <code>ae1027a6acf</code> 加上两个额外的步骤：</p>
</blockquote>
<pre><code class="language-bash">alembic upgrade ae10+2
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-information"><a class="header" href="#getting-information">Getting Information</a></h1>
<p><strong>获取信息</strong></p>
<p>With a few revisions present we can get some information about the state of things.</p>
<blockquote>
<p>通过一些修改，我们可以获得一些关于迁移版本状态的信息。</p>
</blockquote>
<p>First we can view the current revision:</p>
<blockquote>
<p>首先我们可以查看当前版本：</p>
</blockquote>
<pre><code class="language-bash">$ alembic current
INFO  [alembic.context] Context class PostgresqlContext.
INFO  [alembic.context] Will assume transactional DDL.
Current revision for postgresql://scott:XXXXX@localhost/test: 1975ea83b712 -&gt; ae1027a6acf (head), Add a column
</code></pre>
<p><code>head</code> is displayed only if the revision identifier for this database matches the head revision.</p>
<blockquote>
<p>仅当此数据库的修订标识符与头部修订匹配时才显示 <code>head</code>。</p>
</blockquote>
<p>We can also view history with <code>alembic history</code>; the <code>--verbose</code> option (accepted by several commands, including <code>history</code>, <code>current</code>, <code>heads</code> and <code>branches</code>) will show us full information about each revision:</p>
<blockquote>
<p>我们也可以用<code>alembic history</code>命令查看历史； <code>--verbose</code> 选项（多个命令都接受改选项，包括 <code>history</code>、<code>current</code>、<code>heads</code> 和 <code>branches</code>）将向我们显示每个版本的完整信息：</p>
</blockquote>
<pre><code class="language-bash">$ alembic history --verbose

Rev: ae1027a6acf (head)
Parent: 1975ea83b712
Path: /path/to/yourproject/alembic/versions/ae1027a6acf_add_a_column.py

    add a column

    Revision ID: ae1027a6acf
    Revises: 1975ea83b712
    Create Date: 2014-11-20 13:02:54.849677

Rev: 1975ea83b712
Parent: &lt;base&gt;
Path: /path/to/yourproject/alembic/versions/1975ea83b712_add_account_table.py

    create account table

    Revision ID: 1975ea83b712
    Revises:
    Create Date: 2014-11-20 13:02:46.257104
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="viewing-history-ranges"><a class="header" href="#viewing-history-ranges">Viewing History Ranges</a></h1>
<p><strong>查看历史范围</strong></p>
<p>Using the <code>-r</code> option to <code>alembic history</code>, we can also view various slices of history. The <code>-r</code> argument accepts an argument <code>[start]:[end]</code>, where either may be a revision number, symbols like <code>head</code>, <code>heads</code> or <code>base</code>, <code>current</code> to specify the current revision(s), as well as negative relative ranges for <code>[start]</code> and positive relative ranges for <code>[end]</code>:</p>
<blockquote>
<p>使用 <code>alembic history</code> 的 <code>-r</code> 选项，我们还可以查看历史片段。 <code>-r</code> 参数接受一个参数 <code>[start]:[end]</code>，其中可以是一个修订号，像 <code>head</code>、<code>heads</code> 或 <code>base</code>、<code>current</code> 这样的符号来指定当前的修订版本，以及<code>[start]</code> 的负相对范围和<code>[end]</code> 的正相对范围：</p>
</blockquote>
<pre><code class="language-bash">alembic history -r1975ea:ae1027
</code></pre>
<p>A relative range starting from three revisions ago up to current migration, which will invoke the migration environment against the database to get the current migration:</p>
<blockquote>
<p>从前三个修订版本到当前迁移版本的相对范围，它将针对数据库调用迁移环境以获取当前迁移：</p>
</blockquote>
<pre><code class="language-bash">alembic history -r-3:current
</code></pre>
<p>View all revisions from <code>1975</code> to the <code>head</code>:</p>
<blockquote>
<p>查看从<code>1975</code>到<code>head</code>的所有修订：</p>
</blockquote>
<pre><code class="language-bash">alembic history -r1975ea:
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="downgrading"><a class="header" href="#downgrading">Downgrading</a></h1>
<p><strong>降级</strong></p>
<p>We can illustrate a downgrade back to nothing, by calling <code>alembic downgrade</code> back to the beginning, which in Alembic is called <code>base</code>:</p>
<blockquote>
<p>我们可以通过调用 <code>alembic downgrade</code> 回到最初始状态, 来演示降级到迁移最初始状态，在 Alembic 中称为 <code>base</code>：</p>
</blockquote>
<pre><code class="language-bash">$ alembic downgrade base
INFO  [alembic.context] Context class PostgresqlContext.
INFO  [alembic.context] Will assume transactional DDL.
INFO  [alembic.context] Running downgrade ae1027a6acf -&gt; 1975ea83b712
INFO  [alembic.context] Running downgrade 1975ea83b712 -&gt; None
</code></pre>
<p>Back to nothing - and up again:</p>
<blockquote>
<p>降级到最初始状态 - 然后再次升级:</p>
</blockquote>
<pre><code class="language-bash">$ alembic upgrade head
INFO  [alembic.context] Context class PostgresqlContext.
INFO  [alembic.context] Will assume transactional DDL.
INFO  [alembic.context] Running upgrade None -&gt; 1975ea83b712
INFO  [alembic.context] Running upgrade 1975ea83b712 -&gt; ae1027a6acf
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h1>
<p><strong>下一步</strong></p>
<p>The vast majority of Alembic environments make heavy use of the “autogenerate” feature. Continue onto the next section, <a href="zh//zh/01_auto_generating_migrations.html">Auto Generating Migrations</a>.</p>
<blockquote>
<p>绝大多数 Alembic 环境大量使用“自动生成”功能。 继续下一部分，<a href="zh//zh/01_auto_generating_migrations.html">自动生成迁移</a>。</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="auto-generating-migrations"><a class="header" href="#auto-generating-migrations">Auto Generating Migrations</a></h1>
<p><strong>自动生成迁移</strong></p>
<p>Alembic can view the status of the database and compare against the table metadata in the application, generating the “obvious” migrations based on a comparison. This is achieved using the <code>--autogenerate</code> option to the <code>alembic revision</code> command, which places so-called candidate migrations into our new migrations file. We review and modify these by hand as needed, then proceed normally.</p>
<blockquote>
<p>Alembic 可以查看数据库的状态并与应用程序中的表元数据进行比较，根据比较生成“显而易见”的迁移。 这是通过使用 <code>alembic revision</code> 命令的 <code>--autogenerate</code> 选项来实现的，它将所有的待迁移放入我们的新迁移文件中。 我们根据需要手动审查和修改这些，然后正常进行。</p>
</blockquote>
<p>To use autogenerate, we first need to modify our <code>env.py</code> so that it gets access to a table metadata object that contains the target. Suppose our application has a <a href="https://docs.sqlalchemy.org/en/14/orm/extensions/declarative/index.html#declarative-toplevel">declarative base</a> in <code>myapp.mymodel</code>. This base contains a <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> object which contains <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Table">Table</a></strong> objects defining our database. We make sure this is loaded in <code>env.py</code> and then passed to <a href="zh//en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure">EnvironmentContext.configure()</a> via the <code>target_metadata</code> argument. The <code>env.py</code> sample script used in the generic template already has a variable declaration near the top for our convenience, where we replace <code>None</code> with our <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong>. Starting with:</p>
<blockquote>
<p>要使用自动生成，我们首先需要修改我们的 <code>env.py</code> 以便它可以访问包含目标的表元数据对象。 假设我们的应用程序在 <code>myapp.mymodel</code> 中有一个 <a href="https://docs.sqlalchemy.org/en/14/orm/extensions/declarative/index.html#declarative-toplevel">declarative base</a>。 该 <strong>base</strong> 包含一个 <strong>MetaData</strong> 对象，该对象包含我们定义的数据库的 <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Table">Table</a></strong> 对象。 我们确保它被加载到 <code>env.py</code> 中，然后通过 <code>target_metadata</code> 参数传递给 <a href="zh//en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure">EnvironmentContext.configure()</a>。 为方便起见，通用模板中使用的 <code>env.py</code> 示例脚本在靠近顶部的地方已经有一个变量声明，我们用 <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> 替换了 <code>None</code>。 比如：</p>
</blockquote>
<pre><code class="language-python"># add your model's MetaData object here
# for 'autogenerate' support
# from myapp import mymodel
# target_metadata = mymodel.Base.metadata
target_metadata = None
</code></pre>
<p>we change to:</p>
<blockquote>
<p>我们改变成:</p>
</blockquote>
<pre><code class="language-python">from myapp.mymodel import Base
target_metadata = Base.metadata
</code></pre>
<ul>
<li>
<p><strong>Note</strong>: The above example refers to the <code>generic alembic env.py template</code>, e.g. the one created by default when calling upon <code>alembic init</code>, and not the special-use templates such as <code>multidb</code>. Please consult the source code and comments within the <code>env.py</code> script directly for specific guidance on where and how the autogenerate metadata is established.</p>
</li>
<li>
<blockquote>
<p><strong>注意</strong>: 上面的例子指的是“通用的 alembic env.py 模板”，例如 调用<code>alembic init</code>时默认创建的那个，而不是像<code>multidb</code>这样的特殊模板。 请直接查阅“env.py”脚本中的源代码和注释，以获取有关在何处以及如何建立自动生成元数据的具体指导。</p>
</blockquote>
</li>
</ul>
<p>If we look later in the script, down in <code>run_migrations_online()</code>, we can see the directive passed to <strong><a href="zh//en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure">EnvironmentContext.configure()</a></strong>:</p>
<blockquote>
<p>如果我们稍后查看脚本，在 <code>run_migrations_online()</code> 中，我们可以看到传递给 <strong><a href="zh//en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure">EnvironmentContext.configure()</a></strong> 的指令：</p>
</blockquote>
<pre><code class="language-python">def run_migrations_online():
    engine = engine_from_config(
                config.get_section(config.config_ini_section), prefix='sqlalchemy.')

    with engine.connect() as connection:
        context.configure(
                    connection=connection,
                    target_metadata=target_metadata
                    )

        with context.begin_transaction():
            context.run_migrations()
</code></pre>
<p>We can then use the <code>alembic revision</code> command in conjunction with the <code>--autogenerate</code> option. Suppose our <a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a> contained a definition for the <code>account</code> table, and the database did not. We’d get output like:</p>
<blockquote>
<p>然后我们可以将<code>alembic revision</code> 命令与<code>--autogenerate</code> 选项结合使用。 假设我们的 <a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a> 包含对 <code>account</code> 表的定义，而数据库没有。 我们会得到如下输出：</p>
</blockquote>
<pre><code class="language-bash">$ alembic revision --autogenerate -m &quot;Added account table&quot;
INFO [alembic.context] Detected added table 'account'
Generating /path/to/foo/alembic/versions/27c6a30d7c24.py...done
</code></pre>
<p>We can then view our file <code>27c6a30d7c24.py</code> and see that a rudimentary migration is already present:</p>
<blockquote>
<p>然后我们可以查看我们的 <code>27c6a30d7c24.py</code> 文件, 并看到一个基本的迁移已经存在：</p>
</blockquote>
<pre><code class="language-python">&quot;&quot;&quot;empty message

Revision ID: 27c6a30d7c24
Revises: None
Create Date: 2011-11-08 11:40:27.089406

&quot;&quot;&quot;

# revision identifiers, used by Alembic.
revision = '27c6a30d7c24'
down_revision = None

from alembic import op
import sqlalchemy as sa

def upgrade():
    ### commands auto generated by Alembic - please adjust! ###
    op.create_table(
    'account',
    sa.Column('id', sa.Integer()),
    sa.Column('name', sa.String(length=50), nullable=False),
    sa.Column('description', sa.VARCHAR(200)),
    sa.Column('last_transaction_date', sa.DateTime()),
    sa.PrimaryKeyConstraint('id')
    )
    ### end Alembic commands ###

def downgrade():
    ### commands auto generated by Alembic - please adjust! ###
    op.drop_table(&quot;account&quot;)
    ### end Alembic commands ###
</code></pre>
<p>The migration hasn’t actually run yet, of course. We do that via the usual <code>upgrade</code> command. We should also go into our migration file and alter it as needed, including adjustments to the directives as well as the addition of other directives which these may be dependent on - specifically data changes in between creates/alters/drops.</p>
<blockquote>
<p>当然，迁移还没有真正运行。 我们通过常用的<code>upgrade</code>命令来做到这一点。 我们还应该进入我们的迁移文件并根据需要更改它，包括对指令的调整以及添加这些可能依赖的其他指令 - 特别是在创建/更改/删除之间的数据更改。</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="what-does-autogenerate-detect"><a class="header" href="#what-does-autogenerate-detect">What does Autogenerate Detect</a></h1>
<p>The vast majority of user issues with Alembic centers on the topic of what kinds of changes autogenerate can and cannot detect reliably, as well as how it renders Python code for what it does detect. It is critical to note that <strong>autogenerate is not intended to be perfect</strong>. It is <em>always</em> necessary to manually review and correct the <strong>candidate migrations</strong> that autogenerate produces. The feature is getting more and more comprehensive and error-free as releases continue, but one should take note of the current limitations.</p>
<p>Autogenerate <strong>will detect</strong>:</p>
<ul>
<li>Table additions, removals.</li>
<li>Column additions, removals.</li>
<li>Change of nullable status on columns.</li>
<li>Basic changes in indexes and explicitly-named unique constraints</li>
<li>Basic changes in foreign key constraints</li>
</ul>
<p>Autogenerate can <strong>optionally detect</strong>:</p>
<ul>
<li>
<p>Change of column type. This will occur if you set the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.compare_type">EnvironmentContext.configure.compare_type</a></strong> parameter to <code>True</code>. The default implementation will reliably detect major changes, such as between <strong>Numeric</strong> and <strong>String</strong>, as well as accommodate for the types generated by SQLAlchemy’s “generic” types such as <strong>Boolean</strong>. Arguments that are shared between both types, such as length and precision values, will also be compared. If either the metadata type or database type has <strong>additional</strong> arguments beyond that of the other type, these are <strong>not</strong> compared, such as if one numeric type featured a “scale” and other type did not, this would be seen as the backing database not supporting the value, or reporting on a default that the metadata did not specify.</p>
<p>The type comparison logic is fully extensible as well; see <a href="zh/../en/autogenerate.html#compare-types">Comparing Types</a> for details.</p>
<blockquote>
<p>Changed in version 1.4: type comparison code has been reworked such that column types are compared based on their rendered DDL, which should allow the functionality enabled by <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.compare_type">EnvironmentContext.configure.compare_type</a></strong> to be much more accurate, correctly accounting for the behavior of SQLAlchemy “generic” types as well as major arguments specified within types.</p>
</blockquote>
</li>
<li>
<p>Change of server default. This will occur if you set the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.compare_server_default">EnvironmentContext.configure.compare_server_default</a></strong> parameter to True, or to a custom callable function. This feature works well for simple cases but cannot always produce accurate results. The Postgresql backend will actually invoke the “detected” and “metadata” values against the database to determine equivalence. The feature is off by default so that it can be tested on the target schema first. Like type comparison, it can also be customized by passing a callable; see the function’s documentation for details.</p>
</li>
</ul>
<p>Autogenerate can <strong>not detect</strong>:</p>
<ul>
<li>Changes of table name. These will come out as an add/drop of two different tables, and should be hand-edited into a name change instead.</li>
<li>Changes of column name. Like table name changes, these are detected as a column add/drop pair, which is not at all the same as a name change.</li>
<li>Anonymously named constraints. Give your constraints a name, e.g. <strong>UniqueConstraint('col1', 'col2', name=&quot;my_name&quot;)</strong>. See the section <a href="zh/../en/naming.html">The Importance of Naming Constraints</a> for background on how to configure automatic naming schemes for constraints.</li>
<li>Special SQLAlchemy types such as <strong><a href="https://docs.sqlalchemy.org/en/14/core/type_basics.html#sqlalchemy.types.Enum">Enum</a></strong> when generated on a backend which doesn’t support ENUM directly - this because the representation of such a type in the non-supporting database, i.e. a CHAR+ CHECK constraint, could be any kind of CHAR+CHECK. For SQLAlchemy to determine that this is actually an ENUM would only be a guess, something that’s generally a bad idea. To implement your own “guessing” function here, use the <strong><a href="https://docs.sqlalchemy.org/en/14/core/events.html#sqlalchemy.events.DDLEvents.column_reflect">sqlalchemy.events.DDLEvents.column_reflect()</a></strong> event to detect when a CHAR (or whatever the target type is) is reflected, and change it to an ENUM (or whatever type is desired) if it is known that that’s the intent of the type. The <strong><a href="https://docs.sqlalchemy.org/en/14/core/events.html#sqlalchemy.events.DDLEvents.after_parent_attach">sqlalchemy.events.DDLEvents.after_parent_attach()</a></strong> can be used within the autogenerate process to intercept and un-attach unwanted CHECK constraints.</li>
</ul>
<p>Autogenerate can’t currently, but <strong>will eventually detect</strong>:</p>
<ul>
<li>
<p>Some free-standing constraint additions and removals may not be supported, including PRIMARY KEY, EXCLUDE, CHECK; these are not necessarily implemented within the autogenerate detection system and also may not be supported by the supporting SQLAlchemy dialect.</p>
</li>
<li>
<p>Sequence additions, removals - not yet implemented.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="autogenerating-multiple-metadata-collections"><a class="header" href="#autogenerating-multiple-metadata-collections">Autogenerating Multiple MetaData collections</a></h1>
<p>The <code>target_metadata</code> collection may also be defined as a sequence if an application has multiple <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> collections involved:</p>
<pre><code class="language-python">from myapp.mymodel1 import Model1Base
from myapp.mymodel2 import Model2Base
target_metadata = [Model1Base.metadata, Model2Base.metadata]
</code></pre>
<p>The sequence of <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> collections will be consulted in order during the autogenerate process. Note that each <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> must contain <strong>unique</strong> table keys (e.g. the “key” is the combination of the table’s name and schema); if two <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> objects contain a table with the same schema/name combination, an error is raised.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="controlling-what-to-be-autogenerated"><a class="header" href="#controlling-what-to-be-autogenerated">Controlling What to be Autogenerated</a></h1>
<p>The autogenerate process scans across all table objects within the database that is referred towards by the current database connection in use.</p>
<p>The list of objects that are scanned in the target database connection include:</p>
<ul>
<li>The “default” schema currently referred towards by the database connection.</li>
<li>If the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_schemas">EnvironmentContext.configure.include_schemas</a></strong> is set to <code>True</code>, all non-default “schemas”, which are those names returned by the <strong><a href="https://docs.sqlalchemy.org/en/14/core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_schema_names">get_schema_names()</a></strong> method of <strong><a href="https://docs.sqlalchemy.org/en/14/core/reflection.html#sqlalchemy.engine.reflection.Inspector">Inspector</a></strong>. The SQLAlchemy document <a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#schema-table-schema-name">Specifying the Schema Name</a> discusses the concept of a “schema” in detail.</li>
<li>Within each “schema”, all tables present are scanned using the <strong><a href="https://docs.sqlalchemy.org/en/14/core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_table_names">get_table_names()</a></strong> method of <strong><a href="https://docs.sqlalchemy.org/en/14/core/reflection.html#sqlalchemy.engine.reflection.Inspector">Inspector</a></strong>.</li>
<li>Within each “table”, most sub-objects of the each <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Table">Table</a></strong> construct are scanned, including columns and some forms of constraints. This process ultimately involves the use of methods on <strong><a href="https://docs.sqlalchemy.org/en/14/core/reflection.html#sqlalchemy.engine.reflection.Inspector">Inspector</a></strong> including <strong><a href="https://docs.sqlalchemy.org/en/14/core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_columns">get_columns()</a></strong>, <strong><a href="https://docs.sqlalchemy.org/en/14/core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_indexes">get_indexes()</a></strong>, <strong><a href="https://docs.sqlalchemy.org/en/14/core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_unique_constraints">get_unique_constraints()</a></strong>, <strong><a href="https://docs.sqlalchemy.org/en/14/core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_foreign_keys">get_foreign_keys()</a></strong> (as of this writing, CHECK constraints and primary key constraints are not yet included).</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="omitting-schema-names-from-the-autogenerate-process"><a class="header" href="#omitting-schema-names-from-the-autogenerate-process">Omitting Schema Names from the Autogenerate Process</a></h1>
<p>As the above set of database objects are typically to be compared to the contents of a single <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> object, particularly when the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_schemas">EnvironmentContext.configure.include_schemas</a></strong> flag is enabled there is an important need to filter out unwanted “schemas”, which for some database backends might be the list of all the databases present. This filtering is best performed using the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_name">EnvironmentContext.configure.include_name</a></strong> hook, which provides for a callable that may return a boolean true/false indicating if a particular schema name should be included:</p>
<pre><code class="language-python">def include_name(name, type_, parent_names):
    if type_ == &quot;schema&quot;:
        # note this will not include the default schema
        return name in [&quot;schema_one&quot;, &quot;schema_two&quot;]
    else:
        return True

context.configure(
    # ...
    include_schemas = True,
    include_name = include_name
)
</code></pre>
<p>Above, when the list of schema names is first retrieved, the names will be filtered through the above <code>include_name</code> function so that only schemas named <code>&quot;schema_one&quot;</code> and <code>&quot;schema_two&quot;</code> will be considered by the autogenerate process.</p>
<p>In order to include <strong>the default schema</strong>, that is, the schema that is referred towards by the database connection <strong>without</strong> any explicit schema being specified, the name passed to the hook is <code>None</code>. To alter our above example to also include the default schema, we compare to <code>None</code> as well:</p>
<pre><code class="language-python">def include_name(name, type_, parent_names):
    if type_ == &quot;schema&quot;:
        # this **will* include the default schema
        return name in [None, &quot;schema_one&quot;, &quot;schema_two&quot;]
    else:
        return True

context.configure(
    # ...
    include_schemas = True,
    include_name = include_name
)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="omitting-table-names-from-the-autogenerate-process"><a class="header" href="#omitting-table-names-from-the-autogenerate-process">Omitting Table Names from the Autogenerate Process</a></h1>
<p>The <strong><a href="http://localhost:3002/en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_name">EnvironmentContext.configure.include_name</a></strong> hook is also most appropriate to limit the names of tables in the target database to be considered. If a target database has many tables that are not part of the <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong>, the autogenerate process will normally assume these are extraneous tables in the database to be dropped, and it will generate a <strong><a href="http://localhost:3002/en/ops.html#alembic.operations.Operations.drop_table">Operations.drop_table()</a></strong> operation for each. To prevent this, the <strong><a href="http://localhost:3002/en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_name">EnvironmentContext.configure.include_name</a></strong> hook may be used to search for each name within the <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData.tables">tables</a></strong> collection of the <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> object and ensure names which aren’t present are not included:</p>
<pre><code class="language-python">target_metadata = MyModel.metadata

def include_name(name, type_, parent_names):
    if type_ == &quot;table&quot;:
        return name in target_metadata.tables
    else:
        return True

context.configure(
    # ...
    target_metadata = target_metadata,
    include_name = include_name,
    include_schemas = False
)
</code></pre>
<p>The above example is limited to table names present in the default schema only. In order to search within a <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> collection for schema-qualified table names as well, a table present in the non default schema will be present under a name of the form <code>&lt;schemaname&gt;.&lt;tablename&gt;</code>. The <strong><a href="http://localhost:3002/en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_name">EnvironmentContext.configure.include_name</a></strong> hook will present this schema name on a per-tablename basis in the <code>parent_names</code> dictionary, using the key <code>&quot;schema_name&quot;</code> that refers to the name of the schema currently being considered, or <code>None</code> if the schema is the default schema of the database connection:</p>
<pre><code class="language-python"># example fragment

if parent_names[&quot;schema_name&quot;] is None:
    return name in target_metadata.tables
else:
    # build out schema-qualified name explicitly...
    return (
        &quot;%s.%s&quot; % (parent_names[&quot;schema_name&quot;], name) in
        target_metadata.tables
    )
</code></pre>
<p>However more simply, the <code>parent_names</code> dictionary will also include the dot-concatenated name already constructed under the key <code>&quot;schema_qualified_table_name&quot;</code>, which will also be suitably formatted for tables in the default schema as well with the dot omitted. So the full example of omitting tables with schema support may look like:</p>
<pre><code class="language-python">target_metadata = MyModel.metadata

def include_name(name, type_, parent_names):
    if type_ == &quot;schema&quot;:
        return name in [None, &quot;schema_one&quot;, &quot;schema_two&quot;]
    elif type_ == &quot;table&quot;:
        # use schema_qualified_table_name directly
        return (
            parent_names[&quot;schema_qualified_table_name&quot;] in
            target_metadata.tables
        )
    else:
        return True

context.configure(
    # ...
    target_metadata = target_metadata,
    include_name = include_name,
    include_schemas = True
)
</code></pre>
<p>The <code>parent_names</code> dictionary will also include the key <code>&quot;table_name&quot;</code> when the name being considered is that of a column or constraint object local to a particular table.</p>
<p>The <strong><a href="http://localhost:3002/en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_name">EnvironmentContext.configure.include_name</a></strong> hook only refers to <strong>reflected</strong> objects, and not those located within the target <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> collection. For more fine-grained rules that include both <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> and reflected object, the <strong><a href="http://localhost:3002/en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_object">EnvironmentContext.configure.include_object</a></strong> hook discussed in the next section is more appropriate.</p>
<blockquote>
<p>New in version 1.5: added the <strong><a href="http://localhost:3002/en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_name">EnvironmentContext.configure.include_name</a></strong> hook.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="omitting-based-on-object"><a class="header" href="#omitting-based-on-object">Omitting Based on Object</a></h1>
<p>The <a href="http://localhost:3002/en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.include_object">EnvironmentContext.configure.include_object</a> hook provides for object-level inclusion/exclusion rules based on the <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Table">Table</a></strong> object being reflected as well as the elements within it. This hook can be used to limit objects both from the local <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.MetaData">MetaData</a></strong> collection as well as from the target database. The limitation is that when it reports on objects in the database, it will have fully reflected that object, which can be expensive if a large number of objects will be omitted. The example below refers to a fine-grained rule that will skip changes on <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Column">Column</a></strong> objects that have a user-defined flag <code>skip_autogenerate</code> placed into the <strong><a href="https://docs.sqlalchemy.org/en/14/core/metadata.html#sqlalchemy.schema.Column.info">info</a></strong> dictionary:</p>
<pre><code class="language-python">def include_object(object, name, type_, reflected, compare_to):
    if (type_ == &quot;column&quot; and
        not reflected and
        object.info.get(&quot;skip_autogenerate&quot;, False)):
        return False
    else:
        return True

context.configure(
    # ...
    include_object = include_object
)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="comparing-and-rendering-types"><a class="header" href="#comparing-and-rendering-types">Comparing and Rendering Types</a></h1>
<p>The area of autogenerate’s behavior of comparing and rendering Python-based type objects in migration scripts presents a challenge, in that there’s a very wide variety of types to be rendered in scripts, including those part of SQLAlchemy as well as user-defined types. A few options are given to help out with this task.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="controlling-the-module-prefix"><a class="header" href="#controlling-the-module-prefix">Controlling the Module Prefix</a></h1>
<p>When types are rendered, they are generated with a <strong>module prefix</strong>, so that they are available based on a relatively small number of imports. The rules for what the prefix is is based on the kind of datatype as well as configurational settings. For example, when Alembic renders SQLAlchemy types, it will by default prefix the type name with the prefix <code>sa.</code>:</p>
<pre><code class="language-python">Column(&quot;my_column&quot;, sa.Integer())
</code></pre>
<p>The use of the sa. prefix is controllable by altering the value of <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.sqlalchemy_module_prefix">EnvironmentContext.configure.sqlalchemy_module_prefix</a></strong>:</p>
<pre><code class="language-python">def run_migrations_online():
    # ...

    context.configure(
                connection=connection,
                target_metadata=target_metadata,
                sqlalchemy_module_prefix=&quot;sqla.&quot;,
                # ...
                )

    # ...
</code></pre>
<p>In either case, the <code>sa.</code> prefix, or whatever prefix is desired, should also be included in the imports section of <code>script.py.mako</code>; it also defaults to <code>import sqlalchemy as sa.</code></p>
<p>For user-defined types, that is, any custom type that is not within the <code>sqlalchemy.</code> module namespace, by default Alembic will use the <strong>value of __module__ for the custom type</strong>:</p>
<pre><code class="language-python">Column(&quot;my_column&quot;, myapp.models.utils.types.MyCustomType())
</code></pre>
<p>The imports for the above type again must be made present within the migration, either manually, or by adding it to <code>script.py.mako</code>.</p>
<p>The above custom type has a long and cumbersome name based on the use of <code>__module__</code> directly, which also implies that lots of imports would be needed in order to accommodate lots of types. For this reason, it is recommended that user-defined types used in migration scripts be made available from a single module. Suppose we call it <code>myapp.migration_types</code>:</p>
<pre><code class="language-python"># myapp/migration_types.py

from myapp.models.utils.types import MyCustomType
</code></pre>
<p>We can first add an import for <code>migration_types</code> to our <code>script.py.mako</code>:</p>
<pre><code class="language-python">from alembic import op
import sqlalchemy as sa
import myapp.migration_types
${imports if imports else &quot;&quot;}
</code></pre>
<p>We then override Alembic’s use of <code>__module__</code> by providing a fixed prefix, using the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.user_module_prefix">EnvironmentContext.configure.user_module_prefix</a></strong> option:</p>
<pre><code class="language-python">def run_migrations_online():
    # ...

    context.configure(
                connection=connection,
                target_metadata=target_metadata,
                user_module_prefix=&quot;myapp.migration_types.&quot;,
                # ...
                )

    # ...
</code></pre>
<p>Above, we now would get a migration like:</p>
<pre><code class="language-python">Column(&quot;my_column&quot;, myapp.migration_types.MyCustomType())
</code></pre>
<p>Now, when we inevitably refactor our application to move <code>MyCustomType</code> somewhere else, we only need modify the <code>myapp.migration_types</code> module, instead of searching and replacing all instances within our migration scripts.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="affecting-the-rendering-of-types-themselves"><a class="header" href="#affecting-the-rendering-of-types-themselves">Affecting the Rendering of Types Themselves</a></h1>
<p>The methodology Alembic uses to generate SQLAlchemy and user-defined type constructs as Python code is plain old <code>__repr__()</code>. SQLAlchemy’s built-in types for the most part have a <code>__repr__()</code> that faithfully renders a Python-compatible constructor call, but there are some exceptions, particularly in those cases when a constructor accepts arguments that aren’t compatible with <code>__repr__()</code>, such as a pickling function.</p>
<p>When building a custom type that will be rendered into a migration script, it is often necessary to explicitly give the type a <code>__repr__()</code> that will faithfully reproduce the constructor for that type. This, in combination with <strong><a href="zh//en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.user_module_prefix">EnvironmentContext.configure.user_module_prefix</a></strong>, is usually enough. However, if additional behaviors are needed, a more comprehensive hook is the <strong><a href="zh//en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.render_item">EnvironmentContext.configure.render_item</a></strong> option. This hook allows one to provide a callable function within <code>env.py</code> that will fully take over how a type is rendered, including its module prefix:</p>
<pre><code class="language-python">def render_item(type_, obj, autogen_context):
    &quot;&quot;&quot;Apply custom rendering for selected items.&quot;&quot;&quot;

    if type_ == 'type' and isinstance(obj, MySpecialType):
        return &quot;mypackage.%r&quot; % obj

    # default rendering for other objects
    return False

def run_migrations_online():
    # ...

    context.configure(
                connection=connection,
                target_metadata=target_metadata,
                render_item=render_item,
                # ...
                )

    # ...
</code></pre>
<p>In the above example, we’d ensure our <code>MySpecialType</code> includes an appropriate <code>__repr__()</code> method, which is invoked when we call it against <code>&quot;%r&quot;</code>.</p>
<p>The callable we use for <strong><a href="zh//en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.render_item">EnvironmentContext.configure.render_item</a></strong> can also add imports to our migration script. The <strong><a href="zh/../en/api/autogenerate.html#alembic.autogenerate.api.AutogenContext">AutogenContext</a></strong> passed in contains a datamember called <strong><a href="zh/../en/api/autogenerate.html#alembic.autogenerate.api.AutogenContext.imports">AutogenContext.imports</a></strong>, which is a Python <code>set()</code> for which we can add new imports. For example, if <code>MySpecialType</code> were in a module called <code>mymodel.types</code>, we can add the import for it as we encounter the type:</p>
<pre><code class="language-python">def render_item(type_, obj, autogen_context):
    &quot;&quot;&quot;Apply custom rendering for selected items.&quot;&quot;&quot;

    if type_ == 'type' and isinstance(obj, MySpecialType):
        # add import for this type
        autogen_context.imports.add(&quot;from mymodel import types&quot;)
        return &quot;types.%r&quot; % obj

    # default rendering for other objects
    return False
</code></pre>
<p>The finished migration script will include our imports where the <code>${imports}</code> expression is used, producing output such as:</p>
<pre><code class="language-python">from alembic import op
import sqlalchemy as sa
from mymodel import types

def upgrade():
    op.add_column('sometable', Column('mycolumn', types.MySpecialType()))
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="comparing-types"><a class="header" href="#comparing-types">Comparing Types</a></h1>
<p>The default type comparison logic will work for SQLAlchemy built in types as well as basic user defined types. This logic is only enabled if the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.compare_type">EnvironmentContext.configure.compare_type</a></strong> parameter is set to <code>True</code>:</p>
<pre><code class="language-python">context.configure(
    # ...
    compare_type = True
)
</code></pre>
<blockquote>
<p><strong>Note</strong>: The default type comparison logic (which is end-user extensible) currently (as of Alembic version 1.4.0) works by comparing the generated SQL for a column. It does this in two steps-</p>
<ul>
<li>First, it compares the outer type of each column such as VARCHAR or TEXT. Dialect implementations can have synonyms that are considered equivalent- this is because some databases support types by converting them to another type. For example, NUMERIC and DECIMAL are considered equivalent on all backends, while on the Oracle backend the additional synonyms BIGINT, INTEGER, NUMBER, SMALLINT are added to this list of equivalents</li>
<li>Next, the arguments within the type, such as the lengths of strings, precision values for numerics, the elements inside of an enumeration are compared. If BOTH columns have arguments AND they are different, a change will be detected. If one column is just set to the default and the other has arguments, Alembic will pass on attempting to compare these. The rationale is that it is difficult to detect what a database backend sets as a default value without generating false positives.</li>
</ul>
</blockquote>
<blockquote>
<p><em>Changed in version 1.4.0</em>: Added the text and keyword comparison for column types</p>
</blockquote>
<p>Alternatively, the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.compare_type">EnvironmentContext.configure.compare_type</a></strong> parameter accepts a callable function which may be used to implement custom type comparison logic, for cases such as where special user defined types are being used:</p>
<pre><code class="language-python">def my_compare_type(context, inspected_column,
            metadata_column, inspected_type, metadata_type):
    # return False if the metadata_type is the same as the inspected_type
    # or None to allow the default implementation to compare these
    # types. a return value of True means the two types do not
    # match and should result in a type change operation.
    return None

context.configure(
    # ...
    compare_type = my_compare_type
)
</code></pre>
<p>Above, <code>inspected_column</code> is a <strong>[sqlalchemy.schema.Column]</strong> as returned by <strong><a href="https://docs.sqlalchemy.org/en/14/core/reflection.html#sqlalchemy.engine.reflection.Inspector.reflect_table">sqlalchemy.engine.reflection.Inspector.reflect_table()</a></strong>, whereas metadata_column is a <strong>[sqlalchemy.schema.Column]</strong> from the local model environment. A return value of <code>None</code> indicates that default type comparison to proceed.</p>
<p>Additionally, custom types that are part of imported or third party packages which have special behaviors such as per-dialect behavior should implement a method called <code>compare_against_backend()</code> on their SQLAlchemy type. If this method is present, it will be called where it can also return True or False to specify the types compare as equivalent or not; if it returns None, default type comparison logic will proceed:</p>
<pre><code class="language-python">class MySpecialType(TypeDecorator):

    # ...

    def compare_against_backend(self, dialect, conn_type):
        # return True if this type is the same as the given database type,
        # or None to allow the default implementation to compare these
        # types. a return value of False means the given type does not
        # match this type.

        if dialect.name == 'postgresql':
            return isinstance(conn_type, postgresql.UUID)
        else:
            return isinstance(conn_type, String)
</code></pre>
<blockquote>
<p><strong>Warning</strong>: The boolean return values for the above <code>compare_against_backend</code> method, which is part of SQLAlchemy and not Alembic,are <strong>the opposite</strong> of that of the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.compare_type">EnvironmentContext.configure.compare_type</a></strong> callable, returning <code>True</code> for types that are the same vs. <code>False</code> for types that are different.The <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.compare_type">EnvironmentContext.configure.compare_type</a></strong> callable on the other hand should return <code>True</code> for types that are <strong>different</strong>.</p>
</blockquote>
<p>The order of precedence regarding the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.compare_type">EnvironmentContext.configure.compare_type</a></strong> callable vs. the type itself implementing <code>compare_against_backend</code> is that the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.compare_type">EnvironmentContext.configure.compare_type</a></strong> callable is favored first; if it returns <code>None</code>, then the <code>compare_against_backend</code> method will be used, if present on the metadata type. If that returns <code>None</code>, then a basic check for type equivalence is run.</p>
<blockquote>
<p><em>New in version 1.4.0</em>: - added column keyword comparisons and the type_synonyms property.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="applying-post-processing-and-python-code-formatters-to-generated-revisions"><a class="header" href="#applying-post-processing-and-python-code-formatters-to-generated-revisions">Applying Post Processing and Python Code Formatters to Generated Revisions</a></h1>
<p>Revision scripts generated by the <code>alembic revision</code> command can optionally be piped through a series of post-production functions which may analyze or rewrite Python source code generated by Alembic, within the scope of running the <code>revision</code> command. The primary intended use of this feature is to run code-formatting tools such as <a href="https://black.readthedocs.io/">Black</a> or <a href="https://pypi.org/project/autopep8/">autopep8</a>, as well as custom-written formatting and linter functions, on revision files as Alembic generates them. Any number of hooks can be configured and they will be run in series, given the path to the newly generated file as well as configuration options.</p>
<p>The post write hooks, when configured, run against generated revision files regardless of whether or not the autogenerate feature was used.</p>
<blockquote>
<p>New in version 1.2.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong>: Alembic’s post write system is partially inspired by the <a href="https://pre-commit.com/">pre-commit</a> tool, which configures git hooks that reformat source files as they are committed to a git repository. Pre-commit can serve this role for Alembic revision files as well, applying code formatters to them as they are committed. Alembic’s post write hooks are useful only in that they can format the files immediately upon generation, rather than at commit time, and also can be useful for projects that prefer not to use pre-commit.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-formatter-configuration"><a class="header" href="#basic-formatter-configuration">Basic Formatter Configuration</a></h1>
<p>The <code>alembic.ini</code> samples now include commented-out configuration illustrating how to configure code-formatting tools to run against the newly generated file path. Example:</p>
<pre><code class="language-ini">[post_write_hooks]

# format using &quot;black&quot;
hooks=black

black.type = console_scripts
black.entrypoint = black
black.options = -l 79
</code></pre>
<p>Above, we configure <code>hooks</code> to be a single post write hook labeled <code>&quot;black&quot;</code>. Note that this label is arbitrary. We then define the configuration for the <code>&quot;black&quot;</code> post write hook, which includes:</p>
<ul>
<li><code>type</code> - this is the type of hook we are running. Alembic includes a hook runner called <code>&quot;console_scripts&quot;</code>, which is specifically a Python function that uses <code>subprocess.run()</code> to invoke a separate Python script against the revision file. For a custom-written hook function, this configuration variable would refer to the name under which the custom hook was registered; see the next section for an example.</li>
</ul>
<p>The following configuration options are specific to the <code>&quot;console_scripts&quot;</code> hook runner:</p>
<ul>
<li>
<p><code>entrypoint</code> - the name of the <a href="https://setuptools.readthedocs.io/en/latest/pkg_resources.html#entry-points">setuptools entrypoint</a> that is used to define the console script. Within the scope of standard Python console scripts, this name will match the name of the shell command that is usually run for the code formatting tool, in this case <code>black</code>.</p>
</li>
<li>
<p><code>options</code> - a line of command-line options that will be passed to the code formatting tool. In this case, we want to run the command <code>black /path/to/revision.py -l 79</code>. By default, the revision path is positioned as the first argument. In order specify a different position, we can use the <code>REVISION_SCRIPT_FILENAME</code> token as illustrated by the subsequent examples.</p>
<p><strong>Note</strong>: Make sure options for the script are provided such that it will rewrite the input file <strong>in place</strong>. For example, when running autopep8, the <code>--in-place</code> option should be provided:</p>
<pre><code class="language-ini">[post_write_hooks]
hooks = autopep8
autopep8.type = console_scripts
autopep8.entrypoint = autopep8
autopep8.options = --in-place REVISION_SCRIPT_FILENAME
</code></pre>
</li>
<li>
<p><code>cwd</code> - optional working directory from which the console script is run.</p>
</li>
</ul>
<p>When running <code>alembic revision -m &quot;rev1&quot;</code>, we will now see the <code>black</code> tool’s output as well:</p>
<pre><code class="language-bash">$ alembic revision -m &quot;rev1&quot;
  Generating /path/to/project/versions/481b13bc369a_rev1.py ... done
  Running post write hook &quot;black&quot; ...
reformatted /path/to/project/versions/481b13bc369a_rev1.py
All done! ✨ 🍰 ✨
1 file reformatted.
  done
</code></pre>
<p>Hooks may also be specified as a list of names, which correspond to hook runners that will run sequentially. As an example, we can also run the <a href="https://pypi.org/project/zimports/">zimports</a> import rewriting tool (written by Alembic’s author) subsequent to running the <code>black</code> tool, using a configuration as follows:</p>
<pre><code class="language-ini">[post_write_hooks]

# format using &quot;black&quot;, then &quot;zimports&quot;
hooks=black, zimports

black.type = console_scripts
black.entrypoint = black
black.options = -l 79 REVISION_SCRIPT_FILENAME

zimports.type = console_scripts
zimports.entrypoint = zimports
zimports.options = --style google REVISION_SCRIPT_FILENAME
</code></pre>
<p>When using the above configuration, a newly generated revision file will be processed first by the “black” tool, then by the “zimports” tool.</p>
<p>Alternatively, one can run pre-commit itself as follows:</p>
<pre><code class="language-ini">[post_write_hooks]

hooks = pre-commit

pre-commit.type = console_scripts
pre-commit.entrypoint = pre-commit
pre-commit.options = run --files REVISION_SCRIPT_FILENAME
pre-commit.cwd = %(here)s
</code></pre>
<p>(The last line helps to ensure that the <code>.pre-commit-config.yaml</code> file will always be found, regardless of from where the hook was called.)</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="writing-custom-hooks-as-python-functions"><a class="header" href="#writing-custom-hooks-as-python-functions">Writing Custom Hooks as Python Functions</a></h1>
<p>The previous section illustrated how to run command-line code formatters, through the use of a post write hook provided by Alembic known as <code>console_scripts</code>. This hook is in fact a Python function that is registered under that name using a registration function that may be used to register other types of hooks as well.</p>
<p>To illustrate, we will use the example of a short Python function that wants to rewrite the generated code to use tabs instead of four spaces. For simplicity, we will illustrate how this function can be present directly in the <code>env.py</code> file. The function is declared and registered using the <a href="http://localhost:3002/en/api/script.html#alembic.script.write_hooks.register">write_hooks.register()</a> decorator:</p>
<pre><code class="language-python">from alembic.script import write_hooks
import re

@write_hooks.register(&quot;spaces_to_tabs&quot;)
def convert_spaces_to_tabs(filename, options):
    lines = []
    with open(filename) as file_:
        for line in file_:
            lines.append(
                re.sub(
                    r&quot;^(    )+&quot;,
                    lambda m: &quot;\t&quot; * (len(m.group(1)) // 4),
                    line
                )
            )
    with open(filename, &quot;w&quot;) as to_write:
        to_write.write(&quot;&quot;.join(lines))
</code></pre>
<p>Our new <code>&quot;spaces_to_tabs&quot;</code> hook can be configured in <code>alembic.ini</code> as follows:</p>
<pre><code class="language-ini">[alembic]

# ...

# ensure the revision command loads env.py
revision_environment = true

[post_write_hooks]

hooks = spaces_to_tabs

spaces_to_tabs.type = spaces_to_tabs
</code></pre>
<p>When <code>alembic revision</code> is run, the <code>env.py</code> file will be loaded in all cases, the custom <code>“spaces_to_tabs”</code> function will be registered and it will then be run against the newly generated file path:</p>
<pre><code class="language-bash">$ alembic revision -m &quot;rev1&quot;
  Generating /path/to/project/versions/481b13bc369a_rev1.py ... done
  Running post write hook &quot;spaces_to_tabs&quot; ...
  done
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="generating-sql-scripts-aka-offline-mode"><a class="header" href="#generating-sql-scripts-aka-offline-mode">Generating SQL Scripts (a.k.a. “Offline Mode”)</a></h1>
<p><strong>生成SQL脚本(又称离线模式)</strong></p>
<p>A major capability of Alembic is to generate migrations as SQL scripts, instead of running them against the database - this is also referred to as offline mode. This is a critical feature when working in large organizations where access to DDL is restricted, and SQL scripts must be handed off to DBAs. Alembic makes this easy via the <code>--sql</code> option passed to any <code>upgrade</code> or <code>downgrade</code> command. We can, for example, generate a script that revises up to rev <code>ae1027a6acf</code>:</p>
<pre><code class="language-bash">$ alembic upgrade ae1027a6acf --sql
INFO  [alembic.context] Context class PostgresqlContext.
INFO  [alembic.context] Will assume transactional DDL.
BEGIN;

CREATE TABLE alembic_version (
    version_num VARCHAR(32) NOT NULL
);

INFO  [alembic.context] Running upgrade None -&gt; 1975ea83b712
CREATE TABLE account (
    id SERIAL NOT NULL,
    name VARCHAR(50) NOT NULL,
    description VARCHAR(200),
    PRIMARY KEY (id)
);

INFO  [alembic.context] Running upgrade 1975ea83b712 -&gt; ae1027a6acf
ALTER TABLE account ADD COLUMN last_transaction_date TIMESTAMP WITHOUT TIME ZONE;

INSERT INTO alembic_version (version_num) VALUES ('ae1027a6acf');

COMMIT;
</code></pre>
<p>While the logging configuration dumped to standard error, the actual script was dumped to standard output - so in the absence of further configuration (described later in this section), we’d at first be using output redirection to generate a script:</p>
<pre><code class="language-bash">alembic upgrade ae1027a6acf --sql &gt; migration.sql
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-the-start-version"><a class="header" href="#getting-the-start-version">Getting the Start Version</a></h1>
<p>Notice that our migration script started at the base - this is the default when using offline mode, as no database connection is present and there’s no <code>alembic_version</code> table to read from.</p>
<p>One way to provide a starting version in offline mode is to provide a range to the command line. This is accomplished by providing the “version” in <code>start:end</code> syntax:</p>
<pre><code class="language-bash">alembic upgrade 1975ea83b712:ae1027a6acf --sql &gt; migration.sql
</code></pre>
<p>The <code>start:end</code> syntax is only allowed in offline mode; in “online” mode, the <code>alembic_version</code> table is always used to get at the current version.</p>
<p>It’s also possible to have the <code>env.py</code> script retrieve the “last” version from the local environment, such as from a local file. A scheme like this would basically treat a local file in the same way <code>alembic_version</code> works:</p>
<pre><code class="language-python">if context.is_offline_mode():
    version_file = os.path.join(os.path.dirname(config.config_file_name), &quot;version.txt&quot;)
    if os.path.exists(version_file):
        current_version = open(version_file).read()
    else:
        current_version = None
    context.configure(dialect_name=engine.name, starting_rev=current_version)
    context.run_migrations()
    end_version = context.get_revision_argument()
    if end_version and end_version != current_version:
        open(version_file, 'w').write(end_version)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="writing-migration-scripts-to-support-script-generation"><a class="header" href="#writing-migration-scripts-to-support-script-generation">Writing Migration Scripts to Support Script Generation</a></h1>
<p>The challenge of SQL script generation is that the scripts we generate can’t rely upon any client/server database access. This means a migration script that pulls some rows into memory via a <code>SELECT</code> statement will not work in <code>--sql</code> mode. It’s also important that the Alembic directives, all of which are designed specifically to work in both “live execution” as well as “offline SQL generation” mode, are used.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="customizing-the-environment"><a class="header" href="#customizing-the-environment">Customizing the Environment</a></h1>
<p>Users of the <code>--sql</code> option are encouraged to hack their env.py files to suit their needs. The env.py script as provided is broken into two sections: <code>run_migrations_online()</code> and <code>run_migrations_offline()</code>. Which function is run is determined at the bottom of the script by reading <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.is_offline_mode">EnvironmentContext.is_offline_mode()</a></strong>, which basically determines if the <code>--sql</code> flag was enabled.</p>
<p>For example, a multiple database configuration may want to run through each database and set the output of the migrations to different named files - the <strong><a href="zh/../en/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure">EnvironmentContext.configure()</a></strong> function accepts a parameter <code>output_buffer</code> for this purpose. Below we illustrate this within the <code>run_migrations_offline()</code> function:</p>
<pre><code class="language-python">from alembic import context
import myapp
import sys

db_1 = myapp.db_1
db_2 = myapp.db_2

def run_migrations_offline():
    &quot;&quot;&quot;Run migrations *without* a SQL connection.&quot;&quot;&quot;

    for name, engine, file_ in [
        (&quot;db1&quot;, db_1, &quot;db1.sql&quot;),
        (&quot;db2&quot;, db_2, &quot;db2.sql&quot;),
    ]:
        context.configure(
                    url=engine.url,
                    transactional_ddl=False,
                    output_buffer=open(file_, 'w'))
        context.execute(&quot;-- running migrations for '%s'&quot; % name)
        context.run_migrations(name=name)
        sys.stderr.write(&quot;Wrote file '%s'&quot; % file_)

def run_migrations_online():
    &quot;&quot;&quot;Run migrations *with* a SQL connection.&quot;&quot;&quot;

    for name, engine in [
        (&quot;db1&quot;, db_1),
        (&quot;db2&quot;, db_2),
    ]:
        connection = engine.connect()
        context.configure(connection=connection)
        try:
            context.run_migrations(name=name)
            session.commit()
        except:
            session.rollback()
            raise

if context.is_offline_mode():
    run_migrations_offline()
else:
    run_migrations_online()
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="命名约束的重要性"><a class="header" href="#命名约束的重要性">命名约束的重要性</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="在sqlite和其他数据中运行batch迁移脚本"><a class="header" href="#在sqlite和其他数据中运行batch迁移脚本">在SQLite和其他数据中运行&quot;Batch&quot;迁移脚本</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="工作分支"><a class="header" href="#工作分支">工作分支</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="操作参考"><a class="header" href="#操作参考">操作参考</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cookbook"><a class="header" href="#cookbook">cookbook</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="api详细"><a class="header" href="#api详细">API详细</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="更新历史"><a class="header" href="#更新历史">更新历史</a></h1>
<div style="break-before: page; page-break-before: always;"></div><!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<pre><code>&lt;title&gt;Welcome to Alembic’s documentation! &amp;#8212; Alembic 1.7.5 documentation&lt;/title&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;_static/pygments.css&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;_static/nature_override.css&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;_static/changelog.css&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;_static/sphinx_paramlinks.css&quot; /&gt;
&lt;script data-url_root=&quot;./&quot; id=&quot;documentation_options&quot; src=&quot;_static/documentation_options.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;_static/jquery.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;_static/underscore.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;_static/doctools.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;index&quot; title=&quot;Index&quot; href=&quot;genindex.html&quot; /&gt;
&lt;link rel=&quot;search&quot; title=&quot;Search&quot; href=&quot;search.html&quot; /&gt;
&lt;link rel=&quot;next&quot; title=&quot;Front Matter&quot; href=&quot;front.html&quot; /&gt; 
</code></pre>
</head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3 id="navigation"><a class="header" href="#navigation">Navigation</a></h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="en/genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="en/py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="en/front.html" title="Front Matter"
             accesskey="N">next</a> |</li>
        <li class="nav-item nav-item-0"><a href="en/index.html#">Alembic 1.7.5 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Welcome to Alembic’s documentation!</a></li> 
      </ul>
    </div>  
<pre><code>&lt;div class=&quot;document&quot;&gt;
  &lt;div class=&quot;documentwrapper&quot;&gt;
    &lt;div class=&quot;bodywrapper&quot;&gt;
      &lt;div class=&quot;body&quot; role=&quot;main&quot;&gt;
</code></pre>
<section id="welcome-to-alembic-s-documentation">
<h1 id="welcome-to-alembics-documentationa-classheaderlink-hrefenindexhtmlwelcome-to-alembic-s-documentation-titlepermalink-to-this-headlinea"><a class="header" href="#welcome-to-alembics-documentationa-classheaderlink-hrefenindexhtmlwelcome-to-alembic-s-documentation-titlepermalink-to-this-headlinea">Welcome to Alembic’s documentation!<a class="headerlink" href="en/index.html#welcome-to-alembic-s-documentation" title="Permalink to this headline">¶</a></a></h1>
<p><a class="reference external" href="https://alembic.sqlalchemy.org">Alembic</a> is a lightweight database migration tool for usage
with the <a class="reference external" href="https://www.sqlalchemy.org">SQLAlchemy</a> Database Toolkit for Python.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="en/front.html">Front Matter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="en/front.html#project-homepage">Project Homepage</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/front.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/front.html#dependencies">Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/front.html#community">Community</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/front.html#bugs">Bugs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="en/tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="en/tutorial.html#the-migration-environment">The Migration Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/tutorial.html#creating-an-environment">Creating an Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/tutorial.html#editing-the-ini-file">Editing the .ini File</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/tutorial.html#create-a-migration-script">Create a Migration Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/tutorial.html#running-our-first-migration">Running our First Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/tutorial.html#running-our-second-migration">Running our Second Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/tutorial.html#partial-revision-identifiers">Partial Revision Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/tutorial.html#relative-migration-identifiers">Relative Migration Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/tutorial.html#getting-information">Getting Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/tutorial.html#viewing-history-ranges">Viewing History Ranges</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/tutorial.html#downgrading">Downgrading</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/tutorial.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="en/autogenerate.html">Auto Generating Migrations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="en/autogenerate.html#what-does-autogenerate-detect-and-what-does-it-not-detect">What does Autogenerate Detect (and what does it <em>not</em> detect?)</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/autogenerate.html#autogenerating-multiple-metadata-collections">Autogenerating Multiple MetaData collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/autogenerate.html#controlling-what-to-be-autogenerated">Controlling What to be Autogenerated</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/autogenerate.html#omitting-schema-names-from-the-autogenerate-process">Omitting Schema Names from the Autogenerate Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/autogenerate.html#omitting-table-names-from-the-autogenerate-process">Omitting Table Names from the Autogenerate Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/autogenerate.html#omitting-based-on-object">Omitting Based on Object</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/autogenerate.html#comparing-and-rendering-types">Comparing and Rendering Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/autogenerate.html#controlling-the-module-prefix">Controlling the Module Prefix</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/autogenerate.html#affecting-the-rendering-of-types-themselves">Affecting the Rendering of Types Themselves</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/autogenerate.html#comparing-types">Comparing Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/autogenerate.html#applying-post-processing-and-python-code-formatters-to-generated-revisions">Applying Post Processing and Python Code Formatters to Generated Revisions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/autogenerate.html#basic-formatter-configuration">Basic Formatter Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/autogenerate.html#writing-custom-hooks-as-python-functions">Writing Custom Hooks as Python Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="en/offline.html">Generating SQL Scripts (a.k.a. “Offline Mode”)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="en/offline.html#getting-the-start-version">Getting the Start Version</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/offline.html#writing-migration-scripts-to-support-script-generation">Writing Migration Scripts to Support Script Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/offline.html#customizing-the-environment">Customizing the Environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="en/naming.html">The Importance of Naming Constraints</a><ul>
<li class="toctree-l2"><a class="reference internal" href="en/naming.html#integration-of-naming-conventions-into-operations-autogenerate">Integration of Naming Conventions into Operations, Autogenerate</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="en/batch.html">Running “Batch” Migrations for SQLite and Other Databases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="en/batch.html#controlling-table-reflection">Controlling Table Reflection</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/batch.html#dealing-with-constraints">Dealing with Constraints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/batch.html#dropping-unnamed-or-named-foreign-key-constraints">Dropping Unnamed or Named Foreign Key Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/batch.html#including-unnamed-unique-constraints">Including unnamed UNIQUE constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/batch.html#changing-the-type-of-boolean-enum-and-other-implicit-check-datatypes">Changing the Type of Boolean, Enum and other implicit CHECK datatypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/batch.html#including-check-constraints">Including CHECK constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/batch.html#dealing-with-referencing-foreign-keys">Dealing with Referencing Foreign Keys</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/batch.html#working-in-offline-mode">Working in Offline Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/batch.html#batch-mode-with-autogenerate">Batch mode with Autogenerate</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/batch.html#batch-mode-with-databases-other-than-sqlite">Batch mode with databases other than SQLite</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="en/branches.html">Working with Branches</a><ul>
<li class="toctree-l2"><a class="reference internal" href="en/branches.html#merging-branches">Merging Branches</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/branches.html#working-with-explicit-branches">Working with Explicit Branches</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/branches.html#referring-to-all-heads-at-once">Referring to all heads at once</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/branches.html#referring-to-a-specific-version">Referring to a Specific Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/branches.html#working-with-branch-labels">Working with Branch Labels</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/branches.html#more-label-syntaxes">More Label Syntaxes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/branches.html#working-with-multiple-bases">Working with Multiple Bases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/branches.html#setting-up-multiple-version-directories">Setting up Multiple Version Directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/branches.html#creating-a-labeled-base-revision">Creating a Labeled Base Revision</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/branches.html#running-with-multiple-bases">Running with Multiple Bases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/branches.html#branch-dependencies">Branch Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="en/ops.html">Operation Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="en/cookbook.html">Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#building-an-up-to-date-database-from-scratch">Building an Up to Date Database from Scratch</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#conditional-migration-elements">Conditional Migration Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#sharing-a-connection-with-a-series-of-migration-commands-and-environments">Sharing a Connection with a Series of Migration Commands and Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#replaceable-objects">Replaceable Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/cookbook.html#the-replaceable-object-structure">The Replaceable Object Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/cookbook.html#create-operations-for-the-target-objects">Create Operations for the Target Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/cookbook.html#create-initial-migrations">Create Initial Migrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/cookbook.html#create-revision-migrations">Create Revision Migrations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#rudimental-schema-level-multi-tenancy-for-postgresql-databases">Rudimental Schema-Level Multi Tenancy for PostgreSQL Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#don-t-generate-empty-migrations-with-autogenerate">Don’t Generate Empty Migrations with Autogenerate</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#don-t-emit-drop-index-when-the-table-is-to-be-dropped-as-well">Don’t emit DROP INDEX when the table is to be dropped as well</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#don-t-generate-any-drop-table-directives-with-autogenerate">Don’t generate any DROP TABLE directives with autogenerate</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#apply-custom-sorting-to-table-columns-within-create-table">Apply Custom Sorting to Table Columns within CREATE TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#don-t-emit-create-table-statements-for-views">Don’t emit CREATE TABLE statements for Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#run-multiple-alembic-environments-from-one-ini-file">Run Multiple Alembic Environments from one .ini file</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#print-python-code-to-generate-particular-database-tables">Print Python Code to Generate Particular Database Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#run-alembic-operation-objects-directly-as-in-from-autogenerate">Run Alembic Operation Objects Directly (as in from autogenerate)</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#test-current-database-revision-is-at-head-s">Test current database revision is at head(s)</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/cookbook.html#using-asyncio-with-alembic">Using Asyncio with Alembic</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="en/api/index.html">API Details</a><ul>
<li class="toctree-l2"><a class="reference internal" href="en/api/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/api/runtime.html">Runtime Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/api/runtime.html#the-environment-context">The Environment Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/api/runtime.html#the-migration-context">The Migration Context</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/api/config.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/api/commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/api/operations.html">Operation Directives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/api/operations.html#operation-plugins">Operation Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/api/operations.html#built-in-operation-objects">Built-in Operation Objects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/api/autogenerate.html">Autogeneration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/api/autogenerate.html#getting-diffs">Getting Diffs</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/api/autogenerate.html#customizing-revision-generation">Customizing Revision Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/api/autogenerate.html#autogenerating-custom-operation-directives">Autogenerating Custom Operation Directives</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/api/script.html">Script Directory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/api/script.html#revision">Revision</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/api/script.html#module-alembic.script.write_hooks">Write Hooks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/api/ddl.html">DDL Internals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/api/ddl.html#module-alembic.ddl.mysql">MySQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/api/ddl.html#module-alembic.ddl.mssql">MS-SQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/api/ddl.html#module-alembic.ddl.postgresql">Postgresql</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/api/ddl.html#module-alembic.ddl.sqlite">SQLite</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="en/changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.7.6">1.7.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.7.6-usecase">usecase</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.7.6-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.7.5">1.7.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.7.5-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.7.4">1.7.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.7.4-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.7.3">1.7.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.7.3-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.7.2">1.7.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.7.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.7.1">1.7.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.7.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.7.0">1.7.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.7.0-changed">changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.7.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.7.0-usecase">usecase</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.7.0-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.6.5">1.6.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.6.5-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.6.4">1.6.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.6.4-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.6.3">1.6.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.6.3-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.6.2">1.6.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.6.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.6.1">1.6.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.6.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.6.0">1.6.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.6.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.6.0-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.5.8">1.5.8</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.8-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.5.7">1.5.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.7-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.5.6">1.5.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.6-bug">bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.6-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.5.5">1.5.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.5-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.5.4">1.5.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.4-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.5.3">1.5.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.3-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.5.2">1.5.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.5.1">1.5.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.5.0">1.5.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.0-changed">changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.0-usecase">usecase</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.0-bug">bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.5.0-removed">removed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.4.3">1.4.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.4.3-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.4.2">1.4.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.4.2-usecase">usecase</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.4.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.4.1">1.4.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.4.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.4.0">1.4.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.4.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.4.0-usecase">usecase</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.4.0-bug">bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.4.0-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.3.3">1.3.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.3.3-usecase">usecase</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.3.3-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.3.2">1.3.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.3.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.3.1">1.3.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.3.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.3.0">1.3.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.3.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.3.0-bug">bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.3.0-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.2.1">1.2.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.2.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.2.0">1.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.2.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.2.0-usecase">usecase</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.2.0-bug">bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.2.0-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.1.0">1.1.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.1.0-usecase">usecase</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.1.0-bug">bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.1.0-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.11">1.0.11</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.11-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.10">1.0.10</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.10-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.9">1.0.9</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.9-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.8">1.0.8</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.8-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.7">1.0.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.7-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.6">1.0.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.6-feature">feature</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.5">1.0.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.5-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.4">1.0.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.3">1.0.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.3-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.2">1.0.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.1">1.0.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-1.0.0">1.0.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-1.0.0-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.9.10">0.9.10</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.10-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.9.9">0.9.9</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.9-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.9-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.9.8">0.9.8</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.8-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.9.7">0.9.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.7-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.9.6">0.9.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.6-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.6-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.9.5">0.9.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.5-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.9.4">0.9.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.4-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.9.3">0.9.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.3-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.3-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.9.2">0.9.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.2-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.2-bug">bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.2-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.9.1">0.9.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.9.0">0.9.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.9.0-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.8.10">0.8.10</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.10-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.8.9">0.8.9</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.9-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.8.8">0.8.8</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.8-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.8-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.8.7">0.8.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.7-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.8.6">0.8.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.6-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.8.5">0.8.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.5-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.8.4">0.8.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.4-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.4-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.8.3">0.8.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.3-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.8.2">0.8.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.8.1">0.8.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.1-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.8.0">0.8.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.0-bug">bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.8.0-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.7.7">0.7.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.7-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.7-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.7.6">0.7.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.6-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.6-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.7.5">0.7.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.5-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.5-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.7.4">0.7.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.4-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.7.3">0.7.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.3-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.7.2">0.7.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.7.1">0.7.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.1-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.7.0">0.7.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.0-changed">changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.7.0-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.6.7">0.6.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.7-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.7-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.6.6">0.6.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.6-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.6-bug">bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.6-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.6.5">0.6.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.5-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.5-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.6.4">0.6.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.4-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.4-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.6.3">0.6.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.3-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.3-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.6.2">0.6.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.2-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.6.1">0.6.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.1-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.6.0">0.6.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.0-bug">bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.6.0-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.5.0">0.5.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.5.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.5.0-bug">bug</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.5.0-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.4.2">0.4.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.4.2-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.4.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.4.1">0.4.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.4.1-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.4.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.4.0">0.4.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.4.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.4.0-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.3.6">0.3.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.6-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.6-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.3.5">0.3.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.5-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.5-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.3.4">0.3.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.4-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.3.3">0.3.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.3-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.3-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.3.2">0.3.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.2-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.3.1">0.3.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.3.0">0.3.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.3.0-misc">misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.2.2">0.2.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.2.2-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.2.2-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.2.1">0.2.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.2.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.2.0">0.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.2.0-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.2.0-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.1.1">0.1.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.1.1-feature">feature</a></li>
<li class="toctree-l3"><a class="reference internal" href="en/changelog.html#change-0.1.1-bug">bug</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="en/changelog.html#change-0.1.0">0.1.0</a></li>
</ul>
</li>
</ul>
</div>
<section id="indices-and-tables">
<h2 id="indices-and-tablesa-classheaderlink-hrefenindexhtmlindices-and-tables-titlepermalink-to-this-headlinea"><a class="header" href="#indices-and-tablesa-classheaderlink-hrefenindexhtmlindices-and-tables-titlepermalink-to-this-headlinea">Indices and tables<a class="headerlink" href="en/index.html#indices-and-tables" title="Permalink to this headline">¶</a></a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="en/genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="en/py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="en/search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
</section>
<pre><code>        &lt;div class=&quot;clearer&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;sphinxsidebar&quot; role=&quot;navigation&quot; aria-label=&quot;main navigation&quot;&gt;
    &lt;div class=&quot;sphinxsidebarwrapper&quot;&gt;&lt;script async type=&quot;text/javascript&quot; src=&quot;//cdn.carbonads.com/carbon.js?serve=CKYIL23W&amp;placement=alembiczzzcomputingcom&quot; id=&quot;_carbonads_js&quot;&gt;&lt;/script&gt;
</code></pre>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28532944-2', 'auto');
  ga('send', 'pageview');

</script>
<p>
<a href="en/alembic_latest.zip">Download documentation as ZIP file</a>
</p>
<h3 id="a-hrefenindexhtmltable-of-contentsa"><a class="header" href="#a-hrefenindexhtmltable-of-contentsa"><a href="en/index.html#">Table of Contents</a></a></h3>
  <ul>
<li><a class="reference internal" href="en/index.html#">Welcome to Alembic’s documentation!</a><ul>
<li><a class="reference internal" href="en/index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h4 id="next-topic"><a class="header" href="#next-topic">Next topic</a></h4>
  <p class="topless"><a href="en/front.html"
                        title="next chapter">Front Matter</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3 id="navigation-1"><a class="header" href="#navigation-1">Navigation</a></h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="en/genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="en/py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="en/front.html" title="Front Matter"
             >next</a> |</li>
        <li class="nav-item nav-item-0"><a href="en/index.html#">Alembic 1.7.5 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Welcome to Alembic’s documentation!</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010-2021, Mike Bayer.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
                        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
                
    </body>
</html>
